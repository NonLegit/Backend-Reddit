<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:263,&quot;tests&quot;:879,&quot;passes&quot;:879,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2022-12-26T12:34:40.639Z&quot;,&quot;end&quot;:&quot;2022-12-26T12:34:41.852Z&quot;,&quot;duration&quot;:1213,&quot;testsRegistered&quot;:879,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;250e74e8-e577-416b-aadb-f305623f9001&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4af3ee3c-ca33-46ce-a4b9-5253a5af7757&quot;,&quot;title&quot;:&quot;Authentication Controller Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;title&quot;:&quot;Sign-up Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Sign-up Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;Aa123456*\&quot;,\n  },\n};\nconst UserService = {\n  getPrefs: async (email, password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n  signUp: async (email, password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;medium\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.signUp(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fb83dfc-dd31-4b6a-adf9-3e7fcf22aa42&quot;,&quot;parentUUID&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Sign-up Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (email, password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;medium\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.signUp(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide username, email and password\&quot;,\n  errorType: 0,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9233571-92b1-4bd0-98cf-741b5512fd3b&quot;,&quot;parentUUID&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test bad request user already exists&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Sign-up Test thrid test bad request user already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (email, password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_ALREADY_EXISTS,\n      msg: \&quot;User Already Exists\&quot;,\n    };\n    return response;\n  },\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;medium\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.signUp(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Already Exists\&quot;,\n  errorType: 2,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;303032bf-0724-4e1c-b9a9-cf4f1f85b406&quot;,&quot;parentUUID&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test bad request  weak password&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Sign-up Test fifth test bad request  weak password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123456A\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (email, password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_ALREADY_EXISTS,\n      msg: \&quot;User Already Exists\&quot;,\n    };\n    return response;\n  },\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Too weak\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.signUp(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Too weak password\&quot;,\n  errorType: 1,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;831e77d5-97c7-406d-b04e-47ab98e57929&quot;,&quot;parentUUID&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test bad request Too weak password&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Sign-up Test fourth test bad request Too weak password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (email, password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_ALREADY_EXISTS,\n      msg: \&quot;User Already Exists\&quot;,\n    };\n    return response;\n  },\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.signUp(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Weak password\&quot;,\n  errorType: 1,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9602c7b-fbcb-4918-bdc6-e16243bd9df9&quot;,&quot;parentUUID&quot;:&quot;4aa947d4-18e7-475a-8702-3003238efb4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5fb83dfc-dd31-4b6a-adf9-3e7fcf22aa42&quot;,&quot;a9233571-92b1-4bd0-98cf-741b5512fd3b&quot;,&quot;303032bf-0724-4e1c-b9a9-cf4f1f85b406&quot;,&quot;831e77d5-97c7-406d-b04e-47ab98e57929&quot;,&quot;a9602c7b-fbcb-4918-bdc6-e16243bd9df9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;71765436-7864-4ccd-a000-1cf7096ee76f&quot;,&quot;title&quot;:&quot;Login Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Login Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;Aa123456*\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.logIn(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5afa6595-bfe8-4e17-9de8-a175400e5efb&quot;,&quot;parentUUID&quot;:&quot;71765436-7864-4ccd-a000-1cf7096ee76f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Login Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.logIn(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide username and password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dfe24da-d3db-4629-8f68-24e2ba6c864e&quot;,&quot;parentUUID&quot;:&quot;71765436-7864-4ccd-a000-1cf7096ee76f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test bad request user not found &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Login Test thrid test bad request user not found &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n      msg: \&quot;User Already Exists\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.logIn(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eae7455c-5709-4e9d-a388-dfacea46d2ca&quot;,&quot;parentUUID&quot;:&quot;71765436-7864-4ccd-a000-1cf7096ee76f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test incorrect password&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Login Test fourth test incorrect password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.INCORRECT_PASSWORD,\n      msg: \&quot;Incorrect Password\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.logIn(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Incorrect Password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b37f105f-d76c-4003-8d36-ce587bb89388&quot;,&quot;parentUUID&quot;:&quot;71765436-7864-4ccd-a000-1cf7096ee76f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5afa6595-bfe8-4e17-9de8-a175400e5efb&quot;,&quot;9dfe24da-d3db-4629-8f68-24e2ba6c864e&quot;,&quot;eae7455c-5709-4e9d-a388-dfacea46d2ca&quot;,&quot;b37f105f-d76c-4003-8d36-ce587bb89388&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0972b254-94d7-47b7-8ff0-7f3981389553&quot;,&quot;title&quot;:&quot;forgot password Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot password Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  forgotPassword: async (password, userName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fce4e06-95fa-4ab1-9a91-a4554184be11&quot;,&quot;parentUUID&quot;:&quot;0972b254-94d7-47b7-8ff0-7f3981389553&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot password Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n  },\n};\nconst UserService = {\n  forgotPassword: async (password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide username and email\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc97bafb-98ac-469c-8461-4ba4210d05dc&quot;,&quot;parentUUID&quot;:&quot;0972b254-94d7-47b7-8ff0-7f3981389553&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail user not found &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot password Test thrid test fail user not found &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  forgotPassword: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n      msg: \&quot;User Not Found\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c99d3c37-04f5-4563-b2b2-92a1b3afd46a&quot;,&quot;parentUUID&quot;:&quot;0972b254-94d7-47b7-8ff0-7f3981389553&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5fce4e06-95fa-4ab1-9a91-a4554184be11&quot;,&quot;cc97bafb-98ac-469c-8461-4ba4210d05dc&quot;,&quot;c99d3c37-04f5-4563-b2b2-92a1b3afd46a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92b5a8ba-a1dc-4326-bb3d-58d56756c7c4&quot;,&quot;title&quot;:&quot;forgot UserName Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot UserName Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  forgotUserName: async (userName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotUserName(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5723724-3e06-43eb-8394-e0c921b3556c&quot;,&quot;parentUUID&quot;:&quot;92b5a8ba-a1dc-4326-bb3d-58d56756c7c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot UserName Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n};\nconst UserService = {\n  forgotUserName: async (password, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotUserName(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide email\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed6c52fd-926f-4bd9-8af6-9ff9cdbf108b&quot;,&quot;parentUUID&quot;:&quot;92b5a8ba-a1dc-4326-bb3d-58d56756c7c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail user not found &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test forgot UserName Test thrid test fail user not found &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  forgotUserName: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n      msg: \&quot;User Not Found\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.forgotUserName(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;589650b8-1435-48dc-9ac5-5f585c19bc41&quot;,&quot;parentUUID&quot;:&quot;92b5a8ba-a1dc-4326-bb3d-58d56756c7c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5723724-3e06-43eb-8394-e0c921b3556c&quot;,&quot;ed6c52fd-926f-4bd9-8af6-9ff9cdbf108b&quot;,&quot;589650b8-1435-48dc-9ac5-5f585c19bc41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;title&quot;:&quot;reset password Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test reset password Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;token\&quot;,\n  },\n  body: {\n    password: \&quot;Aa123456*\&quot;,\n    confirmPassword: \&quot;Aa123456*\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Medium\&quot;;\n  },\n  resetPassword: async (resetToken, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.resetPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8638821f-6947-4c5e-b046-85dc14ff2a6b&quot;,&quot;parentUUID&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test reset password Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;token\&quot;,\n  },\n  body: {\n    password: \&quot;Aa1234\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n  resetPassword: async (resetToken, userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.resetPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide password and confirm password\&quot;,\n  errorType: 0,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a7f234b-44c1-4064-8f23-b8a949d0d5f2&quot;,&quot;parentUUID&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test expired token &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test reset password Test thrid test expired token &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;token\&quot;,\n  },\n  body: {\n    password: \&quot;Aa123456*\&quot;,\n    confirmPassword: \&quot;Aa123456*\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Medium\&quot;;\n  },\n  resetPassword: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.INVALID_RESET_TOKEN,\n      msg: \&quot;Token Invalid or Has Expired\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.resetPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Token Invalid or Has Expired\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2955604-be29-4043-b872-dcf46c4f55ef&quot;,&quot;parentUUID&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test password not equal confirmPassword &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test reset password Test fourth test password not equal confirmPassword &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;token\&quot;,\n  },\n  body: {\n    password: \&quot;Aa1234\&quot;,\n    confirmPassword: \&quot;Aa12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n  resetPassword: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.INVALID_RESET_TOKEN,\n      msg: \&quot;Provide correct Passwords\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.resetPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide Equal Passwords\&quot;,\n  errorType: 1,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0fd87cb-1b75-4252-80ee-350cfa4140ab&quot;,&quot;parentUUID&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test weak &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test reset password Test fifth test weak &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;token\&quot;,\n  },\n  body: {\n    password: \&quot;Aa1234\&quot;,\n    confirmPassword: \&quot;Aa1234\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n  resetPassword: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.INVALID_RESET_TOKEN,\n      msg: \&quot;Provide correct Passwords\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.resetPassword(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Weak password\&quot;,\n  errorType: 2,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598306be-b826-42dc-89ad-622a84a646b7&quot;,&quot;parentUUID&quot;:&quot;4d12a2ae-0bcc-4c80-a1ea-ad2f8c79bc3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8638821f-6947-4c5e-b046-85dc14ff2a6b&quot;,&quot;3a7f234b-44c1-4064-8f23-b8a949d0d5f2&quot;,&quot;f2955604-be29-4043-b872-dcf46c4f55ef&quot;,&quot;b0fd87cb-1b75-4252-80ee-350cfa4140ab&quot;,&quot;598306be-b826-42dc-89ad-622a84a646b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;title&quot;:&quot;authorize  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next);\nexpect(next).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5677f094-2d9d-41d5-a936-fbc41c0927f3&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return false;\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Unauthorized\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c849f97-c975-4dc1-afa8-a8c6d2c24dcc&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail password change after token created &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test thrid test fail password change after token created &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Password is changed , Please login again\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f325f8e-f9d0-4de3-9916-1c69a67e2721&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test keeploggedin &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test fourth test keeploggedin &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        keepLoggedIn: true,\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next2 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next2);\nexpect(next2).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d629edd-eac1-4ef7-986a-cc5afbf86fe9&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return true;\n      },\n      split: () =&gt; {\n        return [\&quot;Bearer\&quot;, \&quot;Token\&quot;];\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next3 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next3);\nexpect(next3).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29764f26-5a6e-4d3d-ac2e-c127ed34ad06&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sixth test&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test sixth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return true;\n      },\n      split: () =&gt; {\n        return [\&quot;Bearer\&quot;, \&quot;Token\&quot;];\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: false,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next3 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next3);\nexpect(res.status(404).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f332bd5c-d5e5-4164-9c66-631b11e6080f&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;seventh test&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test authorize  Test seventh test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return true;\n      },\n      split: () =&gt; {\n        return [\&quot;Bearer\&quot;, \&quot;Token\&quot;];\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: false,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    console.log(error);\n    return \&quot;1\&quot;;\n  },\n};\nlet next3 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.authorize(req, res, next3);\nexpect(res.status(401).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Unauthorized\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e501e294-7118-4a29-b924-ddbbe9ce83d1&quot;,&quot;parentUUID&quot;:&quot;92b7fbd4-2a06-4e4e-9f1b-e92d593b7c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5677f094-2d9d-41d5-a936-fbc41c0927f3&quot;,&quot;9c849f97-c975-4dc1-afa8-a8c6d2c24dcc&quot;,&quot;4f325f8e-f9d0-4de3-9916-1c69a67e2721&quot;,&quot;1d629edd-eac1-4ef7-986a-cc5afbf86fe9&quot;,&quot;29764f26-5a6e-4d3d-ac2e-c127ed34ad06&quot;,&quot;f332bd5c-d5e5-4164-9c66-631b11e6080f&quot;,&quot;e501e294-7118-4a29-b924-ddbbe9ce83d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;title&quot;:&quot;changeEmail  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed2@gmail.com\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: true,\n      test: \&quot;a\&quot;,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5c94b57-d004-46ae-b392-e583aebea5a7&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed2@gmail.com\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    return {\n      success: false,\n      error: userErrors.EMAIL_ERROR,\n      msg: \&quot;Cannot Send Emails at that moment ,try again later\&quot;,\n    };\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2676053-2bf4-42aa-b086-040c0a4e9210&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail  &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test thrid test fail  &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed2@gmail.com\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Email is already taken by another user\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b0ddc1d-823b-47db-ad30-a59a1db6f283&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test fourth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed2@gmail.com\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return false;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Incorrect password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0f731da-9897-473d-8c5b-bd0af09e9cba&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test fifth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed@gmail.com\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Insert different email\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92c23a95-394f-4e4e-beb9-0528c0d5c1b8&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sixth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test sixth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed@gmail.com\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide New Email and password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;699c5e73-8f5e-4fcd-8ef5-a961671270a4&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;seventh test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test changeEmail  Test seventh test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    newEmail: \&quot;ahmed\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  checkPassword: async (password, username) =&gt; {\n    return true;\n  },\n  getUserByEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  sendVerificationToken: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  updateUserEmail: async (token) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changeEmail(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invaild Email\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af3d714-43b8-4f38-b110-da9725ba607d&quot;,&quot;parentUUID&quot;:&quot;17d1d1f7-4834-46a0-98ab-9b1d12202527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5c94b57-d004-46ae-b392-e583aebea5a7&quot;,&quot;c2676053-2bf4-42aa-b086-040c0a4e9210&quot;,&quot;7b0ddc1d-823b-47db-ad30-a59a1db6f283&quot;,&quot;c0f731da-9897-473d-8c5b-bd0af09e9cba&quot;,&quot;92c23a95-394f-4e4e-beb9-0528c0d5c1b8&quot;,&quot;699c5e73-8f5e-4fcd-8ef5-a961671270a4&quot;,&quot;3af3d714-43b8-4f38-b110-da9725ba607d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;title&quot;:&quot;cnangePassword  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;12345\&quot;,\n    confirmNewPassword: \&quot;123456\&quot;,\n    newPassword: \&quot;123456\&quot;,\n    keepLoggedIn: true,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password, username) =&gt; {\n    return \&quot;strong\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return true;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed5657eb-3d7f-43f9-8169-850adf324860&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;12345\&quot;,\n    confirmNewPassword: \&quot;123456\&quot;,\n    newPassword: \&quot;123456\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password, username) =&gt; {\n    return \&quot;strong\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return false;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Incorrect Password\&quot;,\n  errorType: 3,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39342858-17d6-42a2-8d01-ae3ebe200349&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail  &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test thrid test fail  &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;12345\&quot;,\n    confirmNewPassword: \&quot;123456\&quot;,\n    newPassword: \&quot;123456\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password, username) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return false;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Weak password\&quot;,\n  errorType: 2,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd3ef6ab-be71-48c2-8366-de684f4bdc2b&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test fourth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;123456\&quot;,\n    confirmNewPassword: \&quot;123456\&quot;,\n    newPassword: \&quot;123456\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password, username) =&gt; {\n    return \&quot;Weak\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return false;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter New Password not old password\&quot;,\n  errorType: 4,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4024876b-ed32-425f-a57a-177c61ba8e66&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test fifth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;123456\&quot;,\n    confirmNewPassword: \&quot;1234556\&quot;,\n    newPassword: \&quot;123456\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: async (password, username) =&gt; {\n    return \&quot;weak\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return false;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide Equal Passwords\&quot;,\n  errorType: 1,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f2726d7-e48e-44ed-b80b-76315352daf2&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sixth test fail &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test sixth test fail &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;123456\&quot;,\n    confirmNewPassword: \&quot;1234556\&quot;,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: async (password, username) =&gt; {\n    return \&quot;weak\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return false;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage:\n    \&quot;Provide old password and new password and confirmed new password \&quot;,\n  errorType: 0,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7c791ca-8c88-41b5-bce4-008c3b6a1bdf&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;seventh test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test cnangePassword  Test seventh test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n  body: {\n    oldPassword: \&quot;12345\&quot;,\n    confirmNewPassword: \&quot;123456\&quot;,\n    newPassword: \&quot;123456\&quot;,\n    keepLoggedIn: false,\n  },\n};\nconst UserService = {\n  checkPasswordStrength: (password, username) =&gt; {\n    return \&quot;strong\&quot;;\n  },\n  checkPassword: async (token) =&gt; {\n    return true;\n  },\n  changePassword: async (token) =&gt; {\n    return \&quot;\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.changePassword(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5537127-f6c3-475e-abee-92a855815303&quot;,&quot;parentUUID&quot;:&quot;37700637-5ec5-4051-adf3-22337ea6d762&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed5657eb-3d7f-43f9-8169-850adf324860&quot;,&quot;39342858-17d6-42a2-8d01-ae3ebe200349&quot;,&quot;dd3ef6ab-be71-48c2-8366-de684f4bdc2b&quot;,&quot;4024876b-ed32-425f-a57a-177c61ba8e66&quot;,&quot;1f2726d7-e48e-44ed-b80b-76315352daf2&quot;,&quot;e7c791ca-8c88-41b5-bce4-008c3b6a1bdf&quot;,&quot;a5537127-f6c3-475e-abee-92a855815303&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;75a075de-04c3-4c88-b160-a391dbbfb412&quot;,&quot;title&quot;:&quot;Logout Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test Logout Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;\&quot;,\n  },\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {};\nconst authObj = new auth({ UserService });\nawait authObj.logOut(req, res, \&quot;\&quot;);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b434ad4-4606-4873-9cf3-8738a9571d2c&quot;,&quot;parentUUID&quot;:&quot;75a075de-04c3-4c88-b160-a391dbbfb412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b434ad4-4606-4873-9cf3-8738a9571d2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;298d84af-2634-4e9d-8424-2f8614e3896c&quot;,&quot;title&quot;:&quot;verifyEmail Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test verifyEmail Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;\&quot;,\n  },\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  verifyEmailToken: async (userName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.verifyEmail(req, res, \&quot;\&quot;);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fca00648-2e12-4bc0-853e-f0ca9d6757ee&quot;,&quot;parentUUID&quot;:&quot;298d84af-2634-4e9d-8424-2f8614e3896c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test verifyEmail Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  params: {\n    token: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  verifyEmailToken: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.verifyEmail(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Token Invalid or Has Expired\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecb7d6a6-7744-497d-9707-4cc1dd64048a&quot;,&quot;parentUUID&quot;:&quot;298d84af-2634-4e9d-8424-2f8614e3896c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fca00648-2e12-4bc0-853e-f0ca9d6757ee&quot;,&quot;ecb7d6a6-7744-497d-9707-4cc1dd64048a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;785d79e8-93db-49d1-88e7-a8c1b3aa26ce&quot;,&quot;title&quot;:&quot;deleteAccount Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test deleteAccount Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  params: {\n    token: \&quot;\&quot;,\n  },\n  body: {\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;12345\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (userName, password) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n  deleteAccount: async () =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.deleteAccount(req, res, \&quot;\&quot;);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f665556-3824-49d3-9f64-24b712e4608b&quot;,&quot;parentUUID&quot;:&quot;785d79e8-93db-49d1-88e7-a8c1b3aa26ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test deleteAccount Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  body: { userName: \&quot;ahmed\&quot; },\n  params: {\n    token: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n  deleteAccount: async () =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.deleteAccount(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide username and password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76e16076-2ec0-48ef-951a-51eb48863872&quot;,&quot;parentUUID&quot;:&quot;785d79e8-93db-49d1-88e7-a8c1b3aa26ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test invalid name  &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test deleteAccount Test thrid test invalid name  &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;ahmeddddd\&quot;,\n  },\n  body: { userName: \&quot;ahmed\&quot;, password: \&quot;123\&quot; },\n  params: {\n    token: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n  deleteAccount: async () =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.deleteAccount(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid userName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bcd1b3c-2de3-4972-8f6a-d810e42087f5&quot;,&quot;parentUUID&quot;:&quot;785d79e8-93db-49d1-88e7-a8c1b3aa26ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test deleteAccount Test fourth test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;ahmed\&quot;,\n    password: \&quot;123\&quot;,\n  },\n  body: { userName: \&quot;ahmed\&quot;, password: \&quot;123\&quot; },\n  params: {\n    token: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  logIn: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.INCORRECT_PASSWORD,\n      msg: \&quot;Incorrect Password\&quot;,\n    };\n    return response;\n  },\n  deleteAccount: async () =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.deleteAccount(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Incorrect Password\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;160a872f-09f3-461f-a276-db8bb79b6647&quot;,&quot;parentUUID&quot;:&quot;785d79e8-93db-49d1-88e7-a8c1b3aa26ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f665556-3824-49d3-9f64-24b712e4608b&quot;,&quot;76e16076-2ec0-48ef-951a-51eb48863872&quot;,&quot;6bcd1b3c-2de3-4972-8f6a-d810e42087f5&quot;,&quot;160a872f-09f3-461f-a276-db8bb79b6647&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6fb707ef-e732-47fc-b67f-c9f5732e7a02&quot;,&quot;title&quot;:&quot;checkResetTokentime Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkResetTokentime Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    token: \&quot;\&quot;,\n  },\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  checkResetTokenTime: async (userName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.checkResetTokentime(req, res, \&quot;\&quot;);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afb09a61-efb5-4019-8598-15fc565ec87a&quot;,&quot;parentUUID&quot;:&quot;6fb707ef-e732-47fc-b67f-c9f5732e7a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkResetTokentime Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  params: {\n    token: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  checkResetTokenTime: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.checkResetTokentime(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Token is invalid or has expired\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;348c3253-e6d1-43d0-bf12-4593b32125de&quot;,&quot;parentUUID&quot;:&quot;6fb707ef-e732-47fc-b67f-c9f5732e7a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afb09a61-efb5-4019-8598-15fc565ec87a&quot;,&quot;348c3253-e6d1-43d0-bf12-4593b32125de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;b4a48460-027e-4ae5-836d-b00cf379f46a&quot;,&quot;title&quot;:&quot;facebookValidation  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test facebookValidation  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    user: { _id: \&quot;1\&quot; },\n    email: \&quot;ahmed@gmail.com\&quot;,\n    status: \&quot;fail\&quot;,\n  },\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  generateRandomPassword: (userName) =&gt; {\n    return \&quot;Apassword1234*\&quot;;\n  },\n  signUp: async (userName) =&gt; {\n    const response = {\n      success: true,\n      token: \&quot;token\&quot;,\n    };\n    return response;\n  },\n  createToken: () =&gt; {\n    return \&quot;token\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.facebookValidation(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ebfa83c-cb8e-4b0d-b7f2-efd7c2924f41&quot;,&quot;parentUUID&quot;:&quot;b4a48460-027e-4ae5-836d-b00cf379f46a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test facebookValidation  Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  user: {\n    status: \&quot;fail\&quot;,\n    user: { _id: \&quot;1\&quot; },\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_ALREADY_EXISTS,\n      msg: \&quot;User Already Exists\&quot;,\n    };\n    return response;\n  },\n  generateRandomPassword: (userName) =&gt; {\n    return \&quot;Apassword1234*\&quot;;\n  },\n  createToken: () =&gt; {\n    return \&quot;token\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.facebookValidation(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Already Exists\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1e07d76-0c5b-43f8-9fb9-a7933eb932c2&quot;,&quot;parentUUID&quot;:&quot;b4a48460-027e-4ae5-836d-b00cf379f46a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test facebookValidation  Test thrid test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  user: {\n    status: \&quot;success\&quot;,\n    user: { _id: \&quot;1\&quot; },\n    email: \&quot;ahmed@gmail.com\&quot;,\n  },\n};\nconst UserService = {\n  signUp: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_ALREADY_EXISTS,\n      msg: \&quot;\&quot;,\n    };\n    return response;\n  },\n  generateRandomPassword: (userName) =&gt; {\n    return \&quot;password\&quot;;\n  },\n  createToken: () =&gt; {\n    return \&quot;token\&quot;;\n  },\n};\nconst authObj = new auth({ UserService });\nawait authObj.facebookValidation(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64d05759-4208-4c42-8ff1-0d1e0f2d4a23&quot;,&quot;parentUUID&quot;:&quot;b4a48460-027e-4ae5-836d-b00cf379f46a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ebfa83c-cb8e-4b0d-b7f2-efd7c2924f41&quot;,&quot;f1e07d76-0c5b-43f8-9fb9-a7933eb932c2&quot;,&quot;64d05759-4208-4c42-8ff1-0d1e0f2d4a23&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;974b9ff0-9d98-46e5-8cb8-494ec8946d70&quot;,&quot;title&quot;:&quot;facebookAuth Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test facebookAuth Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const profile = {\n  emails: [\n    {\n      value: \&quot;ahmed\&quot;,\n    },\n  ],\n  body: {\n    email: \&quot;ahmedAgmail.com\&quot;,\n  },\n};\nconst UserService = {\n  getUserByEmail: async (userName) =&gt; {\n    const response = {\n      success: true,\n      data: \&quot;data\&quot;,\n    };\n    return response;\n  },\n};\nlet done = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.facebookAuth(\&quot;\&quot;, \&quot;\&quot;, profile, done);\nexpect(done).to.have.been.calledWith(null, {\n  status: \&quot;success\&quot;,\n  user: \&quot;data\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b09e857b-24bb-47a3-8acc-05ee8ac35124&quot;,&quot;parentUUID&quot;:&quot;974b9ff0-9d98-46e5-8cb8-494ec8946d70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request not provide all body data&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test facebookAuth Test second test bad request not provide all body data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const profile = {\n  body: {},\n  emails: [\n    {\n      value: \&quot;ahmed\&quot;,\n    },\n  ],\n};\nconst UserService = {\n  getUserByEmail: async (password, userName) =&gt; {\n    const response = {\n      success: false,\n      token: \&quot;jwt\&quot;,\n    };\n    return response;\n  },\n};\nlet done2 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.facebookAuth(\&quot;\&quot;, \&quot;\&quot;, profile, done2);\nexpect(done2).to.have.been.calledWith(null, {\n  status: \&quot;fail\&quot;,\n  email: \&quot;ahmed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab3e8d4f-ff45-4607-9d54-ec35d92561e0&quot;,&quot;parentUUID&quot;:&quot;974b9ff0-9d98-46e5-8cb8-494ec8946d70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b09e857b-24bb-47a3-8acc-05ee8ac35124&quot;,&quot;ab3e8d4f-ff45-4607-9d54-ec35d92561e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ebc43d72-4f2c-4058-bf42-bcd8a2951f05&quot;,&quot;title&quot;:&quot;errorResponse Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test errorResponse Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserService = {};\nconst authObj = new auth({ UserService });\nlet response = await authObj.errorResponse(userErrors.MONGO_ERR, \&quot;Error\&quot;);\nexpect(response.msg).to.be.equal(\&quot;Invalid parent, couldn&#x27;t create user\&quot;);\nexpect(response.stat).to.be.equal(400);\nresponse = await authObj.errorResponse(userErrors.INVALID_TOKEN, \&quot;Error\&quot;);\nexpect(response.msg).to.be.equal(\&quot;Error\&quot;);\nexpect(response.stat).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4cca3ee-f102-4bf1-a2e7-3ae887d2d55b&quot;,&quot;parentUUID&quot;:&quot;ebc43d72-4f2c-4058-bf42-bcd8a2951f05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4cca3ee-f102-4bf1-a2e7-3ae887d2d55b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;title&quot;:&quot;checkAuthorize  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check1 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check1);\nexpect(next_check1).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fea91484-88a6-4a3c-b1cf-812485f7fad0&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return false;\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check2 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check2);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Unauthorized\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06f7e449-780b-4a0e-bd88-1ba4f204d027&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail password change after token created &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test thrid test fail password change after token created &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check3 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check3);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Password is changed , Please login again\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;698bdad8-8658-4d62-becb-e34790115f24&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test keeploggedin &quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test fourth test keeploggedin &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {\n    jwt: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        keepLoggedIn: true,\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check4 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check4);\nexpect(next_check4).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f997a3c9-3d49-455e-8c70-08818b0eec45&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return true;\n      },\n      split: () =&gt; {\n        return [\&quot;Bearer\&quot;, \&quot;Token\&quot;];\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check5 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check5);\nexpect(next_check5).to.have.been.calledOnce;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc9e59b0-845c-4fb5-bdac-02c9823cc661&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sixth test&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test checkAuthorize  Test sixth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  cookies: {},\n  headers: {\n    authorization: {\n      startsWith: (token) =&gt; {\n        return true;\n      },\n      split: () =&gt; {\n        return [\&quot;Bearer\&quot;, \&quot;Token\&quot;];\n      },\n    },\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: false,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check6 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.checkAuthorize(req, res, next_check6);\nexpect(res.status(404).json).to.deep.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3dddc13-25af-4ee0-8acb-9894a208ea6a&quot;,&quot;parentUUID&quot;:&quot;d076a45d-6911-4737-b962-04c2fe4a5afc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fea91484-88a6-4a3c-b1cf-812485f7fad0&quot;,&quot;06f7e449-780b-4a0e-bd88-1ba4f204d027&quot;,&quot;698bdad8-8658-4d62-becb-e34790115f24&quot;,&quot;f997a3c9-3d49-455e-8c70-08818b0eec45&quot;,&quot;bc9e59b0-845c-4fb5-bdac-02c9823cc661&quot;,&quot;d3dddc13-25af-4ee0-8acb-9894a208ea6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;31efc10a-828f-46f0-8470-b1facecdb310&quot;,&quot;title&quot;:&quot;google  Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\authenticationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\authenticationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test google  Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:197,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    tokenId: \&quot;token\&quot;,\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check1 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.googleAuth(req, res, next_check1);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;provide valid token\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7edd005-f62a-4061-a0d5-2863386c019d&quot;,&quot;parentUUID&quot;:&quot;31efc10a-828f-46f0-8470-b1facecdb310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Authentication Controller Test google  Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n  },\n};\nconst UserService = {\n  getUser: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        changedPasswordAfter: (time) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n  decodeToken: async (token) =&gt; {\n    return \&quot;1\&quot;;\n  },\n};\nlet next_check1 = sinon.spy();\nconst authObj = new auth({ UserService });\nawait authObj.googleAuth(req, res, next_check1);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;provide token\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db33a555-443a-416f-9296-4368dc706d81&quot;,&quot;parentUUID&quot;:&quot;31efc10a-828f-46f0-8470-b1facecdb310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7edd005-f62a-4061-a0d5-2863386c019d&quot;,&quot;db33a555-443a-416f-9296-4368dc706d81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:198,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;abacba5b-a1f7-480e-8ca9-3f868f861814&quot;,&quot;title&quot;:&quot;Comment Controller CRUD operations&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;title&quot;:&quot;Create comment test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful creation&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Create comment test successful creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.createComment(req, res, () =&gt; {\n  return true;\n});\nexpect(res.status).to.have.been.calledWith(201);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    author: \&quot;123e4aab2a94c22ae492983a\&quot;,\n    parent: \&quot;637769a739070007b3bf4de1\&quot;,\n    parentType: \&quot;Comment\&quot;,\n    text: \&quot;comment text\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34fb030f-03ea-4360-8ce6-26a99c5b062e&quot;,&quot;parentUUID&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid parent&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Create comment test Invalid parent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.createComment = async (data) =&gt; {\n  return { success: false, error: commentErrors.INVALID_PARENT };\n};\nawait commentController.createComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid parent, couldn&#x27;t create comment\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe8d1e4d-c9bd-45c5-9489-5334c1479186&quot;,&quot;parentUUID&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;parent locked&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Create comment test parent locked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.createComment = async (data) =&gt; {\n  return { success: false, error: commentErrors.PARANT_LOCKED };\n};\nawait commentController.createComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Parent is locked, comments are not allowed\&quot;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80f48db4-b409-41a0-891e-2168af30b0d3&quot;,&quot;parentUUID&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;mongo error&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Create comment test mongo error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.createComment = async (data) =&gt; {\n  return {\n    success: false,\n    error: commentErrors.MONGO_ERR,\n    msg: \&quot;message\&quot;,\n  };\n};\nawait commentController.createComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;message\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;168b05da-d76f-4c65-96c1-aa5f1dcfeb5e&quot;,&quot;parentUUID&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Create comment test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.body.parent;\nawait commentController.createComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5178371d-1ce3-4937-9ca4-aed6e128da88&quot;,&quot;parentUUID&quot;:&quot;a988c18b-c514-4bef-9911-fa1d2e050250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34fb030f-03ea-4360-8ce6-26a99c5b062e&quot;,&quot;fe8d1e4d-c9bd-45c5-9489-5334c1479186&quot;,&quot;80f48db4-b409-41a0-891e-2168af30b0d3&quot;,&quot;168b05da-d76f-4c65-96c1-aa5f1dcfeb5e&quot;,&quot;5178371d-1ce3-4937-9ca4-aed6e128da88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;title&quot;:&quot;Update comment test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful update&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Update comment test successful update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.updateComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    text: \&quot;this is a comment\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21461e93-cd73-496f-a778-139789865ba5&quot;,&quot;parentUUID&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User must be author&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Update comment test User must be author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.updateComment = async (data) =&gt; {\n  return { success: false, error: commentErrors.NOT_AUTHOR };\n};\nawait commentController.updateComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be author\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6df7f06-7f7e-4cd7-b809-b586b88eafaf&quot;,&quot;parentUUID&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Update comment test Comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.updateComment = async (data) =&gt; {\n  return { success: false, error: commentErrors.COMMENT_NOT_FOUND };\n};\nawait commentController.updateComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comment not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cb43f23-98e1-4502-acb1-d4984193e1ba&quot;,&quot;parentUUID&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;mongo error&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Update comment test mongo error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.updateComment = async (data) =&gt; {\n  return {\n    success: false,\n    error: commentErrors.MONGO_ERR,\n    msg: \&quot;message\&quot;,\n  };\n};\nawait commentController.updateComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;message\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c9d9b99-e560-430f-97f0-210bac2ceb8b&quot;,&quot;parentUUID&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Update comment test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait commentController.updateComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8838c0b-3762-4c7b-8142-e98d37dd217c&quot;,&quot;parentUUID&quot;:&quot;74aaca89-c538-4d93-a533-76e25c44ddf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21461e93-cd73-496f-a778-139789865ba5&quot;,&quot;d6df7f06-7f7e-4cd7-b809-b586b88eafaf&quot;,&quot;2cb43f23-98e1-4502-acb1-d4984193e1ba&quot;,&quot;2c9d9b99-e560-430f-97f0-210bac2ceb8b&quot;,&quot;c8838c0b-3762-4c7b-8142-e98d37dd217c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;62a2f20e-6b13-4ff3-8508-8ae85b11742f&quot;,&quot;title&quot;:&quot;Delete comment test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful delete&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Delete comment test successful delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.deleteComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: null,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f63e87f-bb1a-422d-baa0-b7bad9fa933e&quot;,&quot;parentUUID&quot;:&quot;62a2f20e-6b13-4ff3-8508-8ae85b11742f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User must be author&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Delete comment test User must be author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.deleteComment = async () =&gt; {\n  return { success: false, error: commentErrors.NOT_AUTHOR };\n};\nawait commentController.deleteComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be author\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3310a95-ba18-4f7f-ac73-27d8b9536e56&quot;,&quot;parentUUID&quot;:&quot;62a2f20e-6b13-4ff3-8508-8ae85b11742f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Delete comment test Comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.deleteComment = async () =&gt; {\n  return { success: false, error: commentErrors.COMMENT_NOT_FOUND };\n};\nawait commentController.deleteComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comment not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c417263-16e6-4e25-ad42-364d86f059a2&quot;,&quot;parentUUID&quot;:&quot;62a2f20e-6b13-4ff3-8508-8ae85b11742f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Delete comment test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params.commentId;\nawait commentController.deleteComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter commentId\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d2c7d8d-9c40-4dd4-9703-ced097e0ab21&quot;,&quot;parentUUID&quot;:&quot;62a2f20e-6b13-4ff3-8508-8ae85b11742f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f63e87f-bb1a-422d-baa0-b7bad9fa933e&quot;,&quot;a3310a95-ba18-4f7f-ac73-27d8b9536e56&quot;,&quot;1c417263-16e6-4e25-ad42-364d86f059a2&quot;,&quot;5d2c7d8d-9c40-4dd4-9703-ced097e0ab21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;title&quot;:&quot;Comment tree test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;comment tree&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test comment tree&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  comments: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;871d2a05-3117-4c5f-98fe-41d3f0ad43ab&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default parameters&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test default parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.limit;\ndelete req.query.depth;\ndelete req.query.sort;\nawait commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  comments: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce6b4b5f-6de9-4a62-950f-8a3930bda6f2&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.commentTree = () =&gt; {\n  return { success: false, error: commentErrors.POST_NOT_FOUND };\n};\nawait commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cfa0e4a-76fe-4974-9ea4-ee99bdc4d976&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.commentTree = () =&gt; {\n  return { success: false, error: commentErrors.COMMENT_NOT_FOUND };\n};\nawait commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comment not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e34b2f12-ca10-4a5b-a727-447b5c8afccd&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comment not child&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test comment not child&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.commentTree = () =&gt; {\n  return { success: false, error: commentErrors.COMMENT_NOT_CHILD };\n};\nawait commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comment is not a child of post\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bed344d-18af-42df-b8f8-fdb7f6182d7d&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Comment tree test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait commentController.commentTree(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df9fda4e-b1cc-4353-a3b0-98fa9b49a6bc&quot;,&quot;parentUUID&quot;:&quot;7b761cd9-3df2-4bf1-af3e-ce30e955462e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;871d2a05-3117-4c5f-98fe-41d3f0ad43ab&quot;,&quot;ce6b4b5f-6de9-4a62-950f-8a3930bda6f2&quot;,&quot;9cfa0e4a-76fe-4974-9ea4-ee99bdc4d976&quot;,&quot;e34b2f12-ca10-4a5b-a727-447b5c8afccd&quot;,&quot;1bed344d-18af-42df-b8f8-fdb7f6182d7d&quot;,&quot;df9fda4e-b1cc-4353-a3b0-98fa9b49a6bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;title&quot;:&quot;commentVote Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations commentVote Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.commentVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dff46563-b627-48e9-bee6-8596f86e160f&quot;,&quot;parentUUID&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations commentVote Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.commentVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9995cb91-e9b7-46b4-98f2-e386de602006&quot;,&quot;parentUUID&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations commentVote Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.commentVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1daa3e1b-3663-4f83-bcaa-495a5dd64269&quot;,&quot;parentUUID&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations commentVote Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.commentVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Comment Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f77cb745-ec59-40ac-86a9-e04e129b2a15&quot;,&quot;parentUUID&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations commentVote Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.commentVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c00fe29a-527e-43eb-9af6-ea04f941d04b&quot;,&quot;parentUUID&quot;:&quot;339acc9d-f560-48ec-ae4f-84c4aa16e747&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dff46563-b627-48e9-bee6-8596f86e160f&quot;,&quot;9995cb91-e9b7-46b4-98f2-e386de602006&quot;,&quot;1daa3e1b-3663-4f83-bcaa-495a5dd64269&quot;,&quot;f77cb745-ec59-40ac-86a9-e04e129b2a15&quot;,&quot;c00fe29a-527e-43eb-9af6-ea04f941d04b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;84adfcbb-ebe6-449a-8c71-e8aa91f9ead0&quot;,&quot;title&quot;:&quot;More children test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;more children&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations More children test more children&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.moreChildren(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  comments: [\n    { _id: \&quot;123c4aab2a94c22ae492983a\&quot; },\n    { _id: \&quot;123c4aab2a94c22ae492983a\&quot; },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29e5f900-edc6-47b7-bd91-379a2773060d&quot;,&quot;parentUUID&quot;:&quot;84adfcbb-ebe6-449a-8c71-e8aa91f9ead0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;no children found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations More children test no children found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.moreChildren = async () =&gt; [];\nawait commentController.moreChildren(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comments not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08addda3-1042-4ed9-b1b9-4da592ab3ad3&quot;,&quot;parentUUID&quot;:&quot;84adfcbb-ebe6-449a-8c71-e8aa91f9ead0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default parameters&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations More children test default parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.limit;\ndelete req.query.depth;\ndelete req.query.sort;\nawait commentController.moreChildren(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  comments: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33e73e28-04b9-4e56-b1a1-5907b3689bcc&quot;,&quot;parentUUID&quot;:&quot;84adfcbb-ebe6-449a-8c71-e8aa91f9ead0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;children are missing&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations More children test children are missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.children;\nawait commentController.moreChildren(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Children query parameter is required\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00e87be2-3eb2-4ea3-8167-e362bcc18d17&quot;,&quot;parentUUID&quot;:&quot;84adfcbb-ebe6-449a-8c71-e8aa91f9ead0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29e5f900-edc6-47b7-bd91-379a2773060d&quot;,&quot;08addda3-1042-4ed9-b1b9-4da592ab3ad3&quot;,&quot;33e73e28-04b9-4e56-b1a1-5907b3689bcc&quot;,&quot;00e87be2-3eb2-4ea3-8167-e362bcc18d17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;title&quot;:&quot;Must be moderator test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;moderator&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Must be moderator test moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);\n//expect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4e9192e-a58a-4482-a14f-8b53c81134a4&quot;,&quot;parentUUID&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not moderator&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Must be moderator test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.isMod = () =&gt; {\n  return { success: false, error: commentErrors.NOT_MOD };\n};\nawait commentController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;965756ca-b28e-43d6-a838-26835e190b30&quot;,&quot;parentUUID&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not subreddit&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Must be moderator test not subreddit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.isMod = () =&gt; {\n  return { success: false, error: commentErrors.OWNER_NOT_SUBREDDIT };\n};\nawait commentController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;The comment must belong to a subreddit\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4194fca0-be8e-4173-9571-bb8fd2c563ec&quot;,&quot;parentUUID&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Must be moderator test comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.isMod = () =&gt; {\n  return { success: false, error: commentErrors.COMMENT_NOT_FOUND };\n};\nawait commentController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Comment not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a31fcc36-5317-4336-9c8c-66a0eae537e5&quot;,&quot;parentUUID&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Must be moderator test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait commentController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba1ade60-8f3e-41da-900b-91f9d44c671f&quot;,&quot;parentUUID&quot;:&quot;d0d47fa7-fda3-4019-8aae-e5ceab84dbac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4e9192e-a58a-4482-a14f-8b53c81134a4&quot;,&quot;965756ca-b28e-43d6-a838-26835e190b30&quot;,&quot;4194fca0-be8e-4173-9571-bb8fd2c563ec&quot;,&quot;a31fcc36-5317-4336-9c8c-66a0eae537e5&quot;,&quot;ba1ade60-8f3e-41da-900b-91f9d44c671f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;299b5db2-239f-4cbe-9ffa-cf222c41adb4&quot;,&quot;title&quot;:&quot;Moderate comment test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful action&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Moderate comment test successful action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await commentController.moderateComment(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;918eba83-2909-4d3e-b6c0-473388593693&quot;,&quot;parentUUID&quot;:&quot;299b5db2-239f-4cbe-9ffa-cf222c41adb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;action arleady done&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Moderate comment test action arleady done&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentService.modAction = () =&gt; false\nawait commentController.moderateComment(req, res, next);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Action is already performed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74fead95-483f-4add-8222-04e1249d0e33&quot;,&quot;parentUUID&quot;:&quot;299b5db2-239f-4cbe-9ffa-cf222c41adb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations Moderate comment test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.action = \&quot;not a valid action\&quot;\nawait commentController.moderateComment(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid comment moderation action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34844a47-5464-4319-a2e5-0ef57797a9d9&quot;,&quot;parentUUID&quot;:&quot;299b5db2-239f-4cbe-9ffa-cf222c41adb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;918eba83-2909-4d3e-b6c0-473388593693&quot;,&quot;74fead95-483f-4add-8222-04e1249d0e33&quot;,&quot;34844a47-5464-4319-a2e5-0ef57797a9d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;title&quot;:&quot;saveComment Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations saveComment Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  saveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.saveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9deab33e-eead-40a5-ad02-a0fefe0d1d2f&quot;,&quot;parentUUID&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations saveComment Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  saveComment: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.saveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17064846-fe18-4217-8399-a4852dc98347&quot;,&quot;parentUUID&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations saveComment Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  saveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.saveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b58b98f-3e18-4c60-8805-1a592fc95ac0&quot;,&quot;parentUUID&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations saveComment Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  saveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.saveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Comment Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5255b7e-3669-476d-bee6-1ae208cae442&quot;,&quot;parentUUID&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations saveComment Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  saveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.saveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47928cf9-1200-467f-8af2-74ad366027e7&quot;,&quot;parentUUID&quot;:&quot;82c97478-0562-46e9-9005-dd84aa3c268d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9deab33e-eead-40a5-ad02-a0fefe0d1d2f&quot;,&quot;17064846-fe18-4217-8399-a4852dc98347&quot;,&quot;7b58b98f-3e18-4c60-8805-1a592fc95ac0&quot;,&quot;a5255b7e-3669-476d-bee6-1ae208cae442&quot;,&quot;47928cf9-1200-467f-8af2-74ad366027e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;title&quot;:&quot;unSaveComment Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations unSaveComment Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSaveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.unSaveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5e3fc87-9eb7-405b-a20d-f687cb15b82c&quot;,&quot;parentUUID&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations unSaveComment Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSaveComment: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.unSaveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34e03078-3460-4db5-9447-deaaa2203646&quot;,&quot;parentUUID&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations unSaveComment Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSaveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.unSaveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5064da6e-5323-4df9-992d-e4d48f1bfaf3&quot;,&quot;parentUUID&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations unSaveComment Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSaveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.unSaveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Comment Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b5f9ac5-34f2-43e5-af55-362c3bc75189&quot;,&quot;parentUUID&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations unSaveComment Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  findCommentById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSaveComment: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst commentController = new CommentController({\n  CommentService,\n  UserService,\n});\nawait commentController.unSaveComment(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5af24bb8-b51d-4eee-b1a1-c1c2c860ec1b&quot;,&quot;parentUUID&quot;:&quot;e9d76384-b271-4924-b80a-bf6817d10a01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5e3fc87-9eb7-405b-a20d-f687cb15b82c&quot;,&quot;34e03078-3460-4db5-9447-deaaa2203646&quot;,&quot;5064da6e-5323-4df9-992d-e4d48f1bfaf3&quot;,&quot;7b5f9ac5-34f2-43e5-af55-362c3bc75189&quot;,&quot;5af24bb8-b51d-4eee-b1a1-c1c2c860ec1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d833b4dd-7b6e-44f4-bbcf-bd7488836790&quot;,&quot;title&quot;:&quot;getUserComments Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\commentController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\commentController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations getUserComments Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sort: \&quot;New\&quot;,\n    limit: -1,\n    page: -1,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (me, user) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {\n  getUserComments: async (userid, sorttype) =&gt; {\n    let posts = [\n      {\n        _id: \&quot;1\&quot;,\n      },\n    ];\n    return posts;\n  },\n};\nconst commentController = new CommentController({ CommentService, UserService });\nawait commentController.getUserComments(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;1\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e2cd12-9481-44c3-af6d-f136bed0f22b&quot;,&quot;parentUUID&quot;:&quot;d833b4dd-7b6e-44f4-bbcf-bd7488836790&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations getUserComments Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  checkBlockStatus: async (me, user) =&gt; {\n    return false;\n  },\n};\nconst CommentService = {};\nconst commentController = new CommentController({ CommentService, UserService });\nawait commentController.getUserComments(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb86bd9a-9d21-4539-b118-88758b807b66&quot;,&quot;parentUUID&quot;:&quot;d833b4dd-7b6e-44f4-bbcf-bd7488836790&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Comment Controller CRUD operations getUserComments Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (me, user) =&gt; {\n    return true;\n  },\n};\nconst CommentService = {};\nconst commentController = new CommentController({ CommentService, UserService });\nawait commentController.getUserComments(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e2cff2a-8280-4e61-94ff-69a0013fcdfd&quot;,&quot;parentUUID&quot;:&quot;d833b4dd-7b6e-44f4-bbcf-bd7488836790&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57e2cd12-9481-44c3-af6d-f136bed0f22b&quot;,&quot;bb86bd9a-9d21-4539-b118-88758b807b66&quot;,&quot;9e2cff2a-8280-4e61-94ff-69a0013fcdfd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;82e887cf-c019-46e7-bdbf-e964b42da7c4&quot;,&quot;title&quot;:&quot;file Controller Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\fileController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\fileController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;caa60284-0c78-4b83-a34c-bf1f1e2b0607&quot;,&quot;title&quot;:&quot;uploadUserImage Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\fileController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\fileController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;file Controller Test uploadUserImage Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var file;\nfile = fs.readFileSync(`${__dirname}/default.png`);\nconst req = {\n  body: {\n    type: \&quot;profileBackground\&quot;,\n  },\n  user: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  file: {\n    buffer: file,\n  },\n};\nconst UserService = {\n  addUserImageURL: async () =&gt; {\n    return {\n      _id: \&quot;\&quot;,\n      userName: \&quot;\&quot;,\n      email: \&quot;\&quot;,\n      profilePicture: \&quot;\&quot;,\n      profileBackground: \&quot;\&quot;,\n      canbeFollowed: \&quot;\&quot;,\n      lastUpdatedPassword: \&quot;\&quot;,\n      followersCount: \&quot;\&quot;,\n      friendsCount: \&quot;\&quot;,\n      accountActivated: \&quot;\&quot;,\n      gender: \&quot;\&quot;,\n      displayName: \&quot;\&quot;,\n      postKarma: \&quot;\&quot;,\n      commentKarma: \&quot;\&quot;,\n      createdAt: \&quot;\&quot;,\n      joinDate: \&quot;\&quot;,\n      description: \&quot;\&quot;,\n      adultContent: \&quot;\&quot;,\n      nsfw: \&quot;\&quot;,\n    };\n  },\n};\nconst fileController = new FileController({ UserService });\nawait fileController.uploadUserImage(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);\nexpect(res.status(201).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  user: {\n    _id: \&quot;\&quot;,\n    userName: \&quot;\&quot;,\n    email: \&quot;\&quot;,\n    profilePicture: \&quot;\&quot;,\n    profileBackground: \&quot;\&quot;,\n    canbeFollowed: \&quot;\&quot;,\n    lastUpdatedPassword: \&quot;\&quot;,\n    followersCount: \&quot;\&quot;,\n    friendsCount: \&quot;\&quot;,\n    accountActivated: \&quot;\&quot;,\n    gender: \&quot;\&quot;,\n    displayName: \&quot;\&quot;,\n    postKarma: \&quot;\&quot;,\n    commentKarma: \&quot;\&quot;,\n    createdAt: \&quot;\&quot;,\n    description: \&quot;\&quot;,\n    adultContent: \&quot;\&quot;,\n    nsfw: \&quot;\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;138b7412-1f25-42b1-8e59-4c3814e9a0df&quot;,&quot;parentUUID&quot;:&quot;caa60284-0c78-4b83-a34c-bf1f1e2b0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;file Controller Test uploadUserImage Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var file;\nfile = fs.readFileSync(`${__dirname}/default.png`);\nconst req = {\n  body: {\n    type: \&quot;\&quot;,\n  },\n  user: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  file: {\n    buffer: file,\n  },\n};\nconst UserService = {\n  addUserImageURL: async () =&gt; {\n    return {\n      _id: \&quot;\&quot;,\n      userName: \&quot;\&quot;,\n      email: \&quot;\&quot;,\n      profilePicture: \&quot;\&quot;,\n      profileBackground: \&quot;\&quot;,\n      canbeFollowed: \&quot;\&quot;,\n      lastUpdatedPassword: \&quot;\&quot;,\n      followersCount: \&quot;\&quot;,\n      friendsCount: \&quot;\&quot;,\n      accountActivated: \&quot;\&quot;,\n      gender: \&quot;\&quot;,\n      displayName: \&quot;\&quot;,\n      postKarma: \&quot;\&quot;,\n      commentKarma: \&quot;\&quot;,\n      createdAt: \&quot;\&quot;,\n      joinDate: \&quot;\&quot;,\n      description: \&quot;\&quot;,\n      adultContent: \&quot;\&quot;,\n      nsfw: \&quot;\&quot;,\n    };\n  },\n};\nconst fileController = new FileController({ UserService });\nawait fileController.uploadUserImage(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Please provide correct type of image you want to save\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8760880-1179-4b81-a5f0-395b52c5d281&quot;,&quot;parentUUID&quot;:&quot;caa60284-0c78-4b83-a34c-bf1f1e2b0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;138b7412-1f25-42b1-8e59-4c3814e9a0df&quot;,&quot;c8760880-1179-4b81-a5f0-395b52c5d281&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d054efd3-20bc-4b72-9cb8-b4eddbef732b&quot;,&quot;title&quot;:&quot;multerFilter Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\fileController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\fileController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;file Controller Test multerFilter Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {};\nconst file = {\n  mimetype: {\n    startsWith: (type) =&gt; {\n      return true;\n    },\n  },\n};\nlet cb = sinon.spy();\nconst fileController = new FileController({});\nawait fileController.multerFilter(req, file, cb);\nexpect(cb).to.have.been.calledWith(null, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e7b18d2-6ee4-4674-9a23-18ef6b1d1275&quot;,&quot;parentUUID&quot;:&quot;d054efd3-20bc-4b72-9cb8-b4eddbef732b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;file Controller Test multerFilter Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {};\nconst file = {\n  mimetype: {\n    startsWith: (type) =&gt; {\n      return false;\n    },\n  },\n};\nlet cb = sinon.spy();\nconst fileController = new FileController({});\nawait fileController.multerFilter(req, file, cb);\nexpect(cb).to.have.been.calledWith(\&quot;error\&quot;, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78789d24-a67b-4448-8bae-74f0bca523ab&quot;,&quot;parentUUID&quot;:&quot;d054efd3-20bc-4b72-9cb8-b4eddbef732b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e7b18d2-6ee4-4674-9a23-18ef6b1d1275&quot;,&quot;78789d24-a67b-4448-8bae-74f0bca523ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;21fa86d1-a9b6-46be-a79b-0d19029d6e2b&quot;,&quot;title&quot;:&quot;multerFilter Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\fileController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\fileController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;file Controller Test multerFilter Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {};\nconst file = {\n  mimetype: {\n    startsWith: (type) =&gt; {\n      return true;\n    },\n  },\n};\nlet cb = sinon.spy();\nconst fileController = new FileController({});\nawait fileController.getUpload();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99162281-30ee-4540-be45-7756d5378545&quot;,&quot;parentUUID&quot;:&quot;21fa86d1-a9b6-46be-a79b-0d19029d6e2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99162281-30ee-4540-be45-7756d5378545&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a98ad334-569d-4b71-8d5f-9e7fd71d9b25&quot;,&quot;title&quot;:&quot;flair test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;716e7e01-8e45-4527-8380-a2f445415066&quot;,&quot;title&quot;:&quot;get flairs test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;flair test get flairs test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    }\n};\nconst subredditService = {\n    getFlairs: async (subredditName) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text: \&quot;first flair\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.getFlairs(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n        text: \&quot;first flair\&quot;\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a8b191a-ccba-4135-8355-b783c847b3b1&quot;,&quot;parentUUID&quot;:&quot;716e7e01-8e45-4527-8380-a2f445415066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;flair test get flairs test 2) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    }\n};\nconst subredditService = {\n    getFlairs: async (subredditName) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.SUBREDDIT_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.getFlairs(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Subreddit not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd2cd63a-d2a1-47f2-9f32-88d195bf2672&quot;,&quot;parentUUID&quot;:&quot;716e7e01-8e45-4527-8380-a2f445415066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test missing input&quot;,&quot;fullTitle&quot;:&quot;flair test get flairs test 3) test missing input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n    }\n};\n\nconst on = {};\nconst subredditObj = new subreddit({ on, on });\nawait subredditObj.getFlairs(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Missing required parameter\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;556a1ded-fd6e-4cc0-b1f1-1ea8f82f1d86&quot;,&quot;parentUUID&quot;:&quot;716e7e01-8e45-4527-8380-a2f445415066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a8b191a-ccba-4135-8355-b783c847b3b1&quot;,&quot;fd2cd63a-d2a1-47f2-9f32-88d195bf2672&quot;,&quot;556a1ded-fd6e-4cc0-b1f1-1ea8f82f1d86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;48302c20-0a39-4e2a-a000-25e92859c7e8&quot;,&quot;title&quot;:&quot;get flair test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;flair test get flair test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    }\n};\nconst subredditService = {\n    getFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text: \&quot;first flair\&quot;\n            }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.getFlair(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: {\n       _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text: \&quot;first flair\&quot;\n    }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bb947ee-fbeb-4ffc-8533-bf351f48e101&quot;,&quot;parentUUID&quot;:&quot;48302c20-0a39-4e2a-a000-25e92859c7e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;flair test get flair test 2) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    }\n};\nconst subredditService = {\n    getFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.SUBREDDIT_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.getFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Subreddit not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1bd036f-0b04-459c-b776-c7712716a7d3&quot;,&quot;parentUUID&quot;:&quot;48302c20-0a39-4e2a-a000-25e92859c7e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test flair not found&quot;,&quot;fullTitle&quot;:&quot;flair test get flair test 3) test flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    }\n};\nconst subredditService = {\n    getFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.FLAIR_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.getFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Flair not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e04be4cb-71b3-45d9-a6b6-60a84945faf6&quot;,&quot;parentUUID&quot;:&quot;48302c20-0a39-4e2a-a000-25e92859c7e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test missing input&quot;,&quot;fullTitle&quot;:&quot;flair test get flair test 4) test missing input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n    }\n};\n\nconst on = {};\nconst subredditObj = new subreddit({ on, on });\nawait subredditObj.getFlair(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Missing required parameter\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14990248-56b9-4eab-afb2-4daf1c6da3d9&quot;,&quot;parentUUID&quot;:&quot;48302c20-0a39-4e2a-a000-25e92859c7e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bb947ee-fbeb-4ffc-8533-bf351f48e101&quot;,&quot;b1bd036f-0b04-459c-b776-c7712716a7d3&quot;,&quot;e04be4cb-71b3-45d9-a6b6-60a84945faf6&quot;,&quot;14990248-56b9-4eab-afb2-4daf1c6da3d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;title&quot;:&quot;delete flair test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;flair test delete flair test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    deleteFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: true,\n           \n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.deleteFlair(req, res);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6634694-df40-4333-ac53-af9abed064ac&quot;,&quot;parentUUID&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test not moderator&quot;,&quot;fullTitle&quot;:&quot;flair test delete flair test 2) test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    deleteFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n           error :subredditErrors.NOT_MODERATOR\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.deleteFlair(req, res);\nexpect(res.status).to.have.been.calledWith(403);\nexpect(res.status(403).json).to.have.been.calledWith({\n    status :\&quot;Forbidden\&quot;,\n    message :\&quot;Not a subreddit moderator\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e910e3ef-8ba0-4c6b-9e50-4905d94dfff6&quot;,&quot;parentUUID&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;flair test delete flair test 3) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    deleteFlair: async (subredditName) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.SUBREDDIT_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.deleteFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Subreddit not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f2f991b-2ddc-413e-979e-87dbe716cb07&quot;,&quot;parentUUID&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test flair not found&quot;,&quot;fullTitle&quot;:&quot;flair test delete flair test 4) test flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    deleteFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.FLAIR_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.deleteFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Flair not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;291ac62a-18ff-4a9a-8c97-7e86168bf4c0&quot;,&quot;parentUUID&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test missing input&quot;,&quot;fullTitle&quot;:&quot;flair test delete flair test 5) test missing input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\n\nconst on = {};\nconst subredditObj = new subreddit({ on, on });\nawait subredditObj.deleteFlair(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Missing required parameter\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e53a788-0c31-41ec-9237-df4bacfc498e&quot;,&quot;parentUUID&quot;:&quot;186a8313-20a6-4db4-9c82-4f498459ee39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6634694-df40-4333-ac53-af9abed064ac&quot;,&quot;e910e3ef-8ba0-4c6b-9e50-4905d94dfff6&quot;,&quot;3f2f991b-2ddc-413e-979e-87dbe716cb07&quot;,&quot;291ac62a-18ff-4a9a-8c97-7e86168bf4c0&quot;,&quot;8e53a788-0c31-41ec-9237-df4bacfc498e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;title&quot;:&quot;update flair test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;flair test update flair test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    },\n    body: {\n         text:\&quot;new text\&quot;\n     }\n};\nconst subredditService = {\n    updateFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text:\&quot;new text\&quot;\n           }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: {\n       _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text:\&quot;new text\&quot;\n    }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69a854ea-7ad9-4389-85e0-7f2c160c2a6b&quot;,&quot;parentUUID&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test not moderator&quot;,&quot;fullTitle&quot;:&quot;flair test update flair test 2) test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    updateFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n           error :subredditErrors.NOT_MODERATOR\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(403);\nexpect(res.status(403).json).to.have.been.calledWith({\n    status :\&quot;Forbidden\&quot;,\n    message :\&quot;Not a subreddit moderator\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c24c201-aca1-455f-b352-767ca9d3e7e6&quot;,&quot;parentUUID&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;flair test update flair test 3) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    updateFlair: async (subredditName) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.SUBREDDIT_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Subreddit not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45bc67da-f44f-4536-9cbb-aae16df2dfdf&quot;,&quot;parentUUID&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test flair not found&quot;,&quot;fullTitle&quot;:&quot;flair test update flair test 4) test flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\nconst subredditService = {\n    updateFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.FLAIR_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Flair not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07e40aa6-a922-4e96-893a-ae98ffa2c4b6&quot;,&quot;parentUUID&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test missing input&quot;,&quot;fullTitle&quot;:&quot;flair test update flair test 5) test missing input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n    },\n      user :{\n        _id:\&quot; \&quot;\n    }\n};\n\nconst on = {};\nconst subredditObj = new subreddit({ on, on });\nawait subredditObj.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Missing required parameter\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cf5529c-d641-4a9a-95af-9b181b299e41&quot;,&quot;parentUUID&quot;:&quot;6410e3d7-161e-44ec-8692-0eb6436259c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69a854ea-7ad9-4389-85e0-7f2c160c2a6b&quot;,&quot;5c24c201-aca1-455f-b352-767ca9d3e7e6&quot;,&quot;45bc67da-f44f-4536-9cbb-aae16df2dfdf&quot;,&quot;07e40aa6-a922-4e96-893a-ae98ffa2c4b6&quot;,&quot;0cf5529c-d641-4a9a-95af-9b181b299e41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;title&quot;:&quot;create flair test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\flairControllerTest.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\flairControllerTest.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;flair test create flair test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n         \n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    },\n    body: {\n         text:\&quot;new text\&quot;\n     }\n};\nconst subredditService = {\n    createFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text:\&quot;new text\&quot;\n           }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.createFlair(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: {\n       _id: \&quot;638bed1001f496d7284c2832\&quot;,\n                text:\&quot;new text\&quot;\n    }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bdd27df-7981-46c9-ac6f-344d3fe188bf&quot;,&quot;parentUUID&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test not moderator&quot;,&quot;fullTitle&quot;:&quot;flair test create flair test 2) test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        \n        subredditName: \&quot;Nonlegit\&quot;\n    },\n     user :{\n        _id:\&quot; \&quot;\n    },\n    body: {\n         text:\&quot;hello\&quot;\n     }\n};\nconst subredditService = {\n    createFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n           error :subredditErrors.NOT_MODERATOR\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.createFlair(req, res);\nexpect(res.status).to.have.been.calledWith(403);\nexpect(res.status(403).json).to.have.been.calledWith({\n    status :\&quot;Forbidden\&quot;,\n    message :\&quot;Not a subreddit moderator\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4aee454-9fed-4bf5-9b9d-cf9f1c9ba5f1&quot;,&quot;parentUUID&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;flair test create flair test 3) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n        \n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    },\n       body: {\n         text:\&quot;hello\&quot;\n     }\n};\nconst subredditService = {\n    createFlair: async (subredditName) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.SUBREDDIT_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.createFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Subreddit not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bece606-fda8-42aa-bf97-ee469f5f53b4&quot;,&quot;parentUUID&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test flair not found&quot;,&quot;fullTitle&quot;:&quot;flair test create flair test 4) test flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n        subredditName: \&quot;Nonlegit\&quot;\n    },\n      user :{\n        _id:\&quot; \&quot;\n    },\n       body: {\n         text:\&quot;hello\&quot;\n     }\n};\nconst subredditService = {\n    createFlair: async (subredditName,flairId) =&gt; {\n        const response = {\n            success: false,\n            error: subredditErrors.FLAIR_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst subredditObj = new subreddit({ subredditService, on });\nawait subredditObj.createFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\n    message: \&quot;Flair not found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;295d4089-ee2c-4c99-9155-c107e0c5e880&quot;,&quot;parentUUID&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test missing input&quot;,&quot;fullTitle&quot;:&quot;flair test create flair test 5) test missing input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    params: {\n       \n    },\n      user :{\n        _id:\&quot; \&quot;\n    },\n       body: {\n         text:\&quot;hello\&quot;\n     }\n};\n\nconst on = {};\nconst subredditObj = new subreddit({ on, on });\nawait subredditObj.createFlair(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Missing required parameter\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c76fbe35-c4f9-4af5-9f68-bbd7002bae07&quot;,&quot;parentUUID&quot;:&quot;5dd91078-29af-4644-a355-014d2e9e7451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bdd27df-7981-46c9-ac6f-344d3fe188bf&quot;,&quot;e4aee454-9fed-4bf5-9b9d-cf9f1c9ba5f1&quot;,&quot;4bece606-fda8-42aa-bf97-ee469f5f53b4&quot;,&quot;295d4089-ee2c-4c99-9155-c107e0c5e880&quot;,&quot;c76fbe35-c4f9-4af5-9f68-bbd7002bae07&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;645aa29a-97bc-47d6-927b-715b02c12d8b&quot;,&quot;title&quot;:&quot;message test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;74e0e00b-9059-4b39-a29e-fb4d4550394a&quot;,&quot;title&quot;:&quot;get messages test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test get messages test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getMessages: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getMessages(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73d95e7b-2f6c-46e7-90c3-8f7a7809dd17&quot;,&quot;parentUUID&quot;:&quot;74e0e00b-9059-4b39-a29e-fb4d4550394a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test get messages test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    getMessages: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getMessages(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e53cfc93-9647-48f8-90e8-4186e5ebb7e7&quot;,&quot;parentUUID&quot;:&quot;74e0e00b-9059-4b39-a29e-fb4d4550394a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test get messages test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getMessages: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getMessages(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n  expect(res.status(500).json).to.have.been.calledWith({\n   status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18c3dd9a-340d-4108-a1ba-da710027e63c&quot;,&quot;parentUUID&quot;:&quot;74e0e00b-9059-4b39-a29e-fb4d4550394a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73d95e7b-2f6c-46e7-90c3-8f7a7809dd17&quot;,&quot;e53cfc93-9647-48f8-90e8-4186e5ebb7e7&quot;,&quot;18c3dd9a-340d-4108-a1ba-da710027e63c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d0d9f518-8eff-4844-a3b5-cde683b11335&quot;,&quot;title&quot;:&quot;get all messages test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test get all messages test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getAllMessages: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getAllMessages(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a759e24-15b4-422b-97cf-23d18d098bdf&quot;,&quot;parentUUID&quot;:&quot;d0d9f518-8eff-4844-a3b5-cde683b11335&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test get all messages test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    getAllMessages: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getAllMessages(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44edf80e-3ec8-4016-b5a9-d65609292aca&quot;,&quot;parentUUID&quot;:&quot;d0d9f518-8eff-4844-a3b5-cde683b11335&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test get all messages test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getAllMessages: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getAllMessages(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n  expect(res.status(500).json).to.have.been.calledWith({\n   status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f01e4f3-2a9c-4255-8385-bd382a0671cc&quot;,&quot;parentUUID&quot;:&quot;d0d9f518-8eff-4844-a3b5-cde683b11335&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a759e24-15b4-422b-97cf-23d18d098bdf&quot;,&quot;44edf80e-3ec8-4016-b5a9-d65609292aca&quot;,&quot;9f01e4f3-2a9c-4255-8385-bd382a0671cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;bbf24ff2-1f4e-4d4c-8bf3-42fa8bcc611c&quot;,&quot;title&quot;:&quot;get sent test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test get sent test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getSentMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getSentMessage(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f95bedee-84aa-4a9e-94e3-c7f3414d3c9f&quot;,&quot;parentUUID&quot;:&quot;bbf24ff2-1f4e-4d4c-8bf3-42fa8bcc611c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test get sent test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    getSentMessage: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getSentMessage(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;572918ce-29fd-46a3-8d51-e810039aa43e&quot;,&quot;parentUUID&quot;:&quot;bbf24ff2-1f4e-4d4c-8bf3-42fa8bcc611c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test get sent test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getSentMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getSentMessage(req, res);\nexpect(res.status).to.have.been.calledWith(200);\n expect(res.status(500).json).to.have.been.calledWith({\n   status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c69e4587-8018-4275-a56a-570bea0e7dbc&quot;,&quot;parentUUID&quot;:&quot;bbf24ff2-1f4e-4d4c-8bf3-42fa8bcc611c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f95bedee-84aa-4a9e-94e3-c7f3414d3c9f&quot;,&quot;572918ce-29fd-46a3-8d51-e810039aa43e&quot;,&quot;c69e4587-8018-4275-a56a-570bea0e7dbc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;72b7bf35-ab62-43e9-bf3d-4f6579754203&quot;,&quot;title&quot;:&quot;get unread test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test get unread test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getUnreadMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getUnreadMessage(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0f2d722-70a9-4b79-97b7-61c8de76cfa0&quot;,&quot;parentUUID&quot;:&quot;72b7bf35-ab62-43e9-bf3d-4f6579754203&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test get unread test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    getUnreadMessage: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getUnreadMessage(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf946bf2-015b-4d59-beb9-53b5be858162&quot;,&quot;parentUUID&quot;:&quot;72b7bf35-ab62-43e9-bf3d-4f6579754203&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test get unread test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getUnreadMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getUnreadMessage(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n\n  expect(res.status(500).json).to.have.been.calledWith({\n   status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4efa1f41-49a3-4ab8-8558-3b833f63dbba&quot;,&quot;parentUUID&quot;:&quot;72b7bf35-ab62-43e9-bf3d-4f6579754203&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0f2d722-70a9-4b79-97b7-61c8de76cfa0&quot;,&quot;bf946bf2-015b-4d59-beb9-53b5be858162&quot;,&quot;4efa1f41-49a3-4ab8-8558-3b833f63dbba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;bad66903-e254-40e2-90e8-734301d4365f&quot;,&quot;title&quot;:&quot;get post replies test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test get post replies test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getPostReplies: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getPostReplies(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77b1cb47-abec-4ab5-a090-8591c934a433&quot;,&quot;parentUUID&quot;:&quot;bad66903-e254-40e2-90e8-734301d4365f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test get post replies test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    getPostReplies: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getPostReplies(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4418104b-0f52-4544-b691-86aab8742358&quot;,&quot;parentUUID&quot;:&quot;bad66903-e254-40e2-90e8-734301d4365f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test get post replies test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: { _id: \&quot;125\&quot; }              \n};\nconst MessageService = {\n    getPostReplies: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.getPostReplies(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n   status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9abe922-a96a-499d-a638-2596bf723d3c&quot;,&quot;parentUUID&quot;:&quot;bad66903-e254-40e2-90e8-734301d4365f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77b1cb47-abec-4ab5-a090-8591c934a433&quot;,&quot;4418104b-0f52-4544-b691-86aab8742358&quot;,&quot;a9abe922-a96a-499d-a638-2596bf723d3c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fd2ee420-5f69-448f-bd95-8fc57a165244&quot;,&quot;title&quot;:&quot;mark all as read test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test mark all as read test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n};\nconst MessageService = {\n    markAllAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.markAllAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(201);\n          expect(res.status(201).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e0fe364-a15a-4a54-8db0-56213706983f&quot;,&quot;parentUUID&quot;:&quot;fd2ee420-5f69-448f-bd95-8fc57a165244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;message test mark all as read test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    markAllAsRead: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.markAllAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2b36ca0-735c-4dc5-b6ff-554e454d595f&quot;,&quot;parentUUID&quot;:&quot;fd2ee420-5f69-448f-bd95-8fc57a165244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test mark all as read test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n};\nconst MessageService = {\n    markAllAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.markAllAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n expect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;\n          });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c1e3dc5-ae98-4f6f-8626-fa711c7abe8f&quot;,&quot;parentUUID&quot;:&quot;fd2ee420-5f69-448f-bd95-8fc57a165244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e0fe364-a15a-4a54-8db0-56213706983f&quot;,&quot;f2b36ca0-735c-4dc5-b6ff-554e454d595f&quot;,&quot;4c1e3dc5-ae98-4f6f-8626-fa711c7abe8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3ff912c5-f4f5-4c8f-b524-92e19a3ef4fd&quot;,&quot;title&quot;:&quot;delete one message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test delete one message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      messageId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    deleteMessage: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.deleteMessage(req, res);\n          expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f452a0f3-51ae-4b6d-bdc8-07c26898e431&quot;,&quot;parentUUID&quot;:&quot;3ff912c5-f4f5-4c8f-b524-92e19a3ef4fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure not found&quot;,&quot;fullTitle&quot;:&quot;message test delete one message 2) test failure not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n params: {\n     messageId:\&quot;123\&quot;\n   },\n       // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n       user: { _id: \&quot;125\&quot; }\n   \n            };\n            const MessageService = {\n   deleteMessage: async (id) =&gt; {\n       const response = {\n         success: false,\n         error:messageErrors.MESSAGE_NOT_FOUND\n       }\n       return response;\n   }\n            };\n            const on = {};\n            const messageObj = new message({ on, MessageService });\n            await messageObj.deleteMessage(req, res);\n            expect(res.status).to.have.been.calledWith(404);\n            expect(res.status(404).json).to.have.been.calledWith({\n   message : \&quot;Message not found\&quot;,\n   status : \&quot;Not Found\&quot;\n            })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be51cdd7-7dea-4e2b-8678-18bde9578cab&quot;,&quot;parentUUID&quot;:&quot;3ff912c5-f4f5-4c8f-b524-92e19a3ef4fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test failure internal&quot;,&quot;fullTitle&quot;:&quot;message test delete one message 3) test failure internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n params: {\n     messageId:\&quot;123\&quot;\n   },\n       // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n       user: { _id: \&quot;125\&quot; }\n   \n            };\n            const MessageService = {\n   deleteMessage: async (id) =&gt; {\n       const response = {\n         success: false,\n         error: messageErrors.MONGO_ERR\n       }\n       return response;\n   }\n            };\n            const on = {};\n            const messageObj = new message({ on, MessageService });\n            await messageObj.deleteMessage(req, res);\n            expect(res.status).to.have.been.calledWith(500);\n            expect(res.status(500).json).to.have.been.calledWith({\n    message : \&quot;Internal server error\&quot;, \n    status : \&quot;Internal Server Error\&quot;\n            })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2311d85b-0c55-43f9-99a1-2f56f9736e57&quot;,&quot;parentUUID&quot;:&quot;3ff912c5-f4f5-4c8f-b524-92e19a3ef4fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test delete one message 4) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      messageId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst MessageService = {\n    deleteMessage: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.deleteMessage(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n      status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7026de73-70ba-4f3c-8c9a-6e14698a04ad&quot;,&quot;parentUUID&quot;:&quot;3ff912c5-f4f5-4c8f-b524-92e19a3ef4fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f452a0f3-51ae-4b6d-bdc8-07c26898e431&quot;,&quot;be51cdd7-7dea-4e2b-8678-18bde9578cab&quot;,&quot;2311d85b-0c55-43f9-99a1-2f56f9736e57&quot;,&quot;7026de73-70ba-4f3c-8c9a-6e14698a04ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;title&quot;:&quot;mod message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test mod message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    messageObject: {\n        text: \&quot;hi\&quot;,\n        to:\&quot;12\&quot;\n    }\n };\nconst MessageService = {\n    modMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.modMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8c56507-1155-4f98-8ed1-b7e16884a179&quot;,&quot;parentUUID&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail no message object&quot;,&quot;fullTitle&quot;:&quot;message test mod message 2) test fail no message object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {};\nconst MessageService = {};\nconst NotificationService = {};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.modMessage(req, res);\nexpect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d10d39d4-6c73-4241-8c83-9049b4c9d905&quot;,&quot;parentUUID&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3)test fail in mod message&quot;,&quot;fullTitle&quot;:&quot;message test mod message 3)test fail in mod message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    messageObject: {\n        text: \&quot;hi\&quot;,\n        to:\&quot;12\&quot;\n    }\n };\nconst MessageService = {\n    modMessage: async (id) =&gt; {\n        const response = {\n            success: false\n        }\n        return response;\n    }\n};\n\nconst on = {};\nconst messageObj = new message({ on, MessageService});\nawait messageObj.modMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;332419c5-f8f0-441e-8fd1-263d0f6ab2bc&quot;,&quot;parentUUID&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail in firebase&quot;,&quot;fullTitle&quot;:&quot;message test mod message 4) test fail in firebase&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    messageObject: {\n        text: \&quot;hi\&quot;,\n        to:\&quot;12\&quot;\n    }\n };\nconst MessageService = {\n    modMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.modMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b9e4739-bee8-4bb3-a2e1-98de7309bea8&quot;,&quot;parentUUID&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test mod message 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    messageObject: {\n        text: \&quot;hi\&quot;,\n        to:\&quot;12\&quot;\n    }\n };\nconst MessageService = {\n    modMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.modMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c423e3e-d23f-418a-b89e-0aa005b14b12&quot;,&quot;parentUUID&quot;:&quot;65af90a3-cf08-48d3-9fb3-0fd534f4059a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8c56507-1155-4f98-8ed1-b7e16884a179&quot;,&quot;d10d39d4-6c73-4241-8c83-9049b4c9d905&quot;,&quot;332419c5-f8f0-441e-8fd1-263d0f6ab2bc&quot;,&quot;6b9e4739-bee8-4bb3-a2e1-98de7309bea8&quot;,&quot;7c423e3e-d23f-418a-b89e-0aa005b14b12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;2258ef1c-fe13-4ba2-9e27-88d49fd465ba&quot;,&quot;title&quot;:&quot;create reply message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test create reply message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n    post: {},\n    mentions:{}\n };\nconst MessageService = {\n    createReplyMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n \nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.createReplyMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9f97a25-209d-44fc-a102-ccbb9aee8ab3&quot;,&quot;parentUUID&quot;:&quot;2258ef1c-fe13-4ba2-9e27-88d49fd465ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;message test create reply message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {};\n\n \nconst on = {};\nconst messageObj = new message({ on, on });\nawait messageObj.createReplyMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b3c4927-3cb6-41a3-9410-090749cd09e5&quot;,&quot;parentUUID&quot;:&quot;2258ef1c-fe13-4ba2-9e27-88d49fd465ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail&quot;,&quot;fullTitle&quot;:&quot;message test create reply message 3) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {user: {},\n    comment: {},\n    post: {}};\n\n \nconst on = {};\nconst messageObj = new message({ on, on });\nawait messageObj.createReplyMessage(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24c48166-cb62-46d6-bab8-2cd8479cee2e&quot;,&quot;parentUUID&quot;:&quot;2258ef1c-fe13-4ba2-9e27-88d49fd465ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test exception&quot;,&quot;fullTitle&quot;:&quot;message test create reply message 4) test exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n    post: {},\n    mentions:{}\n };\nconst MessageService = {\n    createReplyMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        //return response;\n    }\n};\n \nconst on = {};\nconst messageObj = new message({ on, MessageService });\nawait messageObj.createReplyMessage(req, res);\n          //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ca7b7b1-cb6b-4665-93dd-812e5cfd3b55&quot;,&quot;parentUUID&quot;:&quot;2258ef1c-fe13-4ba2-9e27-88d49fd465ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9f97a25-209d-44fc-a102-ccbb9aee8ab3&quot;,&quot;6b3c4927-3cb6-41a3-9410-090749cd09e5&quot;,&quot;24c48166-cb62-46d6-bab8-2cd8479cee2e&quot;,&quot;3ca7b7b1-cb6b-4665-93dd-812e5cfd3b55&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;title&quot;:&quot;reply&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test reply 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot;\&quot;\n    },\n    body: {\n        text:\&quot;\&quot;\n    },\n    params: {\n        parentMessageId:\&quot;\&quot;\n    }\n };\nconst MessageService = {\n    reply: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;facb30d4-1a76-4690-8b16-5bb70df3d640&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 2) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {};\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec8dc26d-c462-4d3b-ad44-913e5f406310&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) message to reply on not found&quot;,&quot;fullTitle&quot;:&quot;message test reply 3) message to reply on not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\n   const req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text:\&quot; \&quot;\n    },\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    reply: async (id) =&gt; {\n        const response = {\n            success: false,\n            error:messageErrors.MESSAGE_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService});\nawait messageObj.reply(req, res);\n   expect(res.status).to.have.been.calledWith(404);\n    expect(res.status(404).json).to.have.been.calledWith({\n    status: \&quot;Not Found\&quot;,\nmessage: \&quot;Message Not Found\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598fae5c-1c26-489a-8bf9-8aa45487053d&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) message to reply on not found&quot;,&quot;fullTitle&quot;:&quot;message test reply 4) message to reply on not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\n   const req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text:\&quot; \&quot;\n    },\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    reply: async (id) =&gt; {\n        const response = {\n            success: false,\n            error:messageErrors.MESSAGE_NOT_FOUND_IN_INBOX\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService});\nawait messageObj.reply(req, res);\n   expect(res.status).to.have.been.calledWith(404);\n    expect(res.status(404).json).to.have.been.calledWith({\nstatus: \&quot;Not Found\&quot;,\nmessage: \&quot;Message Not Found In Your Inbox\&quot;,\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9b530ac-0571-479f-8c6f-5f291c54a856&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) message to reply on not found&quot;,&quot;fullTitle&quot;:&quot;message test reply 5) message to reply on not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\n   const req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text:\&quot; \&quot;\n    },\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    reply: async (id) =&gt; {\n        const response = {\n            success: false,\n          \n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService});\nawait messageObj.reply(req, res);\n   expect(res.status).to.have.been.calledWith(500);\n    expect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;Internal server error\&quot;,\n    message: \&quot;Internal server error\&quot;,\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68a596d8-71ff-4d7f-bc23-29a8a8457b74&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 6) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n    \n    body: {\n        text:\&quot; \&quot;\n    },\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }};\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1cd89f5-b4f4-49bb-b4f2-20986bb22b3b&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 7) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }};\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb362316-96b7-4ec0-98c2-e796e8b20e11&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 8) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n    user: {\n        _id:\&quot; \&quot;\n    },\n  };\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f54a258-f493-4750-8c39-72ea5ca4e1fe&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 9) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n   body: {\n        text:\&quot; \&quot;\n    },\n  };\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dfb737e-fee3-4d46-9acd-1cd408473966&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;10) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 10) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n    user: {\n        _id:\&quot;\&quot;\n    },\n   body: {\n        text:\&quot; \&quot;\n    },\n  };\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae287049-1dcb-473d-8602-8452c9906bc8&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;11) test bad request&quot;,&quot;fullTitle&quot;:&quot;message test reply 11) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req =\n{\n     user: {\n        _id:\&quot; \&quot;\n    },\n    params: {\n        parentMessageId:\&quot; \&quot;\n    }\n  };\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3ccd08e-798c-4c70-ad93-8eaa087a5257&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;12) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test reply 12) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot;\&quot;\n    },\n    body: {\n        text:\&quot;\&quot;\n    },\n    params: {\n        parentMessageId:\&quot;\&quot;\n    }\n };\nconst MessageService = {\n    reply: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\n const NotificationService = {};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.reply(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n expect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;    \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e057a431-2b94-4f86-8fcb-7f05db0da991&quot;,&quot;parentUUID&quot;:&quot;510d7bc2-bab6-4cce-8f29-2e26a16c22b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;facb30d4-1a76-4690-8b16-5bb70df3d640&quot;,&quot;ec8dc26d-c462-4d3b-ad44-913e5f406310&quot;,&quot;598fae5c-1c26-489a-8bf9-8aa45487053d&quot;,&quot;e9b530ac-0571-479f-8c6f-5f291c54a856&quot;,&quot;68a596d8-71ff-4d7f-bc23-29a8a8457b74&quot;,&quot;c1cd89f5-b4f4-49bb-b4f2-20986bb22b3b&quot;,&quot;eb362316-96b7-4ec0-98c2-e796e8b20e11&quot;,&quot;4f54a258-f493-4750-8c39-72ea5ca4e1fe&quot;,&quot;4dfb737e-fee3-4d46-9acd-1cd408473966&quot;,&quot;ae287049-1dcb-473d-8602-8452c9906bc8&quot;,&quot;a3ccd08e-798c-4c70-ad93-8eaa087a5257&quot;,&quot;e057a431-2b94-4f86-8fcb-7f05db0da991&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;title&quot;:&quot;send message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\messageController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\messageController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;message test send message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    createMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n          expect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f3eec35-9ffb-43de-a6fb-00d45d0b3a01&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;message test send message 2) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    \n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {};\n const NotificationService = {};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n          expect(res.status).to.have.been.calledWith(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b213a33b-7da6-4185-8a24-0166f3f3ad5b&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test lenght failed&quot;,&quot;fullTitle&quot;:&quot;message test send message 3) test lenght failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot;11111111111111111111111 \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = { };\n const NotificationService = { };\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n          expect(res.status).to.have.been.calledWith(400);\n           expect(res.status(400).json).to.have.been.calledWith({\nstatus: \&quot;fail\&quot;,\n    message: \&quot;Subject must have less or equal than 100 characters\&quot;,\n          \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3b27e27-66d0-4fb0-bf3e-e1e69ebbebdd&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail user not found&quot;,&quot;fullTitle&quot;:&quot;message test send message 4) test fail user not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    createMessage: async (id) =&gt; {\n        const response = {\n            success: false,\n          error:userErrors.USER_NOT_FOUND\n        }\n        return response;\n    }\n};\n const NotificationService = {};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n     expect(res.status).to.have.been.calledWith(404);\n      expect(res.status(404).json).to.have.been.calledWith({\n           status: \&quot;Not Found\&quot;,\nmessage: \&quot;User Not Found\&quot;,\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;687d9309-9de7-4fa5-88db-8838a433f475&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail internal&quot;,&quot;fullTitle&quot;:&quot;message test send message 5) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    createMessage: async (id) =&gt; {\n        const response = {\n            success: false,\n         \n        }\n        return response;\n    }\n};\n const NotificationService = {};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n     expect(res.status).to.have.been.calledWith(500);\n      expect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;Internal server error\&quot;,\n     message: \&quot;Internal server error\&quot;,\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ad310be-b867-465b-8576-3513cb39b699&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test token &quot;,&quot;fullTitle&quot;:&quot;message test send message 6) test token &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    createMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n         const response = {\n             success: false,\n         }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\n          expect(res.status).to.have.been.calledWith(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95b558a3-b471-459a-8c8c-0f15a520693c&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7) test fail exception&quot;,&quot;fullTitle&quot;:&quot;message test send message 7) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    user: {\n        _id:\&quot; \&quot;\n    },\n    body: {\n        text: \&quot; \&quot;,\n        subject: \&quot; \&quot;,\n        to:\&quot; \&quot;\n    }\n };\nconst MessageService = {\n    createMessage: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n                 to:\&quot;12\&quot;\n            }\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\n const NotificationService = {\n    getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n};\nconst on = {};\nconst messageObj = new message({ on, MessageService,NotificationService });\nawait messageObj.sendMessage(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n expect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;fail\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b9714d0-6bdc-416e-8dbf-d6a4e3b03d77&quot;,&quot;parentUUID&quot;:&quot;c7934939-f3f1-4438-8e20-15e05c6e9e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f3eec35-9ffb-43de-a6fb-00d45d0b3a01&quot;,&quot;b213a33b-7da6-4185-8a24-0166f3f3ad5b&quot;,&quot;a3b27e27-66d0-4fb0-bf3e-e1e69ebbebdd&quot;,&quot;687d9309-9de7-4fa5-88db-8838a433f475&quot;,&quot;0ad310be-b867-465b-8576-3513cb39b699&quot;,&quot;95b558a3-b471-459a-8c8c-0f15a520693c&quot;,&quot;7b9714d0-6bdc-416e-8dbf-d6a4e3b03d77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;75c99dd5-7e63-454a-8c6a-30c8f36d55d1&quot;,&quot;title&quot;:&quot;notification test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;194c89fe-aa1c-478f-8b90-873ea7d9ce20&quot;,&quot;title&quot;:&quot;get notifications test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test get notifications test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    \n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    getAllNotifications: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.getAllNotifications(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(500).json).to.have.been.calledWith({\n    status: \&quot;OK\&quot;,\n    data: [{\n        _id: \&quot;638bed1001f496d7284c2832\&quot;,\n    }]\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29316c5e-7901-459b-9c1b-c9d7cd5e4893&quot;,&quot;parentUUID&quot;:&quot;194c89fe-aa1c-478f-8b90-873ea7d9ce20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;notification test get notifications test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    getAllNotifications: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.getAllNotifications(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;586dd80e-eaec-4bbf-a709-30f52f553500&quot;,&quot;parentUUID&quot;:&quot;194c89fe-aa1c-478f-8b90-873ea7d9ce20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test get notifications test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    \n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    getAllNotifications: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: [{\n                _id: \&quot;638bed1001f496d7284c2832\&quot;\n            }]\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.getAllNotifications(req, res);\nexpect(res.status).to.have.been.calledWith(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c79c74ed-a67e-41b3-b9eb-09f74dcbfc59&quot;,&quot;parentUUID&quot;:&quot;194c89fe-aa1c-478f-8b90-873ea7d9ce20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29316c5e-7901-459b-9c1b-c9d7cd5e4893&quot;,&quot;586dd80e-eaec-4bbf-a709-30f52f553500&quot;,&quot;c79c74ed-a67e-41b3-b9eb-09f74dcbfc59&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4e469038-e823-417f-8a43-b5230464bfa3&quot;,&quot;title&quot;:&quot;mark all as read test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test mark all as read test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    \n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    markAllNotificationsAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.markAllNotificationsAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(201);\n          expect(res.status(201).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ef428f1-30b6-4e6f-bcfd-c3e33d78e031&quot;,&quot;parentUUID&quot;:&quot;4e469038-e823-417f-8a43-b5230464bfa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure&quot;,&quot;fullTitle&quot;:&quot;notification test mark all as read test 2) test failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n    \n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    markAllNotificationsAsRead: async (id) =&gt; {\n        const response = {\n            success: false,\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.markAllNotificationsAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n     status: \&quot;Internal server error\&quot;,\n          message: \&quot;Internal server error\&quot;,\n       \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1b48636-dbd8-46e8-9532-20ea96adae61&quot;,&quot;parentUUID&quot;:&quot;4e469038-e823-417f-8a43-b5230464bfa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test mark all as read test 3) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n    \n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    markAllNotificationsAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.markAllNotificationsAsRead(req, res);\nexpect(res.status).to.have.been.calledWith(500);\n          //expect(res.status(201).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29ce9970-8929-4ffd-af04-0dc5f6cb367e&quot;,&quot;parentUUID&quot;:&quot;4e469038-e823-417f-8a43-b5230464bfa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ef428f1-30b6-4e6f-bcfd-c3e33d78e031&quot;,&quot;a1b48636-dbd8-46e8-9532-20ea96adae61&quot;,&quot;29ce9970-8929-4ffd-af04-0dc5f6cb367e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0a250ca3-f0a3-47a1-a20e-af5ffa8e54f5&quot;,&quot;title&quot;:&quot;mark one notification as read test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test mark one notification as read test 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    markNotificationAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.markNotificationAsRead(req, res);\n          expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be4c91b7-19b5-4a6e-bfc5-57e2317e7040&quot;,&quot;parentUUID&quot;:&quot;0a250ca3-f0a3-47a1-a20e-af5ffa8e54f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure not found&quot;,&quot;fullTitle&quot;:&quot;notification test mark one notification as read test 2) test failure not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n params: {\n     notificationId:\&quot;123\&quot;\n   },\n       // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n       user: { _id: \&quot;125\&quot; }\n   \n            };\n            const NotificationService = {\n   markNotificationAsRead: async (id) =&gt; {\n       const response = {\n         success: false,\n         error:notificationErrors.NOTIFICATION_NOT_FOUND\n       }\n       return response;\n   }\n            };\n            const on = {};\n            const notificationObj = new notification({ on, NotificationService });\n            await notificationObj.markNotificationAsRead(req, res);\n            expect(res.status).to.have.been.calledWith(404);\n            expect(res.status(404).json).to.have.been.calledWith({\n   message : \&quot;Notification not found\&quot;,\n   status : \&quot;Not Found\&quot;\n            })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e971320f-d78c-42da-87fc-aabef72954d8&quot;,&quot;parentUUID&quot;:&quot;0a250ca3-f0a3-47a1-a20e-af5ffa8e54f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test failure internal&quot;,&quot;fullTitle&quot;:&quot;notification test mark one notification as read test 3) test failure internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n params: {\n     notificationId:\&quot;123\&quot;\n   },\n       // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n       user: { _id: \&quot;125\&quot; }\n   \n            };\n            const NotificationService = {\n   markNotificationAsRead: async (id) =&gt; {\n       const response = {\n         success: false,\n         error:notificationErrors.MONGO_ERR\n       }\n       return response;\n   }\n            };\n            const on = {};\n            const notificationObj = new notification({ on, NotificationService });\n            await notificationObj.markNotificationAsRead(req, res);\n            expect(res.status).to.have.been.calledWith(500);\n            expect(res.status(404).json).to.have.been.calledWith({\n    message : \&quot;Internal server error\&quot;,\n            \n            status : \&quot;Internal Server Error\&quot;\n            })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c657002-9c22-4175-b1d4-9b96ed801a83&quot;,&quot;parentUUID&quot;:&quot;0a250ca3-f0a3-47a1-a20e-af5ffa8e54f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test mark one notification as read test 4) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    markNotificationAsRead: async (id) =&gt; {\n        const response = {\n            success: true\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.markNotificationAsRead(req, res);\n          expect(res.status).to.have.been.calledWith(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c432296c-21ce-407a-a2e9-a7b3855adc8d&quot;,&quot;parentUUID&quot;:&quot;0a250ca3-f0a3-47a1-a20e-af5ffa8e54f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be4c91b7-19b5-4a6e-bfc5-57e2317e7040&quot;,&quot;e971320f-d78c-42da-87fc-aabef72954d8&quot;,&quot;8c657002-9c22-4175-b1d4-9b96ed801a83&quot;,&quot;c432296c-21ce-407a-a2e9-a7b3855adc8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;aaec1ae2-fd54-4f74-9334-0cc6459c426d&quot;,&quot;title&quot;:&quot;hide one notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test hide one notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    hideNotification: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.hideNotification(req, res);\n            expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1bfdce7-ee69-4290-96ff-fd2f3ab6c375&quot;,&quot;parentUUID&quot;:&quot;aaec1ae2-fd54-4f74-9334-0cc6459c426d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test failure not found&quot;,&quot;fullTitle&quot;:&quot;notification test hide one notification 2) test failure not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    hideNotification: async (id) =&gt; {\n        const response = {\n          success: false,\n          error:notificationErrors.NOTIFICATION_NOT_FOUND\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.hideNotification(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n    message : \&quot;Notification not found\&quot;,\n    status : \&quot;Not Found\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f69c5a5a-2ead-42c8-a2ea-7ab15ad8c438&quot;,&quot;parentUUID&quot;:&quot;aaec1ae2-fd54-4f74-9334-0cc6459c426d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test failure internal&quot;,&quot;fullTitle&quot;:&quot;notification test hide one notification 3) test failure internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    hideNotification: async (id) =&gt; {\n        const response = {\n          success: false,\n          error:notificationErrors.MONGO_ERR\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.hideNotification(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(404).json).to.have.been.calledWith({\n    message : \&quot;Internal server error\&quot;,\n\nstatus : \&quot;Internal Server Error\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54cf643e-76cd-454f-afee-82277497f4a6&quot;,&quot;parentUUID&quot;:&quot;aaec1ae2-fd54-4f74-9334-0cc6459c426d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test hide one notification 4) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  params: {\n      notificationId:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {\n    hideNotification: async (id) =&gt; {\n        const response = {\n            success: true\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.hideNotification(req, res);\n            expect(res.status).to.have.been.calledWith(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f38cf250-3bdf-41ca-b34c-ef97ee7c6a06&quot;,&quot;parentUUID&quot;:&quot;aaec1ae2-fd54-4f74-9334-0cc6459c426d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1bfdce7-ee69-4290-96ff-fd2f3ab6c375&quot;,&quot;f69c5a5a-2ead-42c8-a2ea-7ab15ad8c438&quot;,&quot;54cf643e-76cd-454f-afee-82277497f4a6&quot;,&quot;f38cf250-3bdf-41ca-b34c-ef97ee7c6a06&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;13f6b8a9-3086-4579-9951-9767c6aea3d4&quot;,&quot;title&quot;:&quot;add firebase token&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test add firebase token 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  body: {\n      token:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst UserService = {\n    saveFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ UserService, on });\nawait notificationObj.addFirebaseToken(req, res);\n            expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9f07b49-a8ad-4df0-8581-7858f51c94e6&quot;,&quot;parentUUID&quot;:&quot;13f6b8a9-3086-4579-9951-9767c6aea3d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test invalid request&quot;,&quot;fullTitle&quot;:&quot;notification test add firebase token 2) test invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    \n    },\n  user: { _id: \&quot;125\&quot; }\n    \n};\nconst NotificationService = {};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFirebaseToken(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n    status: \&quot;fail\&quot;,\n    message: \&quot;Invalid request\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa6ce8c1-25be-46f8-ab85-1942544ba99f&quot;,&quot;parentUUID&quot;:&quot;13f6b8a9-3086-4579-9951-9767c6aea3d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test failure internal&quot;,&quot;fullTitle&quot;:&quot;notification test add firebase token 3) test failure internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n      token:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst UserService = {\n    saveFirebaseToken: async (id) =&gt; {\n        const response = {\n          success: false\n        }\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ UserService,on });\nawait notificationObj.addFirebaseToken(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n    message : \&quot;Internal server error\&quot;,\n     statusCode: 500,\n    status : \&quot;Internal Server Error\&quot;\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b44d241f-5886-45e9-8b85-8ae814cfa279&quot;,&quot;parentUUID&quot;:&quot;13f6b8a9-3086-4579-9951-9767c6aea3d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test add firebase token 4) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  body: {\n      token:\&quot;123\&quot;\n    },\n        // flairId: \&quot;638bed1001f496d7284c2832\&quot;,\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst UserService = {\n    saveFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n};\nconst on = {};\nconst notificationObj = new notification({ UserService, on });\nawait notificationObj.addFirebaseToken(req, res);\n            expect(res.status).to.have.been.calledWith(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27354d92-6453-4c50-bb1a-e61ce4da8642&quot;,&quot;parentUUID&quot;:&quot;13f6b8a9-3086-4579-9951-9767c6aea3d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b9f07b49-a8ad-4df0-8581-7858f51c94e6&quot;,&quot;fa6ce8c1-25be-46f8-ab85-1942544ba99f&quot;,&quot;b44d241f-5886-45e9-8b85-8ae814cfa279&quot;,&quot;27354d92-6453-4c50-bb1a-e61ce4da8642&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;title&quot;:&quot;create reply notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success (postReply)&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 1) test success (postReply)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed71af1a-8f69-4ac9-84ac-050339abfd7e&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success (commentReply)&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 2) test success (commentReply)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;userMention\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6c93d52-e7c6-42a2-914d-a7aac1555b4e&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 3) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},               \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c25f5e85-019c-4abe-9687-a4108fbbd32c&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 4) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    comment: {},             \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2141ff9e-a320-40f5-b89f-eeb2e09b2014&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 5) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n     post: {author:{_id:\&quot; \&quot;}}           \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on,next });\nawait notificationObj.addReplyNotification(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dc2d263-01e1-4c46-98bb-c9837d5e8208&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test fail in reply notification creation&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 6) test fail in reply notification creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: false,\n           \n        }\n        return response;\n  }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;205dafcf-ea1b-40c3-a3f5-e258d5e7b06d&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7) test fail in token &quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 7) test fail in token &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n post: {author:{_id:\&quot; \&quot;}}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: false,\n            \n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0f0e1d6-6a85-4417-a184-d85acc5d12c5&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8) test mention case&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 8) test mention case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}},\n  mentions:{}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: false,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\n       notificationObj.sendMentions = async () =&gt; { return; };\n       await notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20535f92-1bdd-4295-b4c8-25c130f2e915&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 9) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n post: {author:{_id:\&quot; \&quot;}},\n  mentions:{}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: false,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n    }\n    throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n  }\n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\n       notificationObj.sendMentions = async () =&gt; { return; };\n       await notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1728a69d-c4d4-443c-909c-1590a07cc4dc&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;10) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 10) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  comment:{},\n     post: {}            \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;260320aa-e57a-4203-aeca-84f564997642&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;11) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 11) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  user:{},\n     post: {}            \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c72ef2e-16ad-47ac-8f94-deff2e6ad317&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;12) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 12) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  user:{},\n     comment: {}            \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0df39ea-56c4-4526-bc40-7cab2ebe0ff0&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;13) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 13) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n             \n };            \nconst on = {};\nconst notificationObj = new notification({ on, on });\nawait notificationObj.addReplyNotification(req, res);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ed6fde2-3e39-4d07-b171-068c9f212357&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;14) test success not post or comment reply&quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 14) test success not post or comment reply&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c936a2e3-05e8-4272-92fd-46a27b0d2f78&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;15) test fail in token &quot;,&quot;fullTitle&quot;:&quot;notification test create reply notification 15) test fail in token &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n    user: {},\n    comment: {},\n  post: {author:{_id:\&quot; \&quot;}},\n  mentions:{}\n    \n };\nconst NotificationService = {\n    addReplyNotification: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                 text: \&quot;hi\&quot;,\n              to: \&quot;12\&quot;,\n                 type:\&quot;postReply\&quot;\n            }\n        }\n        return response;\n  },\n   getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: false,\n            \n        }\n        return response;\n    }\n  \n};\n \nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\n  notificationObj.sendMentions = async () =&gt; { return; };\nawait notificationObj.addReplyNotification(req, res,next);\n         // expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a5e54e2-d147-4d73-b837-d94f2192f1d2&quot;,&quot;parentUUID&quot;:&quot;6161b9f9-1f1a-4e51-b293-ad7456ca0211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed71af1a-8f69-4ac9-84ac-050339abfd7e&quot;,&quot;b6c93d52-e7c6-42a2-914d-a7aac1555b4e&quot;,&quot;c25f5e85-019c-4abe-9687-a4108fbbd32c&quot;,&quot;2141ff9e-a320-40f5-b89f-eeb2e09b2014&quot;,&quot;9dc2d263-01e1-4c46-98bb-c9837d5e8208&quot;,&quot;205dafcf-ea1b-40c3-a3f5-e258d5e7b06d&quot;,&quot;b0f0e1d6-6a85-4417-a184-d85acc5d12c5&quot;,&quot;20535f92-1bdd-4295-b4c8-25c130f2e915&quot;,&quot;1728a69d-c4d4-443c-909c-1590a07cc4dc&quot;,&quot;260320aa-e57a-4203-aeca-84f564997642&quot;,&quot;1c72ef2e-16ad-47ac-8f94-deff2e6ad317&quot;,&quot;d0df39ea-56c4-4526-bc40-7cab2ebe0ff0&quot;,&quot;3ed6fde2-3e39-4d07-b171-068c9f212357&quot;,&quot;c936a2e3-05e8-4272-92fd-46a27b0d2f78&quot;,&quot;4a5e54e2-d147-4d73-b837-d94f2192f1d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;title&quot;:&quot;add follow notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {\n    addFollowNotification: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    },\n     getFirebaseToken: async (id) =&gt; {\n      const response = {\n          success: true,\n          data: {\n              firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n          }\n      }\n      return response;\n  }\n\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;755cefcc-01fe-43e1-882f-c51c36e33fce&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test bad request&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 2) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  \n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bbeea7f-03e6-4666-93c9-84a0446a3687&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test bad request&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 3) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n    \n};\nconst NotificationService = {};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12d217de-44ee-4667-8691-0b1e58f7408f&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test bad request&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 4) test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {};\nconst NotificationService = {};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69e20a4b-11c4-44e6-ae51-03c253e39193&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail in notification creation&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 5) test fail in notification creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {\n    addFollowNotification: async (id) =&gt; {\n        const response = {\n            success: false\n        }\n        return response;\n    }};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b29df198-ef9e-4723-ad40-1503d943569b&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test fail in getting token&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 6) test fail in getting token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {\n    addFollowNotification: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n    },\n     getFirebaseToken: async (id) =&gt; {\n      const response = {\n          success: false,\n        }\n      return response;\n  }\n\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;413a1bd9-51ed-4faf-afbe-a3c0ecdffff5&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7) test exception&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 7) test exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {\n    addFollowNotification: async (id) =&gt; {\n        const response = {\n            success: true\n        }\nthrow new Error(&#x27;divide by zero!&#x27;);\n        return response;\n        \n    },\n     getFirebaseToken: async (id) =&gt; {\n      const response = {\n          success: true,\n          data: {\n              firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n          }\n      }\n      return response;\n  }\n\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0aecc2b0-0511-4411-bc82-5abb7dc2181a&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8) test exception&quot;,&quot;fullTitle&quot;:&quot;notification test add follow notification 8) test exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const FCM = ()=&gt;{ return \&quot;b\&quot; };\nconst req = {\n  follower: {_id:\&quot;1\&quot;},\n  followed: {_id:\&quot; 2\&quot;  }\n    \n};\nconst NotificationService = {\n    addFollowNotification: async (id) =&gt; {\n        const response = {\n            success: true\n        }\n        return response;\n        \n    },\n     getFirebaseToken: async (id) =&gt; {\n      const response = {\n          success: true,\n          data: {\n              firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n          }\n      }\n      throw new Error(&#x27;divide by zero!&#x27;);\n      return response;\n  }\n\n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.addFollowNotification(req, res);\n            //expect(res.status).to.have.been.calledWith(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;136718b6-7d43-489f-b2a1-13ee82e3869b&quot;,&quot;parentUUID&quot;:&quot;df1015c4-5eb8-4153-a485-9eaee7048d98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;755cefcc-01fe-43e1-882f-c51c36e33fce&quot;,&quot;8bbeea7f-03e6-4666-93c9-84a0446a3687&quot;,&quot;12d217de-44ee-4667-8691-0b1e58f7408f&quot;,&quot;69e20a4b-11c4-44e6-ae51-03c253e39193&quot;,&quot;b29df198-ef9e-4723-ad40-1503d943569b&quot;,&quot;413a1bd9-51ed-4faf-afbe-a3c0ecdffff5&quot;,&quot;0aecc2b0-0511-4411-bc82-5abb7dc2181a&quot;,&quot;136718b6-7d43-489f-b2a1-13ee82e3869b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;title&quot;:&quot;send mentions&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\notificationController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\notificationController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot; \&quot;\n};\n const mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[\n                {}]\n        }\n        return response;\n    },\n      getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;990eee51-b1b8-4c7b-9f8a-8764a08c6757&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test no notifiaction&quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 2) test no notifiaction&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot; \&quot;\n};\n const mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: false,\n           \n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;640f1a75-ffb9-4e61-be44-227216c1707c&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test no notifications existing&quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 3) test no notifications existing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot; \&quot;\n};\n const mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[]\n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fde5b418-68d6-4adf-b03a-3a3b68c5ea26&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test same id and success &quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 4) test same id and success &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot;12\&quot;\n}\nconst mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[\n                {}]\n        }\n        return response;\n    },\n      getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea2ad7b1-2db0-415a-98a6-427d50e1a743&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test defferent id and success &quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 5) test defferent id and success &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot;124\&quot;\n}\nconst mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[\n                {}\n               ]\n        }\n        return response;\n    },\n      getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: true,\n            data: {\n                firebaseToken: \&quot;638bed1001f496d7284c2832\&quot;\n            }\n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;197e67a7-7545-4c3b-b614-564536e68b9a&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test different id and fail&quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 6) test different id and fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot;132\&quot;\n}\nconst mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[\n                {},\n               ]\n        }\n        return response;\n    },\n      getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: false\n        }\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc8feb1-6769-4a07-b728-140f508a37ae&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7) test fail exception&quot;,&quot;fullTitle&quot;:&quot;notification test send mentions 7) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n        user: { _id: \&quot;125\&quot; }\n    \n};\nconst user={\n    _id:\&quot;132\&quot;\n}\nconst mentions=[\n   { userId:\&quot;12\&quot;}\n           ] ;\nconst NotificationService = {\n    sendMentions: async (id) =&gt; {\n        const response = {\n            success: true,\n            data:[\n                {},\n               ]\n        }\n        return response;\n    },\n      getFirebaseToken: async (id) =&gt; {\n        const response = {\n            success: false\n        }\n        throw new Error(&#x27;divide by zero!&#x27;);\n        return response;\n    }\n  \n};\nconst on = {};\nconst notificationObj = new notification({ on, NotificationService });\nawait notificationObj.sendMentions(user,on,on, mentions);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3f4520a-74b3-4ff3-8d10-9712c6d9c65b&quot;,&quot;parentUUID&quot;:&quot;53b8b9e9-4a25-418e-a16b-423ae37e00c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;990eee51-b1b8-4c7b-9f8a-8764a08c6757&quot;,&quot;640f1a75-ffb9-4e61-be44-227216c1707c&quot;,&quot;fde5b418-68d6-4adf-b03a-3a3b68c5ea26&quot;,&quot;ea2ad7b1-2db0-415a-98a6-427d50e1a743&quot;,&quot;197e67a7-7545-4c3b-b614-564536e68b9a&quot;,&quot;5cc8feb1-6769-4a07-b728-140f508a37ae&quot;,&quot;a3f4520a-74b3-4ff3-8d10-9712c6d9c65b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a3aca677-d7ee-4a65-a368-1b1d9702de4f&quot;,&quot;title&quot;:&quot;Post Controller Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6619938c-5522-4a02-9970-4ad042250be6&quot;,&quot;title&quot;:&quot;userPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sort: \&quot;New\&quot;,\n    limit: -1,\n    page:-1\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (me, user) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  getUserPosts: async (userid, sorttype) =&gt; {\n    let posts = [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        replies: [],\n        title: \&quot;First Post\&quot;,\n        kind: \&quot;self\&quot;,\n        text: \&quot;this is my first post on NONLEGIT\&quot;,\n        images: [],\n        createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n        locked: false,\n        isDeleted: false,\n        sendReplies: true,\n        nsfw: false,\n        spoiler: false,\n        votes: 2,\n        views: 0,\n        commentCount: 0,\n        shareCount: 0,\n        suggestedSort: \&quot;top\&quot;,\n        scheduled: false,\n        postVoteStatus: \&quot;1\&quot;,\n        isSaved: false,\n        isHidden: false,\n        name: \&quot;Nour\&quot;,\n      },\n    ];\n    return posts;\n  },\n  setVotePostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n  removeHiddenPosts: (me, posts) =&gt; {\n    return posts;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      replies: [],\n      title: \&quot;First Post\&quot;,\n      kind: \&quot;self\&quot;,\n      text: \&quot;this is my first post on NONLEGIT\&quot;,\n      images: [],\n      createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n      locked: false,\n      isDeleted: false,\n      sendReplies: true,\n      nsfw: false,\n      spoiler: false,\n      votes: 2,\n      views: 0,\n      commentCount: 0,\n      shareCount: 0,\n      suggestedSort: \&quot;top\&quot;,\n      scheduled: false,\n      postVoteStatus: \&quot;1\&quot;,\n      isSaved: false,\n      isHidden: false,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13eb81ea-f4a4-4709-9d58-d09cbc2cb047&quot;,&quot;parentUUID&quot;:&quot;6619938c-5522-4a02-9970-4ad042250be6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userPosts Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {},\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n};\nconst PostService = {};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide userName \&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f08f4b6a-5f8f-4739-8179-a9cc21174240&quot;,&quot;parentUUID&quot;:&quot;6619938c-5522-4a02-9970-4ad042250be6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userPosts Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: false,\n    };\n  },\n};\nconst PostService = {};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54685eb3-09b5-41e9-8420-585cf727df9a&quot;,&quot;parentUUID&quot;:&quot;6619938c-5522-4a02-9970-4ad042250be6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userPosts Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (me, user) =&gt; {\n    return true;\n  },\n};\nconst PostService = {};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ede34877-9685-4055-b073-0a51917de1ff&quot;,&quot;parentUUID&quot;:&quot;6619938c-5522-4a02-9970-4ad042250be6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13eb81ea-f4a4-4709-9d58-d09cbc2cb047&quot;,&quot;f08f4b6a-5f8f-4739-8179-a9cc21174240&quot;,&quot;54685eb3-09b5-41e9-8420-585cf727df9a&quot;,&quot;ede34877-9685-4055-b073-0a51917de1ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7048f017-8b4e-4ca3-a463-ad29edf3e164&quot;,&quot;title&quot;:&quot;getSavedPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test getSavedPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    saved: [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        name: \&quot;Nour\&quot;,\n      },\n    ],\n    savedComments: [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        name: \&quot;Nour\&quot;,\n      },\n    ],\n    populate: async (saved, dummy) =&gt; {\n      return [];\n    },\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n};\nconst PostService = {\n  setVoteStatus: (me, posts) =&gt; {\n    return posts;\n  },\n};\nconst CommentService = {\n  setVoteStatus: (me, posts) =&gt; {\n    return posts;\n  },\n};\nconst authObj = new auth({ PostService, UserService, CommentService });\nawait authObj.getSavedPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  savedPosts: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n  savedComments: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee9fbc9c-d9cd-4eaf-848c-e283c7f5d45c&quot;,&quot;parentUUID&quot;:&quot;7048f017-8b4e-4ca3-a463-ad29edf3e164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee9fbc9c-d9cd-4eaf-848c-e283c7f5d45c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a21a87eb-e0cf-4484-9213-6dd64b788f6a&quot;,&quot;title&quot;:&quot;getHiddenPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test getHiddenPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    hidden: [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        replies: [],\n        title: \&quot;First Post\&quot;,\n        kind: \&quot;self\&quot;,\n        text: \&quot;this is my first post on NONLEGIT\&quot;,\n        images: [],\n        createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n        locked: false,\n        isDeleted: false,\n        sendReplies: true,\n        nsfw: false,\n        spoiler: false,\n        votes: 2,\n        views: 0,\n        commentCount: 0,\n        shareCount: 0,\n        suggestedSort: \&quot;top\&quot;,\n        scheduled: false,\n        postVoteStatus: \&quot;1\&quot;,\n        isSaved: false,\n        isHidden: true,\n        name: \&quot;Nour\&quot;,\n      },\n    ],\n    populate: async (saved, dummy) =&gt; {\n      return [];\n    },\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n};\nconst PostService = {\n  setVotePostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  removeHiddenPosts: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.getHiddenPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      replies: [],\n      title: \&quot;First Post\&quot;,\n      kind: \&quot;self\&quot;,\n      text: \&quot;this is my first post on NONLEGIT\&quot;,\n      images: [],\n      createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n      locked: false,\n      isDeleted: false,\n      sendReplies: true,\n      nsfw: false,\n      spoiler: false,\n      votes: 2,\n      views: 0,\n      commentCount: 0,\n      shareCount: 0,\n      suggestedSort: \&quot;top\&quot;,\n      scheduled: false,\n      postVoteStatus: \&quot;1\&quot;,\n      isSaved: false,\n      isHidden: true,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6016710-5dd8-419a-9f91-e2eb50d4aaa9&quot;,&quot;parentUUID&quot;:&quot;a21a87eb-e0cf-4484-9213-6dd64b788f6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6016710-5dd8-419a-9f91-e2eb50d4aaa9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f5cbcb9d-fd99-4e5c-9112-b0389b37f2aa&quot;,&quot;title&quot;:&quot;userUpvotedPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userUpvotedPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    votePost: [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        replies: [],\n        title: \&quot;First Post\&quot;,\n        kind: \&quot;self\&quot;,\n        text: \&quot;this is my first post on NONLEGIT\&quot;,\n        images: [],\n        createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n        locked: false,\n        isDeleted: false,\n        sendReplies: true,\n        nsfw: false,\n        spoiler: false,\n        votes: 2,\n        views: 0,\n        commentCount: 0,\n        shareCount: 0,\n        suggestedSort: \&quot;top\&quot;,\n        scheduled: false,\n        postVoteStatus: \&quot;1\&quot;,\n        isSaved: false,\n        isHidden: true,\n        name: \&quot;Nour\&quot;,\n      },\n    ],\n    populate: async (saved, dummy) =&gt; {\n      return [];\n    },\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n};\nconst PostService = {\n  selectPostsWithVotes: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userUpvotedPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      replies: [],\n      title: \&quot;First Post\&quot;,\n      kind: \&quot;self\&quot;,\n      text: \&quot;this is my first post on NONLEGIT\&quot;,\n      images: [],\n      createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n      locked: false,\n      isDeleted: false,\n      sendReplies: true,\n      nsfw: false,\n      spoiler: false,\n      votes: 2,\n      views: 0,\n      commentCount: 0,\n      shareCount: 0,\n      suggestedSort: \&quot;top\&quot;,\n      scheduled: false,\n      postVoteStatus: \&quot;1\&quot;,\n      isSaved: false,\n      isHidden: true,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce991c37-0507-4b61-b396-a5ea9eab265c&quot;,&quot;parentUUID&quot;:&quot;f5cbcb9d-fd99-4e5c-9112-b0389b37f2aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce991c37-0507-4b61-b396-a5ea9eab265c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;title&quot;:&quot;postVote Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test postVote Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.postVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f128eb13-6bed-4114-b674-2b06d29b4be9&quot;,&quot;parentUUID&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test postVote Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.postVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13cc4d2d-73fc-4765-9e93-29103cb38a03&quot;,&quot;parentUUID&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test postVote Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.postVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d04f4c87-96cf-4a8b-b5e2-0eebc3372ee0&quot;,&quot;parentUUID&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test postVote Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.postVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Post Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cc47a2c-f3d0-406b-8e75-995b2b4a583c&quot;,&quot;parentUUID&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test postVote Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  addVote: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.postVote(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d24d916-be2f-495e-a092-3473aae84005&quot;,&quot;parentUUID&quot;:&quot;5c60363c-952e-4e0b-a395-45aefb24bf4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f128eb13-6bed-4114-b674-2b06d29b4be9&quot;,&quot;13cc4d2d-73fc-4765-9e93-29103cb38a03&quot;,&quot;d04f4c87-96cf-4a8b-b5e2-0eebc3372ee0&quot;,&quot;7cc47a2c-f3d0-406b-8e75-995b2b4a583c&quot;,&quot;8d24d916-be2f-495e-a092-3473aae84005&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;title&quot;:&quot;savePost Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test savePost Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  savePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.savePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8835d29f-236c-496c-88c5-30f8aba6d262&quot;,&quot;parentUUID&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test savePost Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  savePost: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.savePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;def358e2-e359-44a3-a5e2-1048c308ee9d&quot;,&quot;parentUUID&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test savePost Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  savePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.savePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa0b8e9e-da95-486e-9528-52745ab3d621&quot;,&quot;parentUUID&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test savePost Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  savePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.savePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Post Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;197577b0-8eb9-4b87-af01-ee3af27f502f&quot;,&quot;parentUUID&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test savePost Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  savePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.savePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02843a8b-23e9-479b-b9c9-4c9b18c68293&quot;,&quot;parentUUID&quot;:&quot;c3f9fc17-89e7-411a-be79-f8e729eaeb70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8835d29f-236c-496c-88c5-30f8aba6d262&quot;,&quot;def358e2-e359-44a3-a5e2-1048c308ee9d&quot;,&quot;fa0b8e9e-da95-486e-9528-52745ab3d621&quot;,&quot;197577b0-8eb9-4b87-af01-ee3af27f502f&quot;,&quot;02843a8b-23e9-479b-b9c9-4c9b18c68293&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;title&quot;:&quot;unSavePost Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unSavePost Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSavePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unSavePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0de82b4c-4f8b-4cf0-9058-04980ef1f5e0&quot;,&quot;parentUUID&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unSavePost Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSavePost: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unSavePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64253822-ef26-455e-8dec-451d4bba5e4d&quot;,&quot;parentUUID&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unSavePost Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSavePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unSavePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afe07e9c-46cf-4364-8f8a-549ff27e2de9&quot;,&quot;parentUUID&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unSavePost Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSavePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unSavePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Post Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da3b15c6-8570-4a33-992f-a735e8f4703f&quot;,&quot;parentUUID&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unSavePost Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unSavePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unSavePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04ab2776-cef6-4e7a-9f12-503811ab3705&quot;,&quot;parentUUID&quot;:&quot;e142bb2d-4fea-4a9a-8328-be991c142e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0de82b4c-4f8b-4cf0-9058-04980ef1f5e0&quot;,&quot;64253822-ef26-455e-8dec-451d4bba5e4d&quot;,&quot;afe07e9c-46cf-4364-8f8a-549ff27e2de9&quot;,&quot;da3b15c6-8570-4a33-992f-a735e8f4703f&quot;,&quot;04ab2776-cef6-4e7a-9f12-503811ab3705&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;title&quot;:&quot;hidePost Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test hidePost Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  hidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.hidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7aee3be-e7ef-4ccd-a3a4-01fa28d94ce9&quot;,&quot;parentUUID&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test hidePost Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  hidePost: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.hidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00cc6b4f-7a8a-4736-9f1a-e973da5b81ed&quot;,&quot;parentUUID&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test hidePost Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  hidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.hidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a452948e-5b4e-4663-97dc-f3cf9b2bb1cc&quot;,&quot;parentUUID&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test hidePost Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  hidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.hidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Post Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50ba70de-c497-4fb5-9382-81269acbb7cf&quot;,&quot;parentUUID&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test hidePost Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  hidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.hidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93fd385c-da26-4de4-b273-2d4f0bc03c9b&quot;,&quot;parentUUID&quot;:&quot;e0bc2580-6bc6-4ffd-b3d2-65535b94dc01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7aee3be-e7ef-4ccd-a3a4-01fa28d94ce9&quot;,&quot;00cc6b4f-7a8a-4736-9f1a-e973da5b81ed&quot;,&quot;a452948e-5b4e-4663-97dc-f3cf9b2bb1cc&quot;,&quot;50ba70de-c497-4fb5-9382-81269acbb7cf&quot;,&quot;93fd385c-da26-4de4-b273-2d4f0bc03c9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;title&quot;:&quot;unHidePost Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unHidePost Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unHidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unHidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd6bf128-2377-4684-b4c6-ac87b2f15539&quot;,&quot;parentUUID&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unHidePost Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unHidePost: (me, posts) =&gt; {\n    return false;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unHidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50a0c9c6-22ed-42b6-bee9-3405b9fac3e3&quot;,&quot;parentUUID&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unHidePost Test thrid test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unHidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unHidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;608e694f-36ec-4d87-9fa6-bc4883486c3e&quot;,&quot;parentUUID&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unHidePost Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 1,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unHidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unHidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Post Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66affa7d-7b79-4dd9-b20b-c816a6483230&quot;,&quot;parentUUID&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test unHidePost Test fifth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    postId: \&quot;Ahmed\&quot;,\n  },\n  body: {\n    dir: 2,\n  },\n};\nconst UserService = {\n  checkBlockStatus: async (user, me) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  findPostById: async (postId) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        author: \&quot;1\&quot;,\n        votes: \&quot;5\&quot;,\n      },\n    };\n    return response;\n  },\n  unHidePost: (me, posts) =&gt; {\n    return true;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.unHidePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Enter Valid Vote dir\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e3f4b65-deb1-4638-9b1e-4c1504ad1030&quot;,&quot;parentUUID&quot;:&quot;0b0a922a-6107-4e93-9a60-5409eebcbbec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd6bf128-2377-4684-b4c6-ac87b2f15539&quot;,&quot;50a0c9c6-22ed-42b6-bee9-3405b9fac3e3&quot;,&quot;608e694f-36ec-4d87-9fa6-bc4883486c3e&quot;,&quot;66affa7d-7b79-4dd9-b20b-c816a6483230&quot;,&quot;5e3f4b65-deb1-4638-9b1e-4c1504ad1030&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3048c1bf-798d-4fe1-a81e-86d04494bb33&quot;,&quot;title&quot;:&quot;overview Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test overview Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (userName, dummy) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  getUserPosts: (me, posts) =&gt; {\n    return [{ _id: \&quot;1\&quot; }];\n  },\n  setVotePostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n  removeHiddenPosts: (me, posts) =&gt; {\n    return posts;\n  },\n  filterPosts: (posts) =&gt; {\n    return posts;\n  },\n};\nconst CommentService = {\n  getUserComments: async () =&gt; {\n    return [\n      {\n        _id: \&quot;1\&quot;,\n      },\n    ];\n  },\n};\nconst authObj = new auth({ PostService, UserService, CommentService });\nawait authObj.overview(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;1\&quot;,\n    },\n  ],\n  comments: [\n    {\n      _id: \&quot;1\&quot;,\n    },\n  ],\n});\nconst authObj2 = new auth({ PostService, UserService, CommentService });\nconst req2 = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sort: \&quot;Top\&quot;,\n    page: 5,\n    limit: 3,\n  },\n};\nawait authObj2.overview(req2, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;1\&quot;,\n    },\n  ],\n  comments: [\n    {\n      _id: \&quot;1\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc11e31d-03e2-496d-b11f-2a68344b8d26&quot;,&quot;parentUUID&quot;:&quot;3048c1bf-798d-4fe1-a81e-86d04494bb33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test overview Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (userName, dummy) =&gt; {\n    return true;\n  },\n};\nconst PostService = {\n  getUserPosts: (me, posts) =&gt; {\n    return [{ _id: \&quot;1\&quot; }];\n  },\n  setVotePostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n  removeHiddenPosts: (me, posts) =&gt; {\n    return posts;\n  },\n  filterPosts: (posts) =&gt; {\n    return posts;\n  },\n};\nconst CommentService = {\n  getUserComments: async () =&gt; {\n    return [\n      {\n        _id: \&quot;1\&quot;,\n      },\n    ];\n  },\n};\nconst authObj = new auth({ PostService, UserService, CommentService });\nawait authObj.overview(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [],\n  comments: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b76d7d10-9bee-4a40-8b44-33928287a84c&quot;,&quot;parentUUID&quot;:&quot;3048c1bf-798d-4fe1-a81e-86d04494bb33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test overview Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: false,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n  checkBlockStatus: async (userName, dummy) =&gt; {\n    return false;\n  },\n};\nconst PostService = {\n  getUserPosts: (me, posts) =&gt; {\n    return [{ _id: \&quot;1\&quot; }];\n  },\n  setVotePostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n  removeHiddenPosts: (me, posts) =&gt; {\n    return posts;\n  },\n  filterPosts: (posts) =&gt; {\n    return posts;\n  },\n};\nconst CommentService = {\n  getUserComments: async () =&gt; {\n    return [\n      {\n        _id: \&quot;1\&quot;,\n      },\n    ];\n  },\n};\nconst authObj = new auth({ PostService, UserService, CommentService });\nawait authObj.overview(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9dd877-1544-432c-b70b-444d45da07d7&quot;,&quot;parentUUID&quot;:&quot;3048c1bf-798d-4fe1-a81e-86d04494bb33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc11e31d-03e2-496d-b11f-2a68344b8d26&quot;,&quot;b76d7d10-9bee-4a40-8b44-33928287a84c&quot;,&quot;2d9dd877-1544-432c-b70b-444d45da07d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;56aa9f71-e91f-4d7c-87c0-92ed7e67510f&quot;,&quot;title&quot;:&quot;userDownvotedPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test userDownvotedPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    votePost: [\n      {\n        _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n        owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        ownerType: \&quot;User\&quot;,\n        author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n        replies: [],\n        title: \&quot;First Post\&quot;,\n        kind: \&quot;self\&quot;,\n        text: \&quot;this is my first post on NONLEGIT\&quot;,\n        images: [],\n        createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n        locked: false,\n        isDeleted: false,\n        sendReplies: true,\n        nsfw: false,\n        spoiler: false,\n        votes: 2,\n        views: 0,\n        commentCount: 0,\n        shareCount: 0,\n        suggestedSort: \&quot;top\&quot;,\n        scheduled: false,\n        postVoteStatus: \&quot;1\&quot;,\n        isSaved: false,\n        isHidden: true,\n        name: \&quot;Nour\&quot;,\n      },\n    ],\n    populate: async (saved, dummy) =&gt; {\n      return [];\n    },\n  },\n  params: {\n    userName: \&quot;Ahmed\&quot;,\n  },\n  query: {\n    sortType: \&quot;New\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (userName, dummy) =&gt; {\n    return {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n      },\n    };\n  },\n};\nconst PostService = {\n  selectPostsWithVotes: (me, posts) =&gt; {\n    return posts;\n  },\n  setSavedPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setHiddenPostStatus: (me, posts) =&gt; {\n    return posts;\n  },\n  setPostOwnerData: (posts) =&gt; {\n    return posts;\n  },\n};\nconst authObj = new auth({ PostService, UserService });\nawait authObj.userDownvotedPosts(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  posts: [\n    {\n      _id: \&quot;637e7497b207b89c889ac1d6\&quot;,\n      owner: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      ownerType: \&quot;User\&quot;,\n      author: \&quot;637e7493b207b89c889ac1c4\&quot;,\n      replies: [],\n      title: \&quot;First Post\&quot;,\n      kind: \&quot;self\&quot;,\n      text: \&quot;this is my first post on NONLEGIT\&quot;,\n      images: [],\n      createdAt: \&quot;2022-11-23T19:29:21.916Z\&quot;,\n      locked: false,\n      isDeleted: false,\n      sendReplies: true,\n      nsfw: false,\n      spoiler: false,\n      votes: 2,\n      views: 0,\n      commentCount: 0,\n      shareCount: 0,\n      suggestedSort: \&quot;top\&quot;,\n      scheduled: false,\n      postVoteStatus: \&quot;1\&quot;,\n      isSaved: false,\n      isHidden: true,\n      name: \&quot;Nour\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e85175-3672-42e9-850e-55473e942a1c&quot;,&quot;parentUUID&quot;:&quot;56aa9f71-e91f-4d7c-87c0-92ed7e67510f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54e85175-3672-42e9-850e-55473e942a1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;title&quot;:&quot;get hot posts&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get hot posts 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getHotPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2df0d45b-53df-482c-b1fa-0d5ae95cddb1&quot;,&quot;parentUUID&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success not logged in&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get hot posts 2) test success not logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n \n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getHotPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71ed304e-de35-4b0f-bf6a-5b73626e1e30&quot;,&quot;parentUUID&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get hot posts 3) test fail subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getHotPosts(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  message: \&quot;Subreddit not found\&quot;,\n  status: \&quot;Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9bbd16d-892f-4622-aa10-c6c79da8beab&quot;,&quot;parentUUID&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail internal&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get hot posts 4) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getHotPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  message: \&quot;Internal server error\&quot;,\n      \n  status: \&quot;Internal Server Error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2add1531-adb8-4528-9873-2a46e9b07f54&quot;,&quot;parentUUID&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get hot posts 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    \n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    throw new Error(&#x27;divide by zero!&#x27;);\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getHotPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e9b4412-21cd-4c6f-ba12-b6d9eeaca14b&quot;,&quot;parentUUID&quot;:&quot;d838b2f1-6894-49e9-89b0-c750e095a20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2df0d45b-53df-482c-b1fa-0d5ae95cddb1&quot;,&quot;71ed304e-de35-4b0f-bf6a-5b73626e1e30&quot;,&quot;b9bbd16d-892f-4622-aa10-c6c79da8beab&quot;,&quot;2add1531-adb8-4528-9873-2a46e9b07f54&quot;,&quot;2e9b4412-21cd-4c6f-ba12-b6d9eeaca14b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;title&quot;:&quot;get new posts&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get new posts 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getNewPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e2effc2-95b9-49b1-9737-fe6111cbf4a9&quot;,&quot;parentUUID&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success not logged in&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get new posts 2) test success not logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n \n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getNewPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba7adb32-4bed-4810-860e-25f3d31fa1ba&quot;,&quot;parentUUID&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get new posts 3) test fail subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getNewPosts(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  message: \&quot;Subreddit not found\&quot;,\n  status: \&quot;Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34c95fdd-ca92-41ba-a543-28199869f17a&quot;,&quot;parentUUID&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail internal&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get new posts 4) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getNewPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  message: \&quot;Internal server error\&quot;,\n      \n  status: \&quot;Internal Server Error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5eda12e-5c03-4bcd-8ea4-9c6ccfd6315a&quot;,&quot;parentUUID&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get new posts 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    \n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    throw new Error(&#x27;divide by zero!&#x27;);\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getNewPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a7503c7-7a7b-461a-ae09-c36cdfafa358&quot;,&quot;parentUUID&quot;:&quot;fb02cf69-0c60-48b0-ad11-ecfd7ec09244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e2effc2-95b9-49b1-9737-fe6111cbf4a9&quot;,&quot;ba7adb32-4bed-4810-860e-25f3d31fa1ba&quot;,&quot;34c95fdd-ca92-41ba-a543-28199869f17a&quot;,&quot;b5eda12e-5c03-4bcd-8ea4-9c6ccfd6315a&quot;,&quot;3a7503c7-7a7b-461a-ae09-c36cdfafa358&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;title&quot;:&quot;get top posts&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get top posts 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getTopPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44c226ec-00cd-419e-b8dc-93558197afcd&quot;,&quot;parentUUID&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success not logged in&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get top posts 2) test success not logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n       \n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getTopPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4e917df-0a94-442f-987e-06d2d8ce6dbf&quot;,&quot;parentUUID&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get top posts 3) test fail subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getTopPosts(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  message: \&quot;Subreddit not found\&quot;,\n  status: \&quot;Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9108221-f762-4507-9eb4-4eae43244728&quot;,&quot;parentUUID&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail internal&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get top posts 4) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getTopPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  message: \&quot;Internal server error\&quot;,\n    \n  status: \&quot;Internal Server Error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb44b4a6-207e-41bb-9579-41a8bda46513&quot;,&quot;parentUUID&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get top posts 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n  \n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    throw new Error(&#x27;divide by zero!&#x27;);\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getTopPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n       \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a1e1332-67c8-4382-8b95-166aa42454a4&quot;,&quot;parentUUID&quot;:&quot;54053541-19d3-49fc-a0a3-e1ca834d5696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44c226ec-00cd-419e-b8dc-93558197afcd&quot;,&quot;b4e917df-0a94-442f-987e-06d2d8ce6dbf&quot;,&quot;b9108221-f762-4507-9eb4-4eae43244728&quot;,&quot;fb44b4a6-207e-41bb-9579-41a8bda46513&quot;,&quot;2a1e1332-67c8-4382-8b95-166aa42454a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;title&quot;:&quot;get best posts&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get best posts 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getBestPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;463466c1-d964-4fe2-97e5-194d2071c8df&quot;,&quot;parentUUID&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success not logged in&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get best posts 2) test success not logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n       \n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getBestPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5745d98d-d87f-40ca-8f33-780eae41e8cc&quot;,&quot;parentUUID&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get best posts 3) test fail subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getBestPosts(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  message: \&quot;Subreddit not found\&quot;,\n  status: \&quot;Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8fbcfc7-4ffe-4685-94e8-b3256da1e163&quot;,&quot;parentUUID&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail internal&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get best posts 4) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  // toFilter: \&quot; \&quot;\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getBestPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  message: \&quot;Internal server error\&quot;,\n    \n  status: \&quot;Internal Server Error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;367dd1a8-bab0-4291-a719-e017d9946516&quot;,&quot;parentUUID&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get best posts 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  }\n};\nconst UserService = {\n  getPeopleUserKnows: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n  \n    return response;\n  }\n};\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    throw new Error(&#x27;divide by zero!&#x27;);\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, UserService });\nawait postObj.getBestPosts(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n       \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bce0c4c-ffc3-4215-b558-ab3e95378c85&quot;,&quot;parentUUID&quot;:&quot;c367f8c8-2b35-476f-9fa1-e9587eef9357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;463466c1-d964-4fe2-97e5-194d2071c8df&quot;,&quot;5745d98d-d87f-40ca-8f33-780eae41e8cc&quot;,&quot;f8fbcfc7-4ffe-4685-94e8-b3256da1e163&quot;,&quot;367dd1a8-bab0-4291-a719-e017d9946516&quot;,&quot;4bce0c4c-ffc3-4215-b558-ab3e95378c85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;title&quot;:&quot;get post&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n  params: {\n    postId:\&quot; \&quot;\n  }\n};\nconst PostService = {\n  getPost: async () =&gt; {\n    const response = {\n      success: true,\n      doc: posts[0],\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts[0],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca7d0f8b-aa43-4be0-bbea-975833b7a67b&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test success not logged in&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 2) test success not logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  params: {\n    postId:\&quot; \&quot;\n  }\n};\n\nconst PostService = {\n  getPosts: async () =&gt; {\n    const response = {\n      success: true,\n      doc: posts[0],\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: posts[0],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1d091be-9d6e-4da2-8fdc-606711f300a6&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 3) test fail post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n   params: {\n    postId:\&quot; \&quot;\n  }\n  // toFilter: \&quot; \&quot;\n};\n     \nconst PostService = {\n  getPost: async () =&gt; {\n    const response = {\n      success: false,\n      error: postErrors.POST_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  message: \&quot;Post not found\&quot;,\n  status: \&quot;Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1affcd5e-2dbd-4b23-9aaf-d96f3d7153f8&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test fail internal&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 4) test fail internal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n   params: {\n    postId:\&quot; \&quot;\n  }\n  // toFilter: \&quot; \&quot;\n};\n     \nconst PostService = {\n  getPost: async () =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  message: \&quot;Internal server error\&quot;,\n      \n  status: \&quot;Internal Server Error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;298a16f0-f13f-4dfd-8847-dddf2f244292&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test fail exception&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 5) test fail exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n   params: {\n    postId:\&quot; \&quot;\n  }\n};\n     \nconst PostService = {\n  getPost: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n    throw new Error(&#x27;divide by zero!&#x27;);\n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(500);\nexpect(res.status(500).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09919f8c-c700-4faf-b309-d8e2867bf64a&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6) test fail bad request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test get post 6) test fail bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  isAuthorized: true,\n  user: {\n    _id: \&quot; \&quot;,\n  },\n   params: {\n    postId:undefined\n  }\n};\n     \nconst PostService = {\n  getPost: async () =&gt; {\n    const response = {\n      success: true,\n      data: posts,\n    };\n   \n    return response;\n  },\n};\nconst on = {};\nconst postObj = new auth({ PostService, on });\nawait postObj.getPost(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter\&quot;,\n \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4bfe3d2-8f04-46ce-b4ef-a5f13f213c02&quot;,&quot;parentUUID&quot;:&quot;3a5893a1-9476-4dc9-a4f0-eb42b51e3c49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca7d0f8b-aa43-4be0-bbea-975833b7a67b&quot;,&quot;f1d091be-9d6e-4da2-8fdc-606711f300a6&quot;,&quot;1affcd5e-2dbd-4b23-9aaf-d96f3d7153f8&quot;,&quot;298a16f0-f13f-4dfd-8847-dddf2f244292&quot;,&quot;09919f8c-c700-4faf-b309-d8e2867bf64a&quot;,&quot;c4bfe3d2-8f04-46ce-b4ef-a5f13f213c02&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7edfd63b-a22d-407a-9855-79e3be6dd068&quot;,&quot;title&quot;:&quot;Post Controller CRUD operations&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;title&quot;:&quot;Create post test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful creation&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test successful creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    author: \&quot;123e4aab2a94c22ae492983a\&quot;,\n    title: \&quot;kiro post\&quot;,\n    kind: \&quot;self\&quot;,\n    text: \&quot;this is a post\&quot;,\n    owner: \&quot;637e4aab2a94c22ae492983a\&quot;,\n    ownerType: \&quot;Subreddit\&quot;,\n    nsfw: false,\n    spoiler: true,\n    sendReplies: true,\n    suggestedSort: \&quot;top\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2129f08-99d3-4107-b8c0-4153d5b981d8&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid post kind&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Invalid post kind&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.INVALID_POST_KIND };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid post kind\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c34210af-ac84-4380-a653-daf8b485cf62&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid owner type&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Invalid owner type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.INVALID_OWNER };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid owner type\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5a2ff30-666a-4b7f-b0e8-e27729609017&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.SUBREDDIT_NOT_FOUND };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;893adb92-ad29-46de-8fcb-82b0b1cf34b4&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid parent post&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Invalid parent post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.INVALID_PARENT_POST };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid parent post\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d03ed33-9565-4e4b-9a54-e659322d1e72&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Flair not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.FLAIR_NOT_FOUND };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Flair not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f032650-6dd8-4ec6-9762-f0e7f74afee0&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;mongo error&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test mongo error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.createPost = async (data) =&gt; {\n  return { success: false, error: postErrors.MONGO_ERR, msg: \&quot;message\&quot; };\n};\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;message\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;212530ae-dd9f-4093-af3a-ebc95c98a6e0&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Create post test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.body.kind;\nawait postController.createPost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77f10934-51ad-46f2-9468-bbd7ee33a233&quot;,&quot;parentUUID&quot;:&quot;fffd8cca-e9e1-4771-9de2-e39a7ee1e315&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2129f08-99d3-4107-b8c0-4153d5b981d8&quot;,&quot;c34210af-ac84-4380-a653-daf8b485cf62&quot;,&quot;c5a2ff30-666a-4b7f-b0e8-e27729609017&quot;,&quot;893adb92-ad29-46de-8fcb-82b0b1cf34b4&quot;,&quot;2d03ed33-9565-4e4b-9a54-e659322d1e72&quot;,&quot;3f032650-6dd8-4ec6-9762-f0e7f74afee0&quot;,&quot;212530ae-dd9f-4093-af3a-ebc95c98a6e0&quot;,&quot;77f10934-51ad-46f2-9468-bbd7ee33a233&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;title&quot;:&quot;Update post test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful update&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test successful update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    text: \&quot;this is a post\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de117030-4c20-4aee-971b-918475917460&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Post isn&#x27;t editable&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test Post isn&#x27;t editable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.updatePost = async (data) =&gt; {\n  return { success: false, error: postErrors.NOT_EDITABLE };\n};\nawait postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post isn&#x27;t editable\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fab4b02-39b1-4041-86b4-860fd7393333&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User must be author&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test User must be author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.updatePost = async (data) =&gt; {\n  return { success: false, error: postErrors.NOT_AUTHOR };\n};\nawait postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be author\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc3b7d4-eb9f-4ece-b6f8-25d10d7e1e8c&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test Post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.updatePost = async (data) =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36395c1b-41a5-4834-aa11-2543d5683c9d&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;mongo error&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test mongo error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.updatePost = async (data) =&gt; {\n  return { success: false, error: postErrors.MONGO_ERR, msg: \&quot;message\&quot; };\n};\nawait postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;message\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1a7f7de-53cf-4a7a-a885-ce6a33e4a256&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Update post test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.body.text;\nawait postController.updatePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5328869a-915c-40f9-8c5f-f578d29a9adf&quot;,&quot;parentUUID&quot;:&quot;4f7d1737-0293-422c-aa73-c2faf74c22de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de117030-4c20-4aee-971b-918475917460&quot;,&quot;4fab4b02-39b1-4041-86b4-860fd7393333&quot;,&quot;bdc3b7d4-eb9f-4ece-b6f8-25d10d7e1e8c&quot;,&quot;36395c1b-41a5-4834-aa11-2543d5683c9d&quot;,&quot;a1a7f7de-53cf-4a7a-a885-ce6a33e4a256&quot;,&quot;5328869a-915c-40f9-8c5f-f578d29a9adf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a077f443-7bfa-4fe5-91d0-c6b4da9fa073&quot;,&quot;title&quot;:&quot;Delete post test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful delete&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Delete post test successful delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: null,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3a50333-0974-405f-b723-a59b77bfabe2&quot;,&quot;parentUUID&quot;:&quot;a077f443-7bfa-4fe5-91d0-c6b4da9fa073&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User must be author&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Delete post test User must be author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.deletePost = async () =&gt; {\n  return { success: false, error: postErrors.NOT_AUTHOR };\n};\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be author\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ce53e23-5aec-43f8-9f98-e3a22e0c111f&quot;,&quot;parentUUID&quot;:&quot;a077f443-7bfa-4fe5-91d0-c6b4da9fa073&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Delete post test Post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.deletePost = async () =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ca9c5a1-38a7-4902-a7cd-fd0b64f6c069&quot;,&quot;parentUUID&quot;:&quot;a077f443-7bfa-4fe5-91d0-c6b4da9fa073&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post Controller CRUD operations Delete post test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params.postId;\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter postId\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e261919-c0ed-411c-82a6-e81a036cb589&quot;,&quot;parentUUID&quot;:&quot;a077f443-7bfa-4fe5-91d0-c6b4da9fa073&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3a50333-0974-405f-b723-a59b77bfabe2&quot;,&quot;2ce53e23-5aec-43f8-9f98-e3a22e0c111f&quot;,&quot;3ca9c5a1-38a7-4902-a7cd-fd0b64f6c069&quot;,&quot;8e261919-c0ed-411c-82a6-e81a036cb589&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;78f9d195-2875-454e-954b-6e5a603cbec0&quot;,&quot;title&quot;:&quot;Delete post test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful delete&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Delete post test successful delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: null,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;469650aa-dc1a-4a20-9e46-c514fc64637b&quot;,&quot;parentUUID&quot;:&quot;78f9d195-2875-454e-954b-6e5a603cbec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User must be author&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Delete post test User must be author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.deletePost = async () =&gt; {\n  return { success: false, error: postErrors.NOT_AUTHOR };\n};\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be author\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c16f6504-e872-45b1-95f0-2c20afb25324&quot;,&quot;parentUUID&quot;:&quot;78f9d195-2875-454e-954b-6e5a603cbec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Delete post test Post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.deletePost = async () =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;280a6eaa-3ce9-43b1-b1a0-dda925596122&quot;,&quot;parentUUID&quot;:&quot;78f9d195-2875-454e-954b-6e5a603cbec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Delete post test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params.postId;\nawait postController.deletePost(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter postId\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2be2e69-500c-4481-9e18-44474190e9ad&quot;,&quot;parentUUID&quot;:&quot;78f9d195-2875-454e-954b-6e5a603cbec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;469650aa-dc1a-4a20-9e46-c514fc64637b&quot;,&quot;c16f6504-e872-45b1-95f0-2c20afb25324&quot;,&quot;280a6eaa-3ce9-43b1-b1a0-dda925596122&quot;,&quot;f2be2e69-500c-4481-9e18-44474190e9ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;title&quot;:&quot;Must be moderator test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;moderator&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator test moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);\n//expect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b70b726-1e25-4413-8f4c-08a08f516a08&quot;,&quot;parentUUID&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not moderator&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.isMod = () =&gt; {\n  return { success: false, error: postErrors.NOT_MOD };\n};\nawait postController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c2195e7-6246-421f-8db8-a811e6733921&quot;,&quot;parentUUID&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not subreddit&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator test not subreddit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.isMod = () =&gt; {\n  return { success: false, error: postErrors.OWNER_NOT_SUBREDDIT };\n};\nawait postController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;The post must belong to a subreddit\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13fb48b8-c76a-4093-9dea-9dd9af3ab2bd&quot;,&quot;parentUUID&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator test post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.isMod = () =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39979fee-e89a-4cab-8e33-0ace9abbe149&quot;,&quot;parentUUID&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait postController.mustBeMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64a49c1f-9f6b-4a54-a19b-c3a2a9f8471e&quot;,&quot;parentUUID&quot;:&quot;5b963b10-230c-44d1-8d41-ef8f93d821ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b70b726-1e25-4413-8f4c-08a08f516a08&quot;,&quot;9c2195e7-6246-421f-8db8-a811e6733921&quot;,&quot;13fb48b8-c76a-4093-9dea-9dd9af3ab2bd&quot;,&quot;39979fee-e89a-4cab-8e33-0ace9abbe149&quot;,&quot;64a49c1f-9f6b-4a54-a19b-c3a2a9f8471e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6b96e379-84db-41d4-b887-df67e5c9e2f1&quot;,&quot;title&quot;:&quot;Must be moderator or author test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;moderator or author&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator or author test moderator or author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.mustBeAuthOrMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);\n//expect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6acd3b54-5929-43ed-9cef-926e3c190593&quot;,&quot;parentUUID&quot;:&quot;6b96e379-84db-41d4-b887-df67e5c9e2f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not moderator nor author&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator or author test not moderator nor author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.isAuthOrMod = () =&gt; {\n  return { success: false, error: postErrors.NOT_AUTHOR_OR_MOD };\n};\nawait postController.mustBeAuthOrMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;User must be moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6744320f-3e5d-4d6d-a098-c62ae6610a87&quot;,&quot;parentUUID&quot;:&quot;6b96e379-84db-41d4-b887-df67e5c9e2f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator or author test post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.isAuthOrMod = () =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.mustBeAuthOrMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c6fc01-a5b4-4c2b-bf9b-331bbf370b60&quot;,&quot;parentUUID&quot;:&quot;6b96e379-84db-41d4-b887-df67e5c9e2f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Must be moderator or author test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait postController.mustBeAuthOrMod(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a5ee6f3-d8bb-4562-92a8-2a009adacc34&quot;,&quot;parentUUID&quot;:&quot;6b96e379-84db-41d4-b887-df67e5c9e2f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6acd3b54-5929-43ed-9cef-926e3c190593&quot;,&quot;6744320f-3e5d-4d6d-a098-c62ae6610a87&quot;,&quot;a9c6fc01-a5b4-4c2b-bf9b-331bbf370b60&quot;,&quot;1a5ee6f3-d8bb-4562-92a8-2a009adacc34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6ad6f0c6-c5f8-42b1-86dd-8eae41b7a103&quot;,&quot;title&quot;:&quot;Moderate post test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful action&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Moderate post test successful action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.moderatePost(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5214b1d2-c481-4638-afca-d02e5e3d0e7b&quot;,&quot;parentUUID&quot;:&quot;6ad6f0c6-c5f8-42b1-86dd-8eae41b7a103&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;action arleady done&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Moderate post test action arleady done&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.modAction = () =&gt; false;\nawait postController.moderatePost(req, res, next);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Action is already performed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5317bb0-c832-4973-85b5-35fbd01ebe5b&quot;,&quot;parentUUID&quot;:&quot;6ad6f0c6-c5f8-42b1-86dd-8eae41b7a103&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Moderate post test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.action = \&quot;not a valid action\&quot;;\nawait postController.moderatePost(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid post moderation action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85f07215-6a50-470b-97e5-c7a935b56cc4&quot;,&quot;parentUUID&quot;:&quot;6ad6f0c6-c5f8-42b1-86dd-8eae41b7a103&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5214b1d2-c481-4638-afca-d02e5e3d0e7b&quot;,&quot;e5317bb0-c832-4973-85b5-35fbd01ebe5b&quot;,&quot;85f07215-6a50-470b-97e5-c7a935b56cc4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;title&quot;:&quot;Spam test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful action&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Spam test successful action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.spam(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29443c79-17a2-466d-9782-b5afcb8906b2&quot;,&quot;parentUUID&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;action arleady done&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Spam test action arleady done&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.spam = () =&gt; {\n  return { success: false, error: postErrors.ACTION_ALREADY_DONE };\n};\nawait postController.spam(req, res, next);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Action is already performed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;649d14b2-7ba6-4832-b39a-ec8ef79b1331&quot;,&quot;parentUUID&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Spam test post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.spam = () =&gt; {\n  return { success: false, error: postErrors.POST_NOT_FOUND };\n};\nawait postController.spam(req, res, next);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Post not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ee1fcc0-4a3b-49fb-9e2d-f7708a6c8d88&quot;,&quot;parentUUID&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Default values&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Spam test Default values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.body.dir;\nawait postController.spam(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d476318b-c9a3-4261-8c6c-930ecaeaea82&quot;,&quot;parentUUID&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Spam test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params;\nawait postController.spam(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdf63e5b-7c32-41e5-b1ca-58538130e61f&quot;,&quot;parentUUID&quot;:&quot;344729eb-4fca-4a09-ae80-a7b88524f41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29443c79-17a2-466d-9782-b5afcb8906b2&quot;,&quot;649d14b2-7ba6-4832-b39a-ec8ef79b1331&quot;,&quot;5ee1fcc0-4a3b-49fb-9e2d-f7708a6c8d88&quot;,&quot;d476318b-c9a3-4261-8c6c-930ecaeaea82&quot;,&quot;cdf63e5b-7c32-41e5-b1ca-58538130e61f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;03de938c-b6da-4c8a-a960-490ce1b79667&quot;,&quot;title&quot;:&quot;Post actions test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\postController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\postController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;post successful action&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post actions test post successful action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await postController.postActions(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status().json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e5967f6-6cfe-4f72-817e-8f46d0035565&quot;,&quot;parentUUID&quot;:&quot;03de938c-b6da-4c8a-a960-490ce1b79667&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post action arleady done&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post actions test post action arleady done&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostService.postAction = () =&gt; false;\nawait postController.postActions(req, res, next);\nexpect(res.status).to.have.been.calledWith(409);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Action already performed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1fa7902-16a2-41ba-822b-bda82f984322&quot;,&quot;parentUUID&quot;:&quot;03de938c-b6da-4c8a-a960-490ce1b79667&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;Post Controller Test Post actions test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.action = \&quot;not a valid action\&quot;;\nawait postController.postActions(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid post action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0e709d5-6387-4fac-a013-fbce357f5048&quot;,&quot;parentUUID&quot;:&quot;03de938c-b6da-4c8a-a960-490ce1b79667&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e5967f6-6cfe-4f72-817e-8f46d0035565&quot;,&quot;c1fa7902-16a2-41ba-822b-bda82f984322&quot;,&quot;b0e709d5-6387-4fac-a013-fbce357f5048&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;title&quot;:&quot;Search controller&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\searchController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\searchController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;search&quot;,&quot;fullTitle&quot;:&quot;Search controller search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51c9df43-1cf3-4aee-ae03-d7d7172c50a3&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default limit&quot;,&quot;fullTitle&quot;:&quot;Search controller default limit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.limit;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58ff7bed-3629-4fbf-80b0-a826dadead23&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default page&quot;,&quot;fullTitle&quot;:&quot;Search controller default page&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.page;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7572cf76-e4b8-4362-8d48-f340e672749a&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default type&quot;,&quot;fullTitle&quot;:&quot;Search controller default type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.type;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;288a11bc-99d3-4220-8aa4-d167c69ffdd7&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default sort&quot;,&quot;fullTitle&quot;:&quot;Search controller default sort&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.sort;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cedf790-3eff-4388-abe8-ffce5eda44e9&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default time&quot;,&quot;fullTitle&quot;:&quot;Search controller default time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query.time = \&quot;not a valid time\&quot;;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8873522d-0ce4-4434-bc94-d44061588e58&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;default query&quot;,&quot;fullTitle&quot;:&quot;Search controller default query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query.q;\nawait searchController.search(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f1df45a-1059-46d7-bdb1-e035ffddeaa7&quot;,&quot;parentUUID&quot;:&quot;4af08a99-9629-43ee-b05a-643fb87b1a39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51c9df43-1cf3-4aee-ae03-d7d7172c50a3&quot;,&quot;58ff7bed-3629-4fbf-80b0-a826dadead23&quot;,&quot;7572cf76-e4b8-4362-8d48-f340e672749a&quot;,&quot;288a11bc-99d3-4220-8aa4-d167c69ffdd7&quot;,&quot;0cedf790-3eff-4388-abe8-ffce5eda44e9&quot;,&quot;8873522d-0ce4-4434-bc94-d44061588e58&quot;,&quot;5f1df45a-1059-46d7-bdb1-e035ffddeaa7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d4085c30-8679-4a1f-a30b-47c1d5a08bd0&quot;,&quot;title&quot;:&quot;Subreddit Controller Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;title&quot;:&quot;Create Subreddit Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Create Subreddit Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    fixedName: \&quot;Subreddit name\&quot;,\n    type: \&quot;Public\&quot;,\n    nsfw: true,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  createSubreddit: async (data, userName, profilePicture) =&gt; {\n    const response = {\n      success: true,\n      data: { _id: \&quot;10\&quot; },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.createSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  id: \&quot;10\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5558a0f3-5a18-475a-941a-756a9723313b&quot;,&quot;parentUUID&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Create Subreddit Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    type: \&quot;Public\&quot;,\n    nsfw: true,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  createSubreddit: async (data, userName, profilePicture) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.createSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04946126-c19c-4867-aa66-66e8b361186e&quot;,&quot;parentUUID&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Create Subreddit Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  createSubreddit: async (data, userName, profilePicture) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.createSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;032d987e-7d38-4c3e-9cb7-671457ddee0a&quot;,&quot;parentUUID&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Create Subreddit Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    fixedName: \&quot;Subreddit name\&quot;,\n    type: \&quot;Public\&quot;,\n    nsfw: true,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  createSubreddit: async (data, userName, profilePicture) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.ALREADY_EXISTS,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.createSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;This name is already taken\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5661e074-a1d8-4643-975e-501f210b3aa0&quot;,&quot;parentUUID&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Create Subreddit Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    fixedName: \&quot;k\&quot;,\n    type: \&quot;Public\&quot;,\n    nsfw: true,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  createSubreddit: async (data, userName, profilePicture) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n      msg: \&quot;Invalid data: A subreddit name must have more or equal then 2 characters\&quot;,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.createSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage:\n    \&quot;Invalid data: A subreddit name must have more or equal then 2 characters\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89e3ca65-7c2d-454c-b8cf-29cb6a4931f5&quot;,&quot;parentUUID&quot;:&quot;cb088cb6-f121-44db-8a95-6bf15fe28c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5558a0f3-5a18-475a-941a-756a9723313b&quot;,&quot;04946126-c19c-4867-aa66-66e8b361186e&quot;,&quot;032d987e-7d38-4c3e-9cb7-671457ddee0a&quot;,&quot;5661e074-a1d8-4643-975e-501f210b3aa0&quot;,&quot;89e3ca65-7c2d-454c-b8cf-29cb6a4931f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;199efee0-5156-435a-88ba-22ebdc6acdb6&quot;,&quot;title&quot;:&quot;get Subreddit Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test get Subreddit Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  retrieveSubreddit: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: true,\n      data: { _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    _id: \&quot;10\&quot;,\n    fixedName: \&quot;Subreddit name\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b9202b1-4f3b-41df-8c3f-75c977ba4d48&quot;,&quot;parentUUID&quot;:&quot;199efee0-5156-435a-88ba-22ebdc6acdb6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test get Subreddit Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  retrieveSubreddit: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;538ea806-bb36-40f9-9d50-9792556e00c6&quot;,&quot;parentUUID&quot;:&quot;199efee0-5156-435a-88ba-22ebdc6acdb6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test get Subreddit Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  retrieveSubreddit: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      errorMessage: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0420b70-64ee-4a8b-8a14-a1f050a6c5ca&quot;,&quot;parentUUID&quot;:&quot;199efee0-5156-435a-88ba-22ebdc6acdb6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b9202b1-4f3b-41df-8c3f-75c977ba4d48&quot;,&quot;538ea806-bb36-40f9-9d50-9792556e00c6&quot;,&quot;e0420b70-64ee-4a8b-8a14-a1f050a6c5ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;77ab4261-bae2-4a75-860f-2b7a485f6efb&quot;,&quot;title&quot;:&quot;delete Subreddit Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test delete Subreddit Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteSubreddit: async (subredditName, userId) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d80a58f-9224-4a26-a650-b174599d2284&quot;,&quot;parentUUID&quot;:&quot;77ab4261-bae2-4a75-860f-2b7a485f6efb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test delete Subreddit Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteSubreddit: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.deleteSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ec1fd47-0c18-47da-ada6-6839db1b15f7&quot;,&quot;parentUUID&quot;:&quot;77ab4261-bae2-4a75-860f-2b7a485f6efb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test delete Subreddit Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteSubreddit: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65ec6a3f-8cd3-45b4-a586-223b124e3aea&quot;,&quot;parentUUID&quot;:&quot;77ab4261-bae2-4a75-860f-2b7a485f6efb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test delete Subreddit Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteSubreddit: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_OWNER,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteSubreddit(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not the owner to this subreddit\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5de62cd9-3ead-46c5-82bb-7e8c84cdc5c2&quot;,&quot;parentUUID&quot;:&quot;77ab4261-bae2-4a75-860f-2b7a485f6efb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d80a58f-9224-4a26-a650-b174599d2284&quot;,&quot;7ec1fd47-0c18-47da-ada6-6839db1b15f7&quot;,&quot;65ec6a3f-8cd3-45b4-a586-223b124e3aea&quot;,&quot;5de62cd9-3ead-46c5-82bb-7e8c84cdc5c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4170c41c-d7f8-4b69-aace-9f9341851a6d&quot;,&quot;title&quot;:&quot;update Subreddit Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test update Subreddit Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    nsfw: false,\n  },\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateSubreddit: async (subredditName, userId, data) =&gt; {\n    const response = {\n      success: true,\n      data: {\n        fixedName: \&quot;Subreddit name\&quot;,\n        nsfw: false,\n      },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updateSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    fixedName: \&quot;Subreddit name\&quot;,\n    nsfw: false,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d538e2fa-b4e8-475d-8dfc-b8c0b5bf2861&quot;,&quot;parentUUID&quot;:&quot;4170c41c-d7f8-4b69-aace-9f9341851a6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test update Subreddit Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    nsfw: false,\n  },\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateSubreddit: async (subredditName, userId, data) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updateSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd4b1303-3b1e-47c1-ada0-0d0d167aa929&quot;,&quot;parentUUID&quot;:&quot;4170c41c-d7f8-4b69-aace-9f9341851a6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test update Subreddit Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    nsfw: false,\n  },\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateSubreddit: async (subredditName, userId, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updateSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9b5caa-d561-4052-86a8-66610035ed96&quot;,&quot;parentUUID&quot;:&quot;4170c41c-d7f8-4b69-aace-9f9341851a6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test update Subreddit Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    nsfw: false,\n  },\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateSubreddit: async (subredditName, userId, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updateSubredditSettings(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc5de629-603e-4df5-9d56-31f5ab360b22&quot;,&quot;parentUUID&quot;:&quot;4170c41c-d7f8-4b69-aace-9f9341851a6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d538e2fa-b4e8-475d-8dfc-b8c0b5bf2861&quot;,&quot;dd4b1303-3b1e-47c1-ada0-0d0d167aa929&quot;,&quot;2d9b5caa-d561-4052-86a8-66610035ed96&quot;,&quot;bc5de629-603e-4df5-9d56-31f5ab360b22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92f995a5-c268-439c-a150-419d0bd31bf4&quot;,&quot;title&quot;:&quot;/subreddits/mine/{where} Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/mine/{where} Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    where: \&quot;moderator\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsIamIn: async (userId, location) =&gt; {\n    const response = {\n      success: true,\n      data: [\n        {\n          fixedName: \&quot;Subreddit name\&quot;,\n          nsfw: false,\n        },\n      ],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.subredditsJoined(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [\n    {\n      fixedName: \&quot;Subreddit name\&quot;,\n      nsfw: false,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a704ad3-cdcb-421b-902d-ab6ea7d4e7c2&quot;,&quot;parentUUID&quot;:&quot;92f995a5-c268-439c-a150-419d0bd31bf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/mine/{where} Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsIamIn: async (userId, location) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.subredditsJoined(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter location\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f99dbd91-6631-416f-9c71-bc7bd9d3b370&quot;,&quot;parentUUID&quot;:&quot;92f995a5-c268-439c-a150-419d0bd31bf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/mine/{where} Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    where: \&quot;subscriberr\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsIamIn: async (userId, location) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.INVALID_ENUM,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.subredditsJoined(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid location value !\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28494f76-8575-4f11-8c33-5c540f954f3f&quot;,&quot;parentUUID&quot;:&quot;92f995a5-c268-439c-a150-419d0bd31bf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/mine/{where} Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    where: \&quot;subscriberr\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsIamIn: async (userId, location) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.subredditsJoined(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b54edeba-8b25-42e3-b4a4-98e1a11c03d0&quot;,&quot;parentUUID&quot;:&quot;92f995a5-c268-439c-a150-419d0bd31bf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a704ad3-cdcb-421b-902d-ab6ea7d4e7c2&quot;,&quot;f99dbd91-6631-416f-9c71-bc7bd9d3b370&quot;,&quot;28494f76-8575-4f11-8c33-5c540f954f3f&quot;,&quot;b54edeba-8b25-42e3-b4a4-98e1a11c03d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5a2e28b6-0f55-43ce-a752-6400840810ee&quot;,&quot;title&quot;:&quot;/subreddits/moderator/{username} Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/moderator/{username} Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    username: \&quot;khaled\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsModeratedBy: async (userName) =&gt; {\n    const response = {\n      success: true,\n      data: [\n        {\n          fixedName: \&quot;Subreddit name\&quot;,\n          nsfw: false,\n        },\n      ],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.subredditsModerated(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [\n    {\n      fixedName: \&quot;Subreddit name\&quot;,\n      nsfw: false,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c3e73cd-4a8b-461f-ad92-9c29ead767ea&quot;,&quot;parentUUID&quot;:&quot;5a2e28b6-0f55-43ce-a752-6400840810ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/moderator/{username} Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsModeratedBy: async (userName) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.subredditsModerated(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter userName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b5fff33-c211-49ac-a112-96217941bfa6&quot;,&quot;parentUUID&quot;:&quot;5a2e28b6-0f55-43ce-a752-6400840810ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test /subreddits/moderator/{username} Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n};\nconst UserService = {};\nconst subredditService = {\n  subredditsModeratedBy: async (userName) =&gt; {\n    const response = {\n      success: false,\n      error:subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.subredditsModerated(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7b1b292-da62-434d-baa2-135fc23fd012&quot;,&quot;parentUUID&quot;:&quot;5a2e28b6-0f55-43ce-a752-6400840810ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c3e73cd-4a8b-461f-ad92-9c29ead767ea&quot;,&quot;5b5fff33-c211-49ac-a112-96217941bfa6&quot;,&quot;a7b1b292-da62-434d-baa2-135fc23fd012&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;title&quot;:&quot;invite moderator Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31161669-d1da-426f-8c01-16b28f0a0c8e&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f6fb566-70a8-40e8-b053-ae2b0bb37ac7&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test third test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter moderatorName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31085f09-eba6-400e-bd77-9f12e3b7a05b&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;please provide a permissions\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62916661-c8ea-44c7-a742-530602d25b53&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: subredditErrors.SUBREDDIT_NOT_FOUND };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45ede208-dddd-4a16-af66-230c831ec2f8&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: userErrors.USER_IS_ALREADY_INVITED };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is already invited\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6d4ce56-795b-4d0d-afc7-dd35afdfbbed&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test 6th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: subredditErrors.NOT_MODERATOR };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;604365e2-4d5a-4ec7-b357-23bb78846cf2&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test 7th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: userErrors.USER_NOT_FOUND };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b957f32c-6e6b-420a-b35a-43ad523bc810&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test 8th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: userErrors.ALREADY_MODERATOR };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is already moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67792af0-9d81-4c5c-ba84-a1d7f5c88582&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test invite moderator Test 9th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n  },\n  body: {\n    p: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  inviteMod: async (subredditName, userId, modName, data) =&gt; {\n    return { success: false, error: subredditErrors.MONGO_ERR };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.inviteModerator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;682b9ac6-5098-4115-97d6-39eb963731c6&quot;,&quot;parentUUID&quot;:&quot;92e5ee79-5441-41e1-aa87-0bb7862e1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31161669-d1da-426f-8c01-16b28f0a0c8e&quot;,&quot;2f6fb566-70a8-40e8-b053-ae2b0bb37ac7&quot;,&quot;31085f09-eba6-400e-bd77-9f12e3b7a05b&quot;,&quot;62916661-c8ea-44c7-a742-530602d25b53&quot;,&quot;45ede208-dddd-4a16-af66-230c831ec2f8&quot;,&quot;f6d4ce56-795b-4d0d-afc7-dd35afdfbbed&quot;,&quot;604365e2-4d5a-4ec7-b357-23bb78846cf2&quot;,&quot;b957f32c-6e6b-420a-b35a-43ad523bc810&quot;,&quot;67792af0-9d81-4c5c-ba84-a1d7f5c88582&quot;,&quot;682b9ac6-5098-4115-97d6-39eb963731c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;title&quot;:&quot;ModeratorInvitation invite Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;accept\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a88c8bf-ceab-49d8-84bc-3a57f2906cbf&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;reject\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6e1153c-a25b-4744-a49d-7c51ecaafd4d&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;acceptt\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: false };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid Enum value\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6442b6d0-9fef-420f-b2d0-7277cfaa8a10&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: false };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb2ff171-f618-4542-a64d-ce2497980ef3&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    action: \&quot;accept\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: true };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dd57304-c9f7-4672-ae1d-8ef6a1f87ab2&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 6th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;accept\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c26628e7-115e-469d-aac2-2a89a2fd095a&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 7th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;accept\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: false, error: userErrors.ALREADY_MODERATOR };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user already moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99f31e23-2ac2-44a6-a006-504cee5a0bfb&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 8th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;accept\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: false, error: subredditErrors.NO_INVITATION };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;there is no moderation invitation to this subreddit\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f081c655-d71a-47bc-b553-b9b4516de8e6&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test ModeratorInvitation invite Test 9th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;subreddit\&quot;,\n    action: \&quot;reject\&quot;,\n  },\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;khaled\&quot;,\n    profilePicture: \&quot;defult.png\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleInvitation: async (\n    userId,\n    userName,\n    profilePicture,\n    subredditName,\n    action\n  ) =&gt; {\n    return { success: false, error: subredditErrors.MONGO_ERR };\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.ModeratorInvitation(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa1be45-d8b9-4a02-9b9e-ca341790511c&quot;,&quot;parentUUID&quot;:&quot;0415d968-cbf9-4721-9e5a-9e3b574507fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a88c8bf-ceab-49d8-84bc-3a57f2906cbf&quot;,&quot;f6e1153c-a25b-4744-a49d-7c51ecaafd4d&quot;,&quot;6442b6d0-9fef-420f-b2d0-7277cfaa8a10&quot;,&quot;eb2ff171-f618-4542-a64d-ce2497980ef3&quot;,&quot;8dd57304-c9f7-4672-ae1d-8ef6a1f87ab2&quot;,&quot;c26628e7-115e-469d-aac2-2a89a2fd095a&quot;,&quot;99f31e23-2ac2-44a6-a006-504cee5a0bfb&quot;,&quot;f081c655-d71a-47bc-b553-b9b4516de8e6&quot;,&quot;4fa1be45-d8b9-4a02-9b9e-ca341790511c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;title&quot;:&quot;Subscribe Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful subscribe&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Subscribe Test successful subscribe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await subredditController.subscribe(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aad917b6-e984-47a7-b737-093f2267bc67&quot;,&quot;parentUUID&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid action&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Subscribe Test invalid action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;UserService.subscribe = async () =&gt; false;\nawait subredditController.subscribe(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid subscribtion action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9678660e-295f-4ed5-8eb0-0e81ff1b6dc4&quot;,&quot;parentUUID&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;user banned&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Subscribe Test user banned&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;subredditService.subscriable = async () =&gt; {\n  return { success: false, error: subredditErrors.BANNED };\n};\nawait subredditController.subscribe(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;user is banned from subreddit\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ff54c4f-f73e-4d42-832b-cae18ca19853&quot;,&quot;parentUUID&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;subreddit not found&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Subscribe Test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;subredditService.subscriable = async () =&gt; {\n  return { success: false, error: subredditErrors.SUBREDDIT_NOT_FOUND };\n};\nawait subredditController.subscribe(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3aa11eb-6ed7-4a87-b72d-3d7d4b354d61&quot;,&quot;parentUUID&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid request&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Subscribe Test invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.params.subredditName;\nawait subredditController.subscribe(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Invalid request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6de7a86-1279-4a93-83ca-c5eefa926ba6&quot;,&quot;parentUUID&quot;:&quot;f799fbde-dae0-43c6-873d-d207e8c36801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aad917b6-e984-47a7-b737-093f2267bc67&quot;,&quot;9678660e-295f-4ed5-8eb0-0e81ff1b6dc4&quot;,&quot;2ff54c4f-f73e-4d42-832b-cae18ca19853&quot;,&quot;c3aa11eb-6ed7-4a87-b72d-3d7d4b354d61&quot;,&quot;a6de7a86-1279-4a93-83ca-c5eefa926ba6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;title&quot;:&quot;updatePermissions Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3070840-456a-409b-8d65-d0485fe52547&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;498c1df5-c8cf-4802-9335-f5da1c58e6a1&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter moderatorName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d793a5da-81b6-4772-93d6-ee109fa571f4&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2400f122-d771-49fd-b1b1-786d50b8d5ae&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cae8a65c-e506-417d-9fb9-b00387e049cc&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot; test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test  test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.CANNOT_UPDATE,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;cannot update mod higher than you in mod tree\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aba5c404-d4b2-4593-98b3-8b91b620bfb0&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 6th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4360d363-be12-4eb9-8863-d3bd93dd0d5c&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 7th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.Not_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not a moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e1764ca-57ac-44b9-98a2-887294e104fe&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updatePermissions Test 8th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  updateModeratorSettings: async (\n    subredditName,\n    userId,\n    modName,\n    data\n  ) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.updatePermissions(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f471e447-4180-45f4-8188-e27312d5dbe9&quot;,&quot;parentUUID&quot;:&quot;e6195d2d-9f50-4b80-9934-dbc8ee0ab19d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3070840-456a-409b-8d65-d0485fe52547&quot;,&quot;498c1df5-c8cf-4802-9335-f5da1c58e6a1&quot;,&quot;d793a5da-81b6-4772-93d6-ee109fa571f4&quot;,&quot;2400f122-d771-49fd-b1b1-786d50b8d5ae&quot;,&quot;cae8a65c-e506-417d-9fb9-b00387e049cc&quot;,&quot;aba5c404-d4b2-4593-98b3-8b91b620bfb0&quot;,&quot;4360d363-be12-4eb9-8863-d3bd93dd0d5c&quot;,&quot;3e1764ca-57ac-44b9-98a2-887294e104fe&quot;,&quot;f471e447-4180-45f4-8188-e27312d5dbe9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;title&quot;:&quot;leaveModerator Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaveModerator Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  leaveMod: async (userId, subredditName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaveModerator(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: {\n    _id: \&quot;10\&quot;,\n    fixedName: \&quot;Subreddit name\&quot;,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8f02712-82ea-4b63-ae32-41f80f12181d&quot;,&quot;parentUUID&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaveModerator Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  leaveMod: async (userId, subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaveModerator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b087d417-b41c-4c2a-9311-d42980104085&quot;,&quot;parentUUID&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaveModerator Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  leaveMod: async (userId, subredditName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaveModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaba3394-eacd-4f43-a4de-1df4de632d95&quot;,&quot;parentUUID&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaveModerator Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  leaveMod: async (userId, subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaveModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not a moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf0774f6-0993-4426-8dc2-b573dec94092&quot;,&quot;parentUUID&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaveModerator Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  leaveMod: async (userId, subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaveModerator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b602e37d-560b-497b-b955-ab79310a5abd&quot;,&quot;parentUUID&quot;:&quot;fcc26c6f-d313-4c5f-b1e5-3f8bca0c3293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8f02712-82ea-4b63-ae32-41f80f12181d&quot;,&quot;b087d417-b41c-4c2a-9311-d42980104085&quot;,&quot;aaba3394-eacd-4f43-a4de-1df4de632d95&quot;,&quot;cf0774f6-0993-4426-8dc2-b573dec94092&quot;,&quot;b602e37d-560b-497b-b955-ab79310a5abd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;db22802f-cf91-4564-a392-897d924ac1a0&quot;,&quot;title&quot;:&quot;Favourite Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Favourite Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleFavourite: async (userId, subredditName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.Favourite(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d573c04f-68a0-45de-b976-88537224acbd&quot;,&quot;parentUUID&quot;:&quot;db22802f-cf91-4564-a392-897d924ac1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Favourite Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleFavourite: async (userId, subredditName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.Favourite(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf21249e-de5c-4f8d-a4ba-9acb757bc010&quot;,&quot;parentUUID&quot;:&quot;db22802f-cf91-4564-a392-897d924ac1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Favourite Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleFavourite: async (userId, subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.Favourite(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32cb5c81-b3ed-457c-99b4-21595a3812b5&quot;,&quot;parentUUID&quot;:&quot;db22802f-cf91-4564-a392-897d924ac1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test Favourite Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  handleFavourite: async (userId, subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.Favourite(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baf06be0-eadd-4f19-8f96-56fed77a46c3&quot;,&quot;parentUUID&quot;:&quot;db22802f-cf91-4564-a392-897d924ac1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d573c04f-68a0-45de-b976-88537224acbd&quot;,&quot;bf21249e-de5c-4f8d-a4ba-9acb757bc010&quot;,&quot;32cb5c81-b3ed-457c-99b4-21595a3812b5&quot;,&quot;baf06be0-eadd-4f19-8f96-56fed77a46c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;306b4ad9-19aa-42b3-9f01-2987967f084a&quot;,&quot;title&quot;:&quot;favouriteSubreddits Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test favouriteSubreddits Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  getFavourites: async (userId) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.favouriteSubreddits(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f56395b-ba9c-4895-b1a5-fed3bc0780f6&quot;,&quot;parentUUID&quot;:&quot;306b4ad9-19aa-42b3-9f01-2987967f084a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test favouriteSubreddits Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  getFavourites: async (userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.favouriteSubreddits(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb3f10ad-247d-4365-83f0-0104090c3536&quot;,&quot;parentUUID&quot;:&quot;306b4ad9-19aa-42b3-9f01-2987967f084a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f56395b-ba9c-4895-b1a5-fed3bc0780f6&quot;,&quot;bb3f10ad-247d-4365-83f0-0104090c3536&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;title&quot;:&quot;banSettings Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(204).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d80839e2-83bb-40e2-9af4-7e0c05222650&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f00d42fc-13d5-4724-9ef8-a353335598b6&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter banedUser\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e69dfbb-5eb1-46bd-9b98-ed44a2a8b57a&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bffada17-c248-4c12-a421-f4d56eb0bf56&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;bann\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid Enum value [ban,unban]\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c447a3c2-ead4-4f0a-93b1-167bd2c936e1&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error:userErrors.USER_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;276ccc0a-1840-430c-82bb-1850c41f16da&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,error:userErrors.MODERATOR\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is a moderator cant make this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc33e4c4-fa8a-4ab8-99e5-6c87d9499b57&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ce62570-73d7-4231-a707-f0e483517d4a&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 7th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cccb1e7a-c8e7-4d9f-a924-a25ea32ae386&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 8th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.ALREADY_BANED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is already banned\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e0a49d8-002a-430c-8859-f63cb5407aac&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 9th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.Not_BANED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not baned to unban\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;014a4578-86d3-4ca6-8dae-bd99a66df810&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;10th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test banSettings Test 10th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;ban\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banUnban: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.banSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;901b8453-b6ca-4d8b-9449-541ac5463589&quot;,&quot;parentUUID&quot;:&quot;a44bb8a6-f7f7-4929-8d09-213fd7a0c76b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d80839e2-83bb-40e2-9af4-7e0c05222650&quot;,&quot;f00d42fc-13d5-4724-9ef8-a353335598b6&quot;,&quot;8e69dfbb-5eb1-46bd-9b98-ed44a2a8b57a&quot;,&quot;bffada17-c248-4c12-a421-f4d56eb0bf56&quot;,&quot;c447a3c2-ead4-4f0a-93b1-167bd2c936e1&quot;,&quot;276ccc0a-1840-430c-82bb-1850c41f16da&quot;,&quot;fc33e4c4-fa8a-4ab8-99e5-6c87d9499b57&quot;,&quot;3ce62570-73d7-4231-a707-f0e483517d4a&quot;,&quot;cccb1e7a-c8e7-4d9f-a924-a25ea32ae386&quot;,&quot;3e0a49d8-002a-430c-8859-f63cb5407aac&quot;,&quot;014a4578-86d3-4ca6-8dae-bd99a66df810&quot;,&quot;901b8453-b6ca-4d8b-9449-541ac5463589&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;title&quot;:&quot;muteSettings Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res, next);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(204).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99bba693-64ce-4628-a718-67b189fcdb4c&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e19a15b2-6478-417d-943a-50e24ed6a03d&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter banedUser\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e84ad2-1a3e-4640-b7d2-c054a4da9726&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bf4405c-827d-4549-bfdd-844cd1a5a10d&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;bann\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid Enum value [mute,unmute]\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee148e24-ddc8-48fb-98a7-43799b56cd01&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5804aeee-3e2f-4975-bb8e-1499e9b72d67&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 7th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d8dc249-4400-4132-bcd9-7d64a9af9233&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 7th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is a moderator cant make this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;861f2c0b-8f6e-4650-977c-85ff935d4fbc&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 8th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.ALREADY_MUTED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is already muted\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd106b0d-710d-4483-85c2-124fd6dc67b7&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 9th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.Not_MUTED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not muted to unmute\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;804aa257-bcb0-4f90-a977-023d1355999e&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;10th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test muteSettings Test 10th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;mute\&quot;,\n    userName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    punish_type: \&quot;No Spoiler\&quot;,\n    Note: \&quot;he is bad person\&quot;,\n    punishReason: \&quot;not dowing his homework\&quot;,\n    duration: 20,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muteUnmute: async (userId, subredditName, banedUser, action, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.muteSettings(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;122f20e9-e53b-4459-b3f9-019b274f2016&quot;,&quot;parentUUID&quot;:&quot;f895cd4a-3340-43b3-8861-20426626f920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99bba693-64ce-4628-a718-67b189fcdb4c&quot;,&quot;e19a15b2-6478-417d-943a-50e24ed6a03d&quot;,&quot;57e84ad2-1a3e-4640-b7d2-c054a4da9726&quot;,&quot;2bf4405c-827d-4549-bfdd-844cd1a5a10d&quot;,&quot;ee148e24-ddc8-48fb-98a7-43799b56cd01&quot;,&quot;5804aeee-3e2f-4975-bb8e-1499e9b72d67&quot;,&quot;6d8dc249-4400-4132-bcd9-7d64a9af9233&quot;,&quot;861f2c0b-8f6e-4650-977c-85ff935d4fbc&quot;,&quot;dd106b0d-710d-4483-85c2-124fd6dc67b7&quot;,&quot;804aa257-bcb0-4f90-a977-023d1355999e&quot;,&quot;122f20e9-e53b-4459-b3f9-019b274f2016&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;title&quot;:&quot;bannedUsers Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test bannedUsers Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banned: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.bannedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15d74e7f-1704-4428-85b4-ba357ee8b8ac&quot;,&quot;parentUUID&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test bannedUsers Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banned: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.bannedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2d613d7-9e84-4ccb-ab72-1e74e41e3546&quot;,&quot;parentUUID&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test bannedUsers Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banned: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.bannedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;339e106b-25af-44ad-96e4-154ed73ee78e&quot;,&quot;parentUUID&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test bannedUsers Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banned: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.bannedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcfadbc8-0e9f-4f83-9b2b-694d51ed1220&quot;,&quot;parentUUID&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test bannedUsers Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  banned: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.bannedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fb94841-0cad-4ded-9aa3-830d866aede4&quot;,&quot;parentUUID&quot;:&quot;ae0ba9f2-9cff-4205-a89a-516f1cb7b5cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15d74e7f-1704-4428-85b4-ba357ee8b8ac&quot;,&quot;d2d613d7-9e84-4ccb-ab72-1e74e41e3546&quot;,&quot;339e106b-25af-44ad-96e4-154ed73ee78e&quot;,&quot;bcfadbc8-0e9f-4f83-9b2b-694d51ed1220&quot;,&quot;3fb94841-0cad-4ded-9aa3-830d866aede4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;title&quot;:&quot;mutedUsers Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test mutedUsers Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muted: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.mutedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c53e28d5-08a5-4407-9994-fcc2d65df7b7&quot;,&quot;parentUUID&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test mutedUsers Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muted: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;khaled\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.mutedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7884be21-756c-4b8e-bd3a-6ea53b675b26&quot;,&quot;parentUUID&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test mutedUsers Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muted: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.mutedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea7c6805-82e8-431f-9053-ef5df81b919c&quot;,&quot;parentUUID&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test mutedUsers Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muted: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.mutedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de6dfdce-8b77-42a6-913e-634c1f5a1e89&quot;,&quot;parentUUID&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test mutedUsers Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  muted: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.mutedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c67902c7-aed2-466c-aba6-4615f9b78240&quot;,&quot;parentUUID&quot;:&quot;0649c882-b202-46c4-98f1-07774f49f54b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c53e28d5-08a5-4407-9994-fcc2d65df7b7&quot;,&quot;7884be21-756c-4b8e-bd3a-6ea53b675b26&quot;,&quot;ea7c6805-82e8-431f-9053-ef5df81b919c&quot;,&quot;de6dfdce-8b77-42a6-913e-634c1f5a1e89&quot;,&quot;c67902c7-aed2-466c-aba6-4615f9b78240&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;title&quot;:&quot;addRule Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c23a31e0-5032-4807-a1b6-1bb3517f9737&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6574596e-2deb-42fe-9c7a-710da0e5b0b7&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter rule title\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9f8619f-2a06-4051-b968-d138461320fb&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2720c255-9c84-433b-aab6-b07f1ac96da3&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598fc93b-8ae4-456d-a73e-acc8cf78881f&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.RULE_TAKEN,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;this title is already taken\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1939a68-7781-4e7d-8cdf-3d9a1a840d76&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot; 7th success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test addRule Test  7th success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  addRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.addRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bcf9370-fc49-4f8f-9b68-5e380c4255aa&quot;,&quot;parentUUID&quot;:&quot;9a933ea2-ee94-4ae7-9435-7c963061befb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c23a31e0-5032-4807-a1b6-1bb3517f9737&quot;,&quot;6574596e-2deb-42fe-9c7a-710da0e5b0b7&quot;,&quot;c9f8619f-2a06-4051-b968-d138461320fb&quot;,&quot;2720c255-9c84-433b-aab6-b07f1ac96da3&quot;,&quot;598fc93b-8ae4-456d-a73e-acc8cf78881f&quot;,&quot;c1939a68-7781-4e7d-8cdf-3d9a1a840d76&quot;,&quot;3bcf9370-fc49-4f8f-9b68-5e380c4255aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;title&quot;:&quot;editRule Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31c6288a-b1d5-43a9-b105-eb1345503ea6&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c8164e5-3295-46a0-af3a-a90d072aa1b5&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter rule title\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;979f9a88-5f5d-40b1-887e-62c5b2332b5f&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d858f949-4197-4a25-884c-cb8c8143c0f8&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;707bf80e-bb9c-4a86-b7c7-c01d26f7e91e&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.RULE_TAKEN,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;this title is already taken\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71844c11-232f-4f44-9798-96d6bdfe19c9&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot; 7th success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test editRule Test  7th success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  editRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.editRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bee33c1-4405-4d25-8584-ba9af2f8289c&quot;,&quot;parentUUID&quot;:&quot;d2550123-675c-4172-91e0-e3ab38a60a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31c6288a-b1d5-43a9-b105-eb1345503ea6&quot;,&quot;1c8164e5-3295-46a0-af3a-a90d072aa1b5&quot;,&quot;979f9a88-5f5d-40b1-887e-62c5b2332b5f&quot;,&quot;d858f949-4197-4a25-884c-cb8c8143c0f8&quot;,&quot;707bf80e-bb9c-4a86-b7c7-c01d26f7e91e&quot;,&quot;71844c11-232f-4f44-9798-96d6bdfe19c9&quot;,&quot;8bee33c1-4405-4d25-8584-ba9af2f8289c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;title&quot;:&quot;deleteRule Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09ff8116-ce7e-4771-bd3f-7c9844a29b7d&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test 2nd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8a397a8-aabd-49e8-a9e1-548dedfa9bec&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter rule title\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dd3d6d6-2c1f-4b46-9939-d66d5fd0bf91&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7ec3881-c391-497c-b38c-44f6e89b6cf2&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b847c9f9-1f5f-4cf6-ba0a-eb3f49852cc1&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.RULE_TAKEN,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;this title is already taken\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16bdd88f-e5dc-4013-8061-adf624f68433&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot; 7th success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deleteRule Test  7th success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    title: \&quot;rule 1\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  deleteRule: async (subredditName, userId, title, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deleteRule(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41358c21-15a9-4b2b-8731-0e46e77032a9&quot;,&quot;parentUUID&quot;:&quot;e267de0a-ed41-4eb1-98f5-a60f5e59b8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09ff8116-ce7e-4771-bd3f-7c9844a29b7d&quot;,&quot;b8a397a8-aabd-49e8-a9e1-548dedfa9bec&quot;,&quot;1dd3d6d6-2c1f-4b46-9939-d66d5fd0bf91&quot;,&quot;e7ec3881-c391-497c-b38c-44f6e89b6cf2&quot;,&quot;b847c9f9-1f5f-4cf6-ba0a-eb3f49852cc1&quot;,&quot;16bdd88f-e5dc-4013-8061-adf624f68433&quot;,&quot;41358c21-15a9-4b2b-8731-0e46e77032a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;title&quot;:&quot;modPosts Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [\n    {\n      _id: \&quot;10\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;414df1a6-2340-4ea4-9d1c-24975b9de269&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;574f2f31-ae9e-42f2-bd0f-1f5cfeb6c125&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 3rd test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter location\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5885e274-0760-47ce-af32-c91bbba8b6de&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b6d490a-59fb-44a2-bec4-aced253a74e1&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 5th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20fcee4c-3254-460a-a59a-578d04a70e4b&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 6th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dbf64dd-5409-4e02-b766-8ecb2b204159&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test modPosts Test 7th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    location: \&quot;spammed\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedPosts: async (userId, name, checkOnly) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.modPosts(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef52a12f-41c8-4018-803a-147c21ce4868&quot;,&quot;parentUUID&quot;:&quot;79552ee5-a15f-43e0-abf1-93861da75d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;414df1a6-2340-4ea4-9d1c-24975b9de269&quot;,&quot;574f2f31-ae9e-42f2-bd0f-1f5cfeb6c125&quot;,&quot;5885e274-0760-47ce-af32-c91bbba8b6de&quot;,&quot;5b6d490a-59fb-44a2-bec4-aced253a74e1&quot;,&quot;20fcee4c-3254-460a-a59a-578d04a70e4b&quot;,&quot;4dbf64dd-5409-4e02-b766-8ecb2b204159&quot;,&quot;ef52a12f-41c8-4018-803a-147c21ce4868&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;33046c54-48e6-4559-ad66-fee092123421&quot;,&quot;title&quot;:&quot;leaderboardCategory Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardCategory Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    category: \&quot;sport\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardCategory(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [\n    {\n      _id: \&quot;10\&quot;,\n      fixedName: \&quot;Subreddit name\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b43592-fcf0-472d-8a95-25d0be9737b5&quot;,&quot;parentUUID&quot;:&quot;33046c54-48e6-4559-ad66-fee092123421&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardCategory Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardCategory(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter location\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af575b09-3717-4ea8-bd92-e2bbdd77ef45&quot;,&quot;parentUUID&quot;:&quot;33046c54-48e6-4559-ad66-fee092123421&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardCategory Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    category: \&quot;sport\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardCategory(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1976c5b-2095-43ca-be58-112265848187&quot;,&quot;parentUUID&quot;:&quot;33046c54-48e6-4559-ad66-fee092123421&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardCategory Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    category: \&quot;sport\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  categorizedSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardCategory(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e12c84ba-4626-440d-999c-a743e3ae1e30&quot;,&quot;parentUUID&quot;:&quot;33046c54-48e6-4559-ad66-fee092123421&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8b43592-fcf0-472d-8a95-25d0be9737b5&quot;,&quot;af575b09-3717-4ea8-bd92-e2bbdd77ef45&quot;,&quot;c1976c5b-2095-43ca-be58-112265848187&quot;,&quot;e12c84ba-4626-440d-999c-a743e3ae1e30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;1ee215ed-3c19-47a6-b803-91ef12f4c79d&quot;,&quot;title&quot;:&quot;leaderboardRandom Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardRandom Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  randomSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardRandom(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [\n    {\n      _id: \&quot;10\&quot;,\n      fixedName: \&quot;Subreddit name\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b21776d2-92cc-435b-8e31-6cb3915dc446&quot;,&quot;parentUUID&quot;:&quot;1ee215ed-3c19-47a6-b803-91ef12f4c79d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardRandom Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  randomSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, fixedName: \&quot;Subreddit name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.leaderboardRandom(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter location\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e92216f-b962-40ab-883f-ef7d54509baf&quot;,&quot;parentUUID&quot;:&quot;1ee215ed-3c19-47a6-b803-91ef12f4c79d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardRandom Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  randomSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.leaderboardRandom(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64c18631-6e37-459c-8bf9-39135e09b0e7&quot;,&quot;parentUUID&quot;:&quot;1ee215ed-3c19-47a6-b803-91ef12f4c79d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test leaderboardRandom Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  randomSubreddits: async (category, query) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.leaderboardRandom(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;378143f7-62fe-43e1-bb5f-4480f51edcfc&quot;,&quot;parentUUID&quot;:&quot;1ee215ed-3c19-47a6-b803-91ef12f4c79d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b21776d2-92cc-435b-8e31-6cb3915dc446&quot;,&quot;1e92216f-b962-40ab-883f-ef7d54509baf&quot;,&quot;64c18631-6e37-459c-8bf9-39135e09b0e7&quot;,&quot;378143f7-62fe-43e1-bb5f-4480f51edcfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;title&quot;:&quot;approveUser Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a2102f-1a9f-41f3-b823-ca024b247db5&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d5f49a3-9717-4bd0-b7f5-7393040a1f81&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\n// console.log(res.status(400).json)\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;453043a8-6aed-4445-8cb3-82501e334e31&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter approvedUser\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c97b876-e443-43df-97dd-34aa0b9e9bc9&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d303f5e-c376-4bda-a0a1-1489214f224c&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 6th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6aee9493-e743-4b49-bdfc-13884e0b035b&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 7th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage:\n    \&quot;user is a moderator cant make this action (he is already approved by default)\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26f250bc-e91a-4061-a178-f95f52aa0947&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 8th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.ALREADY_APPROVED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is already approved before\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26d3636f-ffc9-4fc4-9a12-22b8e1df20c5&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;9th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 9th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.NOT_APPROVED,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not approved to disapprove\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1e62bcd-f8e7-4d72-9690-2fba220fe6ff&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;10th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approveUser Test 10th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    action: \&quot;approve\&quot;,\n    userName: \&quot;tot\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approveUser: async (userId, subredditName, approvedUser, action) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approveUser(req, res, next);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62d56ff0-4ba4-44b4-9659-67eeb1c5fd89&quot;,&quot;parentUUID&quot;:&quot;20d57fdf-e0b0-491f-817b-752874b43049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39a2102f-1a9f-41f3-b823-ca024b247db5&quot;,&quot;3d5f49a3-9717-4bd0-b7f5-7393040a1f81&quot;,&quot;453043a8-6aed-4445-8cb3-82501e334e31&quot;,&quot;5c97b876-e443-43df-97dd-34aa0b9e9bc9&quot;,&quot;0d303f5e-c376-4bda-a0a1-1489214f224c&quot;,&quot;6aee9493-e743-4b49-bdfc-13884e0b035b&quot;,&quot;26f250bc-e91a-4061-a178-f95f52aa0947&quot;,&quot;26d3636f-ffc9-4fc4-9a12-22b8e1df20c5&quot;,&quot;f1e62bcd-f8e7-4d72-9690-2fba220fe6ff&quot;,&quot;62d56ff0-4ba4-44b4-9659-67eeb1c5fd89&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;title&quot;:&quot;approvedUsers Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approvedUsers Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approved: async (subredditName, userId) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approvedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: \&quot;10\&quot;, userName: \&quot;name\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5c45c9b-44d2-4b13-8904-2de88ac557e7&quot;,&quot;parentUUID&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approvedUsers Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approved: async (subredditName, userId) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, userName: \&quot;name\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approvedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1aaea022-cd11-4d04-9099-d4f861e6ea9a&quot;,&quot;parentUUID&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approvedUsers Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approved: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approvedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cb40298-6a48-461d-ae2e-a7829506315c&quot;,&quot;parentUUID&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approvedUsers Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approved: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approvedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66a414fd-af74-4637-bb82-2e8de827daba&quot;,&quot;parentUUID&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test approvedUsers Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  approved: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.approvedUsers(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80da7919-a959-4b1f-ab1f-df6386ddaca1&quot;,&quot;parentUUID&quot;:&quot;c18f0601-83d8-4764-b487-c5068bf5ae48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5c45c9b-44d2-4b13-8904-2de88ac557e7&quot;,&quot;1aaea022-cd11-4d04-9099-d4f861e6ea9a&quot;,&quot;5cb40298-6a48-461d-ae2e-a7829506315c&quot;,&quot;66a414fd-af74-4637-bb82-2e8de827daba&quot;,&quot;80da7919-a959-4b1f-ab1f-df6386ddaca1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3b39f19c-01ea-4b13-a241-8899b62f9b4c&quot;,&quot;title&quot;:&quot;reels Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test reels Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    topics: \&quot;All\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  reels: async (topic, query) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: \&quot;10\&quot;, type: \&quot;video\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.reels(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: \&quot;10\&quot;, type: \&quot;video\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3877a3f-77b9-4a9d-9304-a974fa834867&quot;,&quot;parentUUID&quot;:&quot;3b39f19c-01ea-4b13-a241-8899b62f9b4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test reels Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n};\nconst UserService = {};\nconst subredditService = {\n  reels: async (topic, query) =&gt; {\n    const response = {};\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.reels(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter topic\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a986304-47b4-4cb3-846a-eadfd58702a0&quot;,&quot;parentUUID&quot;:&quot;3b39f19c-01ea-4b13-a241-8899b62f9b4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test reels Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    topics: \&quot;All\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  reels: async (topic, query) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.reels(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6a13916-81c9-4501-a7c9-a5ef5767cff7&quot;,&quot;parentUUID&quot;:&quot;3b39f19c-01ea-4b13-a241-8899b62f9b4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test reels Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    topics: \&quot;All\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  reels: async (topic, query) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.reels(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b3fbe4b-ed10-4473-8e40-31fff0722fac&quot;,&quot;parentUUID&quot;:&quot;3b39f19c-01ea-4b13-a241-8899b62f9b4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f3877a3f-77b9-4a9d-9304-a974fa834867&quot;,&quot;6a986304-47b4-4cb3-846a-eadfd58702a0&quot;,&quot;d6a13916-81c9-4501-a7c9-a5ef5767cff7&quot;,&quot;9b3fbe4b-ed10-4473-8e40-31fff0722fac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;title&quot;:&quot;traffic Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test traffic Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    type: \&quot;year\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  traffic: async (subredditName, userId, type) =&gt; {\n    const response = {\n      success: true,\n      data: [{ _id: 2022, numOfUsers: 20000 }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.traffic(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ _id: 2022, numOfUsers: 20000 }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d495ad89-c672-4797-afec-c62b694e4c2c&quot;,&quot;parentUUID&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test traffic Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    type: \&quot;year\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  traffic: async (subredditName, userId, type) =&gt; {\n    const response = {};\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.traffic(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter topic\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c392f9cd-9018-4dde-976b-b6ddc140f110&quot;,&quot;parentUUID&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test traffic Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    type: \&quot;year\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  traffic: async (subredditName, userId, type) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.traffic(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48b9bc86-0ae8-4a9f-8545-a9e3e1136f11&quot;,&quot;parentUUID&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test traffic Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    type: \&quot;year\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  traffic: async (subredditName, userId, type) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.traffic(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this request\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5d62140-5293-4acd-9384-03195a43cd6e&quot;,&quot;parentUUID&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test traffic Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    type: \&quot;year\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  traffic: async (subredditName, userId, type) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.traffic(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76cda90d-428a-4d2a-bb9b-0db934e74e39&quot;,&quot;parentUUID&quot;:&quot;92607d6e-c34c-448b-b654-e7c59d6ba6cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d495ad89-c672-4797-afec-c62b694e4c2c&quot;,&quot;c392f9cd-9018-4dde-976b-b6ddc140f110&quot;,&quot;48b9bc86-0ae8-4a9f-8545-a9e3e1136f11&quot;,&quot;b5d62140-5293-4acd-9384-03195a43cd6e&quot;,&quot;76cda90d-428a-4d2a-bb9b-0db934e74e39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;title&quot;:&quot;pendingInvetations Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test pendingInvetations Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  invitations: async (subredditName, userId) =&gt; {\n    const response = {\n      success: true,\n      data: [{ user: {}, inviteDate: \&quot;22/12/2022\&quot; }],\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.pendingInvetations(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: [{ user: {}, inviteDate: \&quot;22/12/2022\&quot; }],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa2835b1-00c4-450e-b546-691f3d1c7c44&quot;,&quot;parentUUID&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test pendingInvetations Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  invitations: async (subredditName, userId) =&gt; {\n    const response = {};\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.pendingInvetations(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63ef1a58-f6d1-4bca-b08f-c755f0eab7e6&quot;,&quot;parentUUID&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test pendingInvetations Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  invitations: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.pendingInvetations(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a354449-13a7-4578-b317-38becbe3d981&quot;,&quot;parentUUID&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test pendingInvetations Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  invitations: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.pendingInvetations(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1d625a3-5ec2-4514-b1a1-7607eb40cf69&quot;,&quot;parentUUID&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test pendingInvetations Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  invitations: async (subredditName, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.pendingInvetations(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d764364-ab3f-4923-9499-ab2eefbc352a&quot;,&quot;parentUUID&quot;:&quot;f4c8d30b-7dfd-4836-ba9e-8b4ff067d2fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa2835b1-00c4-450e-b546-691f3d1c7c44&quot;,&quot;63ef1a58-f6d1-4bca-b08f-c755f0eab7e6&quot;,&quot;1a354449-13a7-4578-b317-38becbe3d981&quot;,&quot;b1d625a3-5ec2-4514-b1a1-7607eb40cf69&quot;,&quot;6d764364-ab3f-4923-9499-ab2eefbc352a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;title&quot;:&quot;deletemoderator Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1st test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 1st test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res, next);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa99b1db-704f-41fc-9ded-0abf4c8541d0&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc775829-64bf-40ee-9425-a5b3d6d3630e&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    moderatorName: \&quot;khaled\&quot;,\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.CANNOT_DELETE,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;canot delete mod higher than you in mod tree\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e136d939-136a-46ca-b786-9363f7add85a&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter moderatorName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c648df0-9f2a-478b-9484-a55865d0a847&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c43a929-f0a8-45ca-83ff-d3b464443cfa&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(401);\nexpect(res.status(401).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;you are not moderator to preform this action\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bef99288-08a1-4fc7-ba68-6c45c5ce08dd&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 6th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc9f7ccf-a249-4996-9e50-95226b1bba8b&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 7th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName, data) =&gt; {\n    const response = {\n      success: false,\n      error: userErrors.Not_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;user is not a moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38542fff-fafb-4267-872f-7d7d2b2afda6&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;8th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test deletemoderator Test 8th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    moderatorName: \&quot;khaled\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {\n    permissions: {\n      all: true,\n      access: true,\n      config: true,\n      flair: true,\n      posts: true,\n    },\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  deleteMod: async (subredditName, userId, modName, data) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.deletemoderator(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01fe391a-72ed-4642-8f6a-160a291f2cb3&quot;,&quot;parentUUID&quot;:&quot;06b71918-a30e-4c57-973e-a03474d03b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa99b1db-704f-41fc-9ded-0abf4c8541d0&quot;,&quot;fc775829-64bf-40ee-9425-a5b3d6d3630e&quot;,&quot;e136d939-136a-46ca-b786-9363f7add85a&quot;,&quot;6c648df0-9f2a-478b-9484-a55865d0a847&quot;,&quot;9c43a929-f0a8-45ca-83ff-d3b464443cfa&quot;,&quot;bef99288-08a1-4fc7-ba68-6c45c5ce08dd&quot;,&quot;fc9f7ccf-a249-4996-9e50-95226b1bba8b&quot;,&quot;38542fff-fafb-4267-872f-7d7d2b2afda6&quot;,&quot;01fe391a-72ed-4642-8f6a-160a291f2cb3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;566fa20f-1d33-42ca-b476-fd6e7fd2d317&quot;,&quot;title&quot;:&quot;getModerators Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test getModerators Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  mods: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: { user: { _id: \&quot;10\&quot; }, morTime: \&quot;22/2/2020\&quot; },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getModerators(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  data: { user: { _id: \&quot;10\&quot; }, morTime: \&quot;22/2/2020\&quot; },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b7a5f12-5b32-4c05-a008-8bfd556c6f47&quot;,&quot;parentUUID&quot;:&quot;566fa20f-1d33-42ca-b476-fd6e7fd2d317&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test getModerators Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  mods: async (subredditName) =&gt; {\n    const response = {\n      success: true,\n      data: { user: { _id: \&quot;10\&quot; }, morTime: \&quot;22/2/2020\&quot; },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getModerators(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Missing required parameter subredditName\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f3e19fa-039c-4453-b10e-68aaddfb57e7&quot;,&quot;parentUUID&quot;:&quot;566fa20f-1d33-42ca-b476-fd6e7fd2d317&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test getModerators Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  mods: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getModerators(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34d25f1e-a564-4401-a3b9-d65c5b03f837&quot;,&quot;parentUUID&quot;:&quot;566fa20f-1d33-42ca-b476-fd6e7fd2d317&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test getModerators Test 4th test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n};\nconst UserService = {};\nconst subredditService = {\n  mods: async (subredditName) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\n// console.log(subredditController);\nawait subredditController.getModerators(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: undefined,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03af3a90-91e2-45ad-83d0-93c2c3e23f40&quot;,&quot;parentUUID&quot;:&quot;566fa20f-1d33-42ca-b476-fd6e7fd2d317&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b7a5f12-5b32-4c05-a008-8bfd556c6f47&quot;,&quot;4f3e19fa-039c-4453-b10e-68aaddfb57e7&quot;,&quot;34d25f1e-a564-4401-a3b9-d65c5b03f837&quot;,&quot;03af3a90-91e2-45ad-83d0-93c2c3e23f40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;title&quot;:&quot;updateFlair Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\subredditController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\subredditController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updateFlair Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    flairId: \&quot;10\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  updateFlair: async (subredditName, flairId, data, userId) =&gt; {\n    const response = {\n      success: true,\n      data: { _id: \&quot;10\&quot; },\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;OK\&quot;,\n  data: { _id: \&quot;10\&quot; },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ca6a50f-d7b7-4582-9ea8-1ddef5dce4f9&quot;,&quot;parentUUID&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updateFlair Test 2nd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  updateFlair: async (subredditName, flairId, data, userId) =&gt; {\n    const response = {};\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;Missing required parameter\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c7180c5-1215-4d19-8559-5f447be3e88b&quot;,&quot;parentUUID&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updateFlair Test 3rd test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    flairId: \&quot;10\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  updateFlair: async (subredditName, flairId, data, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.NOT_MODERATOR,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(403);\nexpect(res.status(403).json).to.have.been.calledWith({\n  status: \&quot;Forbidden\&quot;,\n  message: \&quot;Not a subreddit moderator\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e95a220-195e-4666-ab23-072610a0aefd&quot;,&quot;parentUUID&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updateFlair Test 4th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    flairId: \&quot;10\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  updateFlair: async (subredditName, flairId, data, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;Not Found\&quot;,\n  message: \&quot;Subreddit not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b732ae2-9e0a-417c-9c73-640e400c8075&quot;,&quot;parentUUID&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test fail&quot;,&quot;fullTitle&quot;:&quot;Subreddit Controller Test updateFlair Test 5th test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {\n    subredditName: \&quot;Subreddit name\&quot;,\n    flairId: \&quot;10\&quot;,\n  },\n  user: {\n    _id: \&quot;10\&quot;,\n    userName: \&quot;khaled hesham\&quot;,\n  },\n  body: {},\n};\nconst UserService = {};\nconst subredditService = {\n  updateFlair: async (subredditName, flairId, data, userId) =&gt; {\n    const response = {\n      success: false,\n      error: subredditErrors.FLAIR_NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst subredditController = new SubredditController({\n  subredditService,\n  UserService,\n});\nawait subredditController.updateFlair(req, res);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;Not Found\&quot;,\n  message: \&quot;Flair not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53b2292d-8824-491d-8092-0d5b6d3af54f&quot;,&quot;parentUUID&quot;:&quot;05c37179-6fe2-4470-8fdf-56ae2fb85c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ca6a50f-d7b7-4582-9ea8-1ddef5dce4f9&quot;,&quot;4c7180c5-1215-4d19-8559-5f447be3e88b&quot;,&quot;8e95a220-195e-4666-ab23-072610a0aefd&quot;,&quot;5b732ae2-9e0a-417c-9c73-640e400c8075&quot;,&quot;53b2292d-8824-491d-8092-0d5b6d3af54f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e29959a7-b726-483f-86d7-34e322cc2d3f&quot;,&quot;title&quot;:&quot;User Controller Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f960c15a-9a65-463a-8e6f-f60aee4f83d6&quot;,&quot;title&quot;:&quot;get me Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test get me Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n    profilePicture: \&quot;\&quot;,\n    profileBackground: \&quot;\&quot;,\n    canbeFollowed: true,\n    lastUpdatedPassword: \&quot;\&quot;,\n    followersCount: 0,\n    friendsCount: 0,\n    accountActivated: false,\n    gender: \&quot;male\&quot;,\n    displayName: \&quot;ahmed\&quot;,\n    postKarma: 1,\n    commentKarma: 1,\n    joinDate: \&quot;\&quot;,\n    description: \&quot;\&quot;,\n    adultContent: false,\n    nsfw: false,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n    emailVerified: true,\n  },\n};\nconst userController = new UserController({});\nawait userController.getMe(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  user: {\n    id: \&quot;1\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    email: \&quot;ahmed@gmail.com\&quot;,\n    profilePicture: \&quot;\&quot;,\n    profileBackground: \&quot;\&quot;,\n    canbeFollowed: true,\n    lastUpdatedPassword: \&quot;\&quot;,\n    followersCount: 0,\n    friendsCount: 0,\n    accountActivated: false,\n    gender: \&quot;male\&quot;,\n    displayName: \&quot;ahmed\&quot;,\n    postKarma: 1,\n    commentKarma: 1,\n    createdAt: \&quot;\&quot;,\n    description: \&quot;\&quot;,\n    adultContent: false,\n    nsfw: false,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n    emailVerified: true,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af434fd9-4afe-48d8-bb91-1188a230ac28&quot;,&quot;parentUUID&quot;:&quot;f960c15a-9a65-463a-8e6f-f60aee4f83d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af434fd9-4afe-48d8-bb91-1188a230ac28&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3c6a05d7-cf0c-49a8-ab11-c87f3491c135&quot;,&quot;title&quot;:&quot;get preferences Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test get preferences Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    canbeFollowed: true,\n    nsfw: false,\n    gender: \&quot;male\&quot;,\n    adultContent: false,\n    autoplayMedia: true,\n    displayName: \&quot;Ahmed Sabry\&quot;,\n    profilePicture: \&quot;icon.png\&quot;,\n    profileBackground: \&quot;icon.png\&quot;,\n    description: \&quot;\&quot;,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n    emailVerified: true,\n  },\n};\nconst UserService = {\n  getPrefs: (user) =&gt; {\n    let response = {\n      canbeFollowed: true,\n      nsfw: false,\n      gender: \&quot;male\&quot;,\n      adultContent: false,\n      autoplayMedia: true,\n      displayName: \&quot;Ahmed Sabry\&quot;,\n      profilePicture: \&quot;icon.png\&quot;,\n      profileBackground: \&quot;icon.png\&quot;,\n      description: \&quot;\&quot;,\n      country: \&quot;egypt\&quot;,\n      socialLinks: [],\n      emailVerified: true,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.getPrefs(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  prefs: {\n    canbeFollowed: true,\n    nsfw: false,\n    gender: \&quot;male\&quot;,\n    adultContent: false,\n    autoplayMedia: true,\n    displayName: \&quot;Ahmed Sabry\&quot;,\n    profilePicture: \&quot;icon.png\&quot;,\n    profileBackground: \&quot;icon.png\&quot;,\n    description: \&quot;\&quot;,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n    emailVerified: true,\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bef67510-e3f4-4431-9ebe-854dff333977&quot;,&quot;parentUUID&quot;:&quot;3c6a05d7-cf0c-49a8-ab11-c87f3491c135&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bef67510-e3f4-4431-9ebe-854dff333977&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a5bebdd5-8c51-491c-8139-1c8e147bf78f&quot;,&quot;title&quot;:&quot;update preferences Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test update preferences Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    email: \&quot;ahmedAgmail.com\&quot;,\n    userName: \&quot;ahmed\&quot;,\n    canbeFollowed: true,\n    nsfw: false,\n    gender: \&quot;male\&quot;,\n    adultContent: false,\n    autoplayMedia: true,\n    displayName: \&quot;Ahmed Sabry\&quot;,\n    profilePicture: \&quot;icon.png\&quot;,\n    profileBackground: \&quot;icon.png\&quot;,\n    description: \&quot;\&quot;,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n  },\n};\nconst UserService = {\n  updatePrefs: (user) =&gt; {\n    let response = {\n      canbeFollowed: false,\n      nsfw: false,\n      gender: \&quot;male\&quot;,\n      adultContent: false,\n      autoplayMedia: true,\n      displayName: \&quot;Ahmed Sabry\&quot;,\n      profilePicture: \&quot;icon.png\&quot;,\n      profileBackground: \&quot;icon.png\&quot;,\n      description: \&quot;\&quot;,\n      country: \&quot;egypt\&quot;,\n      socialLinks: [],\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.updatePrefs(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  prefs: {\n    canbeFollowed: false,\n    nsfw: false,\n    gender: \&quot;male\&quot;,\n    adultContent: false,\n    autoplayMedia: true,\n    displayName: \&quot;Ahmed Sabry\&quot;,\n    profilePicture: \&quot;icon.png\&quot;,\n    profileBackground: \&quot;icon.png\&quot;,\n    description: \&quot;\&quot;,\n    country: \&quot;egypt\&quot;,\n    socialLinks: [],\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c066348-6009-4485-9ecb-78a98781601d&quot;,&quot;parentUUID&quot;:&quot;a5bebdd5-8c51-491c-8139-1c8e147bf78f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c066348-6009-4485-9ecb-78a98781601d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5e1917e6-8ad0-42d5-9800-e5722e621634&quot;,&quot;title&quot;:&quot;about user Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test about user Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    meUserRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;followed\&quot; },\n    ],\n    userMeRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;none\&quot; },\n    ],\n  },\n  params: {\n    userName: \&quot;name\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: (user) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        _id: \&quot;2\&quot;,\n        userName: \&quot;mohamed\&quot;,\n        profilePicture: \&quot;\&quot;,\n        profileBackground: \&quot;\&quot;,\n        canbeFollowed: true,\n        followersCount: 0,\n        friendsCount: 0,\n        gender: \&quot;male\&quot;,\n        displayName: \&quot;mohamed\&quot;,\n        postKarma: 1,\n        commentKarma: 2,\n        description: \&quot;\&quot;,\n        joinDate: \&quot;\&quot;,\n        nsfw: false,\n        autoplayMedia: false,\n        adultContent: false,\n        adultContent: false,\n        country: \&quot;egypt\&quot;,\n        socialLinks: [],\n      },\n    };\n    return response;\n  },\n  about: (me, user) =&gt; {\n    let searchUser = {\n      _id: \&quot;2\&quot;,\n      userName: \&quot;mohamed\&quot;,\n      profilePicture: \&quot;\&quot;,\n      profileBackground: \&quot;\&quot;,\n      canbeFollowed: true,\n      followersCount: 0,\n      friendsCount: 0,\n      gender: \&quot;male\&quot;,\n      displayName: \&quot;mohamed\&quot;,\n      postKarma: 1,\n      commentKarma: 2,\n      description: \&quot;\&quot;,\n      createdAt: \&quot;\&quot;,\n      nsfw: false,\n      autoplayMedia: false,\n      adultContent: false,\n      adultContent: false,\n      country: \&quot;egypt\&quot;,\n      socialLinks: [],\n      isFollowed: true,\n      isBlocked: false,\n    };\n    return searchUser;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.about(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  user: {\n    _id: \&quot;2\&quot;,\n    userName: \&quot;mohamed\&quot;,\n    profilePicture: \&quot;\&quot;,\n    profileBackground: \&quot;\&quot;,\n    canbeFollowed: true,\n    followersCount: 0,\n    friendsCount: 0,\n    gender: \&quot;male\&quot;,\n    displayName: \&quot;mohamed\&quot;,\n    postKarma: 1,\n    commentKarma: 2,\n    description: \&quot;\&quot;,\n    createdAt: \&quot;\&quot;,\n    nsfw: false,\n    autoplayMedia: false,\n    adultContent: false,\n    country: \&quot;egypt\&quot;,\n    isFollowed: true,\n    isBlocked: false,\n    socialLinks: [],\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bbb9cd2-7aee-4a70-8e41-9add11d20e46&quot;,&quot;parentUUID&quot;:&quot;5e1917e6-8ad0-42d5-9800-e5722e621634&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail username not found&quot;,&quot;fullTitle&quot;:&quot;User Controller Test about user Test second test fail username not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    meUserRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;followed\&quot; },\n    ],\n    userMeRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;none\&quot; },\n    ],\n  },\n  params: {\n    userName: \&quot;name\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: (user) =&gt; {\n    let response = {\n      success: false,\n      error: userErrors.USER_NOT_FOUND,\n      msg: \&quot;User Not Found\&quot;,\n    };\n    return response;\n  },\n  about: (me, user) =&gt; {\n    let searchUser = {\n      _id: \&quot;2\&quot;,\n      userName: \&quot;mohamed\&quot;,\n      profilePicture: \&quot;\&quot;,\n      profileBackground: \&quot;\&quot;,\n      canbeFollowed: true,\n      followersCount: 0,\n      friendsCount: 0,\n      gender: \&quot;male\&quot;,\n      displayName: \&quot;mohamed\&quot;,\n      postKarma: 1,\n      commentKarma: 2,\n      description: \&quot;\&quot;,\n      createdAt: \&quot;\&quot;,\n      nsfw: false,\n      autoplayMedia: false,\n      adultContent: false,\n      adultContent: false,\n      country: \&quot;egypt\&quot;,\n      socialLinks: [],\n      isFollowed: true,\n      isBlocked: false,\n    };\n    return searchUser;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.about(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9185b7c-bd49-4d39-a0ed-a82d9380dd74&quot;,&quot;parentUUID&quot;:&quot;5e1917e6-8ad0-42d5-9800-e5722e621634&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test not followed&quot;,&quot;fullTitle&quot;:&quot;User Controller Test about user Test thrid test not followed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    _id: \&quot;1\&quot;,\n    meUserRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;followed\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;followed\&quot; },\n    ],\n    userMeRelationship: [\n      { userId: \&quot;1\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;2\&quot;, status: \&quot;none\&quot; },\n      { userId: \&quot;3\&quot;, status: \&quot;none\&quot; },\n    ],\n  },\n  params: {\n    userName: \&quot;name\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: (user) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        _id: \&quot;6\&quot;,\n        userName: \&quot;mohamed\&quot;,\n        profilePicture: \&quot;\&quot;,\n        profileBackground: \&quot;\&quot;,\n        canbeFollowed: true,\n        followersCount: 0,\n        friendsCount: 0,\n        gender: \&quot;male\&quot;,\n        displayName: \&quot;mohamed\&quot;,\n        postKarma: 1,\n        commentKarma: 2,\n        description: \&quot;\&quot;,\n        joinDate: \&quot;\&quot;,\n        nsfw: false,\n        autoplayMedia: false,\n        adultContent: false,\n        country: \&quot;egypt\&quot;,\n        socialLinks: [],\n      },\n    };\n    return response;\n  },\n  about: (me, user) =&gt; {\n    let searchUser = {\n      _id: \&quot;6\&quot;,\n      userName: \&quot;mohamed\&quot;,\n      profilePicture: \&quot;\&quot;,\n      profileBackground: \&quot;\&quot;,\n      canbeFollowed: true,\n      followersCount: 0,\n      friendsCount: 0,\n      gender: \&quot;male\&quot;,\n      displayName: \&quot;mohamed\&quot;,\n      postKarma: 1,\n      commentKarma: 2,\n      description: \&quot;\&quot;,\n      createdAt: \&quot;\&quot;,\n      nsfw: false,\n      autoplayMedia: false,\n      adultContent: false,\n      adultContent: false,\n      country: \&quot;egypt\&quot;,\n      socialLinks: [],\n      isFollowed: false,\n      isBlocked: false,\n    };\n    return searchUser;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.about(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  user: {\n    _id: \&quot;6\&quot;,\n    userName: \&quot;mohamed\&quot;,\n    profilePicture: \&quot;\&quot;,\n    profileBackground: \&quot;\&quot;,\n    canbeFollowed: true,\n    followersCount: 0,\n    friendsCount: 0,\n    gender: \&quot;male\&quot;,\n    displayName: \&quot;mohamed\&quot;,\n    postKarma: 1,\n    commentKarma: 2,\n    description: \&quot;\&quot;,\n    createdAt: \&quot;\&quot;,\n    nsfw: false,\n    autoplayMedia: false,\n    adultContent: false,\n    country: \&quot;egypt\&quot;,\n    isFollowed: false,\n    isBlocked: false,\n    socialLinks: [],\n  },\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27f36bfe-27d8-4686-9c4a-776f5624cb24&quot;,&quot;parentUUID&quot;:&quot;5e1917e6-8ad0-42d5-9800-e5722e621634&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test about user Test fourth test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  params: {},\n};\nconst UserService = {};\nconst userController = new UserController({ UserService });\nawait userController.about(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide userName \&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d32387c-1e90-41ce-a7c0-cc52c549e2bb&quot;,&quot;parentUUID&quot;:&quot;5e1917e6-8ad0-42d5-9800-e5722e621634&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bbb9cd2-7aee-4a70-8e41-9add11d20e46&quot;,&quot;e9185b7c-bd49-4d39-a0ed-a82d9380dd74&quot;,&quot;27f36bfe-27d8-4686-9c4a-776f5624cb24&quot;,&quot;6d32387c-1e90-41ce-a7c0-cc52c549e2bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a4303cef-8afb-46e5-8335-ef36d1fa9c54&quot;,&quot;title&quot;:&quot;UsernameAvailable Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;available&quot;,&quot;fullTitle&quot;:&quot;User Controller Test UsernameAvailable Test available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;UserService.isAvailable = async (userName) =&gt; true;\nawait userController.usernameAvailable(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  available: true,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97c7557a-779a-48ed-a85b-bfc9fd1601f1&quot;,&quot;parentUUID&quot;:&quot;a4303cef-8afb-46e5-8335-ef36d1fa9c54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unavailable&quot;,&quot;fullTitle&quot;:&quot;User Controller Test UsernameAvailable Test unavailable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;UserService.isAvailable = async (userName) =&gt; false;\nawait userController.usernameAvailable(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  available: false,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff80d041-6868-4482-8bc7-13346cf26cb4&quot;,&quot;parentUUID&quot;:&quot;a4303cef-8afb-46e5-8335-ef36d1fa9c54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid request&quot;,&quot;fullTitle&quot;:&quot;User Controller Test UsernameAvailable Test Invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete req.query;\nawait userController.usernameAvailable(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status().json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  message: \&quot;userName query paramater is required\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc82716-6d33-4f6b-9aa7-46953735addf&quot;,&quot;parentUUID&quot;:&quot;a4303cef-8afb-46e5-8335-ef36d1fa9c54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97c7557a-779a-48ed-a85b-bfc9fd1601f1&quot;,&quot;ff80d041-6868-4482-8bc7-13346cf26cb4&quot;,&quot;5cc82716-6d33-4f6b-9aa7-46953735addf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;83aa71a3-29d5-436b-b40e-80e8450699a4&quot;,&quot;title&quot;:&quot;getSocialLinks Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test getSocialLinks Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {};\nconst UserService = {\n  getSocialLinks: () =&gt; {\n    let socialLinks = [\n      {\n        _id: \&quot;1\&quot;,\n        check: \&quot;https://facebook.com/\&quot;,\n        placeholderLink: \&quot;https://facebook.com\&quot;,\n        baseLink: \&quot;https://facebook.com/\&quot;,\n        type: \&quot;facebook\&quot;,\n      },\n    ];\n    return socialLinks;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.getSocialLinks(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      check: \&quot;https://facebook.com/\&quot;,\n      placeholderLink: \&quot;https://facebook.com\&quot;,\n      baseLink: \&quot;https://facebook.com/\&quot;,\n      type: \&quot;facebook\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c8a4513-e4b4-42dd-b43f-6feb4238a8cc&quot;,&quot;parentUUID&quot;:&quot;83aa71a3-29d5-436b-b40e-80e8450699a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c8a4513-e4b4-42dd-b43f-6feb4238a8cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6c31c7cf-97db-4745-9477-7a85732ad5f9&quot;,&quot;title&quot;:&quot;addSocialLink Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test addSocialLink Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n    socialId: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  createSocialLinks: (me, displayText, userLink, socialId) =&gt; {\n    let response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.addSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(201);\nexpect(res.status(201).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d21d3efe-cb92-4c61-b398-ea0712e7bce5&quot;,&quot;parentUUID&quot;:&quot;6c31c7cf-97db-4745-9477-7a85732ad5f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test bad request&quot;,&quot;fullTitle&quot;:&quot;User Controller Test addSocialLink Test second test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  createSocialLinks: (me, displayText, userLink, socialId) =&gt; {\n    let response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.addSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide displayText , userLink and socialId \&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a50755e-3b5c-4586-a4d7-0d549477a9f1&quot;,&quot;parentUUID&quot;:&quot;6c31c7cf-97db-4745-9477-7a85732ad5f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test bad request&quot;,&quot;fullTitle&quot;:&quot;User Controller Test addSocialLink Test thrid test bad request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n    socialId: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  createSocialLinks: (me, displayText, userLink, socialId) =&gt; {\n    let response = {\n      success: false,\n      msg: \&quot;error\&quot;,\n      error: 8,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.addSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31c02756-f6e3-4463-bda1-7fb6d623e98e&quot;,&quot;parentUUID&quot;:&quot;6c31c7cf-97db-4745-9477-7a85732ad5f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test not found&quot;,&quot;fullTitle&quot;:&quot;User Controller Test addSocialLink Test fourth test not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n    socialId: \&quot;\&quot;,\n  },\n};\nconst UserService = {\n  createSocialLinks: (me, displayText, userLink, socialId) =&gt; {\n    let response = {\n      success: false,\n      msg: \&quot;error\&quot;,\n      error: 9,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.addSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;error\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd8d4c07-cd11-4329-b20f-ad29906903ed&quot;,&quot;parentUUID&quot;:&quot;6c31c7cf-97db-4745-9477-7a85732ad5f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d21d3efe-cb92-4c61-b398-ea0712e7bce5&quot;,&quot;2a50755e-3b5c-4586-a4d7-0d549477a9f1&quot;,&quot;31c02756-f6e3-4463-bda1-7fb6d623e98e&quot;,&quot;dd8d4c07-cd11-4329-b20f-ad29906903ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;49749359-a2ff-4af3-807a-e440b433b773&quot;,&quot;title&quot;:&quot;updateSocialLink Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test updateSocialLink Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n  },\n  user: {},\n  params: {\n    id: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  updateSocialLinks: () =&gt; {\n    let response = {\n      success: true,\n      socialLinks: [\n        {\n          _id: \&quot;1\&quot;,\n          check: \&quot;https://facebook.com/\&quot;,\n          placeholderLink: \&quot;https://facebook.com\&quot;,\n          baseLink: \&quot;https://facebook.com/\&quot;,\n          type: \&quot;facebook\&quot;,\n        },\n      ],\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.updateSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      check: \&quot;https://facebook.com/\&quot;,\n      placeholderLink: \&quot;https://facebook.com\&quot;,\n      baseLink: \&quot;https://facebook.com/\&quot;,\n      type: \&quot;facebook\&quot;,\n    },\n  ],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ce303e6-9364-4a75-8ed8-374a3fd2d264&quot;,&quot;parentUUID&quot;:&quot;49749359-a2ff-4af3-807a-e440b433b773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test updateSocialLink Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  user: {},\n  params: {\n    id: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  updateSocialLinks: () =&gt; {\n    let response = {\n      success: true,\n      socialLinks: [\n        {\n          _id: \&quot;1\&quot;,\n          check: \&quot;https://facebook.com/\&quot;,\n          placeholderLink: \&quot;https://facebook.com\&quot;,\n          baseLink: \&quot;https://facebook.com/\&quot;,\n          type: \&quot;facebook\&quot;,\n        },\n      ],\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.updateSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Provide displayText or userLink.\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0edc233-ff35-44b1-be26-46a2b8faba5b&quot;,&quot;parentUUID&quot;:&quot;49749359-a2ff-4af3-807a-e440b433b773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test updateSocialLink Test thrid test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    displayText: \&quot;\&quot;,\n    userLink: \&quot;\&quot;,\n  },\n  user: {},\n  params: {\n    id: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  updateSocialLinks: () =&gt; {\n    let response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.updateSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;socialLink id not found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4329fc6-57dd-4f34-a352-e2dde4c97896&quot;,&quot;parentUUID&quot;:&quot;49749359-a2ff-4af3-807a-e440b433b773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ce303e6-9364-4a75-8ed8-374a3fd2d264&quot;,&quot;c0edc233-ff35-44b1-be26-46a2b8faba5b&quot;,&quot;e4329fc6-57dd-4f34-a352-e2dde4c97896&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;748e176e-98de-4862-8eb6-c176dd1198ff&quot;,&quot;title&quot;:&quot;deleteSocialLink Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test deleteSocialLink Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {},\n  params: {\n    id: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  deleteSocialLinks: (me, id) =&gt; {\n    let response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.deleteSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(204);\nexpect(res.status(204).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e88a721-406e-4761-b58b-916617c445b3&quot;,&quot;parentUUID&quot;:&quot;748e176e-98de-4862-8eb6-c176dd1198ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test deleteSocialLink Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {},\n  params: {\n    id: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  deleteSocialLinks: () =&gt; {\n    let response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.deleteSocialLink(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Invalid Social id\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4d6fe1b-dafe-49df-84e8-736766069ead&quot;,&quot;parentUUID&quot;:&quot;748e176e-98de-4862-8eb6-c176dd1198ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e88a721-406e-4761-b58b-916617c445b3&quot;,&quot;c4d6fe1b-dafe-49df-84e8-736766069ead&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;title&quot;:&quot;blockUser Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockUser Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  blockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fc13b07-029e-4185-b36c-7fdecedfb957&quot;,&quot;parentUUID&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockUser Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  blockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0856ffef-7b74-467c-a4ad-c086e3ad2f6d&quot;,&quot;parentUUID&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockUser Test thrid test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: false,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    }\n    return false;\n  },\n  blockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(304);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ccca421-5734-4768-9b25-4ad5e9f0cf50&quot;,&quot;parentUUID&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockUser Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  blockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d79a4d7-faaf-434f-9eac-95c6351fa5b9&quot;,&quot;parentUUID&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockUser Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;2\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  blockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Try Blocking yourself\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96498643-7ec6-48f0-8b4f-77ff54f76439&quot;,&quot;parentUUID&quot;:&quot;d6b1d6f1-b447-4d40-ab72-2979736ebc73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fc13b07-029e-4185-b36c-7fdecedfb957&quot;,&quot;0856ffef-7b74-467c-a4ad-c086e3ad2f6d&quot;,&quot;0ccca421-5734-4768-9b25-4ad5e9f0cf50&quot;,&quot;5d79a4d7-faaf-434f-9eac-95c6351fa5b9&quot;,&quot;96498643-7ec6-48f0-8b4f-77ff54f76439&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;title&quot;:&quot;unBlockUser Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unBlockUser Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unBlockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unBlockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfbf54e6-dc5f-41f9-a8c8-d1f2af8502b5&quot;,&quot;parentUUID&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unBlockUser Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unBlockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unBlockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d3b299c-9679-40db-8ade-3ac3b36009f7&quot;,&quot;parentUUID&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unBlockUser Test thrid test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: false,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    }\n    return false;\n  },\n  unBlockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unBlockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(304);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3bd2d3c-d982-44a9-88b7-0c394fc3b850&quot;,&quot;parentUUID&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unBlockUser Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unBlockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unBlockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eda8c9ff-46cf-46db-8be6-969b01b4abf5&quot;,&quot;parentUUID&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unBlockUser Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;2\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unBlockUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unBlockUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Try Blocking yourself\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0eab0b4b-2e28-4e6f-bf6b-3008cc0840fb&quot;,&quot;parentUUID&quot;:&quot;f4d2220d-a021-4841-a672-265da6dc27d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfbf54e6-dc5f-41f9-a8c8-d1f2af8502b5&quot;,&quot;3d3b299c-9679-40db-8ade-3ac3b36009f7&quot;,&quot;a3bd2d3c-d982-44a9-88b7-0c394fc3b850&quot;,&quot;eda8c9ff-46cf-46db-8be6-969b01b4abf5&quot;,&quot;0eab0b4b-2e28-4e6f-bf6b-3008cc0840fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;title&quot;:&quot;followUser Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test followUser Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  followUser: async (me, data) =&gt; {\n    return false;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.followUser(req, res, () =&gt; {});\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6630b26-54bd-45fb-b7cd-1e36f423696b&quot;,&quot;parentUUID&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test followUser Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  followUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.followUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;871ab249-e8f3-4585-a20a-bd1f63efe1a8&quot;,&quot;parentUUID&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test followUser Test thrid test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: false,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  followUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.followUser(req, res, () =&gt; {});\nexpect(res.status).to.have.been.calledWith(304);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8b26bbc-0cf2-489b-aa7e-892b4d658cdf&quot;,&quot;parentUUID&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test followUser Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  followUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.followUser(req, res, () =&gt; {});\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2bff4f3-5aa7-422e-97d2-39eccb118e9b&quot;,&quot;parentUUID&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test followUser Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;2\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  followUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.followUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Try Unfollowing yourself\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1a7b927-4535-4d6c-a13a-b20023d99284&quot;,&quot;parentUUID&quot;:&quot;d7a3c70c-8cd3-4c49-97ab-67f6912b52e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6630b26-54bd-45fb-b7cd-1e36f423696b&quot;,&quot;871ab249-e8f3-4585-a20a-bd1f63efe1a8&quot;,&quot;c8b26bbc-0cf2-489b-aa7e-892b4d658cdf&quot;,&quot;e2bff4f3-5aa7-422e-97d2-39eccb118e9b&quot;,&quot;b1a7b927-4535-4d6c-a13a-b20023d99284&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;title&quot;:&quot;unfollowUser Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unfollowUser Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unfollowUser: async (me, data) =&gt; {\n    return false;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unfollowUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95fdd52c-4714-4661-9cad-2d26aff99633&quot;,&quot;parentUUID&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unfollowUser Test second test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return true;\n    }\n  },\n  unfollowUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unfollowUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(405);\nexpect(res.status(405).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Method Not Allowed\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db98039c-e88a-43a7-8639-656753c4518e&quot;,&quot;parentUUID&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unfollowUser Test thrid test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: false,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: true,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (!me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unfollowUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unfollowUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(304);\nexpect(res.status(304).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81e43661-8a21-4e90-b45a-70373ef8af12&quot;,&quot;parentUUID&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unfollowUser Test fourth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;1\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unfollowUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unfollowUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(404);\nexpect(res.status(404).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;User Not Found\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5e02b1d-cab2-4074-a206-ce6f1bfed78f&quot;,&quot;parentUUID&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test fail&quot;,&quot;fullTitle&quot;:&quot;User Controller Test unfollowUser Test fifth test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n  params: {\n    userName: \&quot;2\&quot;,\n  },\n};\nconst UserService = {\n  getUserByName: async (data) =&gt; {\n    let response = {\n      success: false,\n      data: {\n        test: true,\n      },\n    };\n    return response;\n  },\n  checkBlockStatus: async (me, data) =&gt; {\n    if (me.test) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  unfollowUser: async (me, data) =&gt; {\n    return true;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.unfollowUser(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(400);\nexpect(res.status(400).json).to.have.been.calledWith({\n  status: \&quot;fail\&quot;,\n  errorMessage: \&quot;Try Unfollowing yourself\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baa63cd3-b5cd-4a3f-a9f4-5ba6b521b281&quot;,&quot;parentUUID&quot;:&quot;3c158359-6a03-4ca4-8a61-ac5de504707b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95fdd52c-4714-4661-9cad-2d26aff99633&quot;,&quot;db98039c-e88a-43a7-8639-656753c4518e&quot;,&quot;81e43661-8a21-4e90-b45a-70373ef8af12&quot;,&quot;d5e02b1d-cab2-4074-a206-ce6f1bfed78f&quot;,&quot;baa63cd3-b5cd-4a3f-a9f4-5ba6b521b281&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6cc98f05-97ef-40d4-bdd4-d47bf9205a03&quot;,&quot;title&quot;:&quot;blockedUsers Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test blockedUsers Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n};\nconst UserService = {\n  getBlockedUsers: async (data) =&gt; {\n    let response = [];\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.blockedUsers(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  blocked: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25f784d7-03af-44ad-932f-4bc9233719c2&quot;,&quot;parentUUID&quot;:&quot;6cc98f05-97ef-40d4-bdd4-d47bf9205a03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25f784d7-03af-44ad-932f-4bc9233719c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;abcfd77d-27fd-4d8f-ae3b-5f2f454e306b&quot;,&quot;title&quot;:&quot;myFollowers Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\controllers\\userController.js&quot;,&quot;file&quot;:&quot;\\test\\controllers\\userController.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test success&quot;,&quot;fullTitle&quot;:&quot;User Controller Test myFollowers Test first test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  user: {\n    userName: \&quot;2\&quot;,\n    test: true,\n  },\n};\nconst UserService = {\n  getFollowers: async (data) =&gt; {\n    let response = [];\n    return response;\n  },\n};\nconst userController = new UserController({ UserService });\nawait userController.myFollowers(req, res, \&quot;\&quot;);\nexpect(res.status).to.have.been.calledWith(200);\nexpect(res.status(200).json).to.have.been.calledWith({\n  status: \&quot;success\&quot;,\n  followers: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e15f03fb-2f58-44fe-b9cb-ae702af0547d&quot;,&quot;parentUUID&quot;:&quot;abcfd77d-27fd-4d8f-ae3b-5f2f454e306b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e15f03fb-2f58-44fe-b9cb-ae702af0547d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6cc16f0a-0bad-413c-a9eb-d70270d29f09&quot;,&quot;title&quot;:&quot;Comment service test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0251855a-3b87-443b-9b90-52b72d5ba821&quot;,&quot;title&quot;:&quot;create comment&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful comment create&quot;,&quot;fullTitle&quot;:&quot;Comment service test create comment successful comment create&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;comment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Comment\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nconst { success, data } = await commentServices.createComment(comment);\nexpect(success).to.equal(true);\ncomment.post = \&quot;456c5fccf267fc3a463b35e4\&quot;;\nexpect(data).to.eql(comment);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dd24807-b8e3-49ba-a1e3-9a199ccf28ed&quot;,&quot;parentUUID&quot;:&quot;0251855a-3b87-443b-9b90-52b72d5ba821&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;error in data access layer&quot;,&quot;fullTitle&quot;:&quot;Comment service test create comment error in data access layer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentRepository.createOne = async (id, fields) =&gt; {\n  return { success: false };\n};\ncomment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Comment\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nconst { success, error } = await commentServices.createComment(comment);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f7da8cb-05bc-4e98-8d6f-993f707d3c39&quot;,&quot;parentUUID&quot;:&quot;0251855a-3b87-443b-9b90-52b72d5ba821&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Invalid parent&quot;,&quot;fullTitle&quot;:&quot;Comment service test create comment Invalid parent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentRepository.findById = async (id, fields) =&gt; {\n  return { success: false };\n};\ncomment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Comment\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nconst { success, error } = await commentServices.createComment(comment);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.INVALID_PARENT);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81268c18-674d-47d0-b5bc-11e344b0653d&quot;,&quot;parentUUID&quot;:&quot;0251855a-3b87-443b-9b90-52b72d5ba821&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5dd24807-b8e3-49ba-a1e3-9a199ccf28ed&quot;,&quot;1f7da8cb-05bc-4e98-8d6f-993f707d3c39&quot;,&quot;81268c18-674d-47d0-b5bc-11e344b0653d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7f4508c7-5b87-40bd-adbb-3f06ac56144f&quot;,&quot;title&quot;:&quot;Testing update comment&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful comment update&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing update comment successful comment update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { success, data: updatedData } =\n  await commentServices.updateComment(id, data, userId);\nexpect(success).to.equal(true);\nexpect(updatedData.text).to.equal(\&quot;updated comment text\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59e668a4-4d2f-439d-8050-ace9b95ed062&quot;,&quot;parentUUID&quot;:&quot;7f4508c7-5b87-40bd-adbb-3f06ac56144f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unathorized user&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing update comment unathorized user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;578a5fccf267fc3a463b35e\&quot;;\nconst { success, error } = await commentServices.updateComment(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.NOT_AUTHOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4c8844-ceba-415d-8720-8910617850d3&quot;,&quot;parentUUID&quot;:&quot;7f4508c7-5b87-40bd-adbb-3f06ac56144f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing update comment comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentRepository.findById = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await commentServices.updateComment(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.COMMENT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a774420-03ad-496d-bb0a-4ce30f53d72d&quot;,&quot;parentUUID&quot;:&quot;7f4508c7-5b87-40bd-adbb-3f06ac56144f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59e668a4-4d2f-439d-8050-ace9b95ed062&quot;,&quot;0d4c8844-ceba-415d-8720-8910617850d3&quot;,&quot;0a774420-03ad-496d-bb0a-4ce30f53d72d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f7bbadf8-0799-4eb9-b5d8-0e49c9fa1dc5&quot;,&quot;title&quot;:&quot;Testing delete comment&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful comment delete(parent is comment)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing delete comment successful comment delete(parent is comment)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { success } = await commentServices.deleteComment(id, userId);\nexpect(success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cffee553-bfa6-4e09-93f4-8345bff702d8&quot;,&quot;parentUUID&quot;:&quot;f7bbadf8-0799-4eb9-b5d8-0e49c9fa1dc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;successful comment delete(parent is post)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing delete comment successful comment delete(parent is post)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { success } = await commentServices.deleteComment(id, userId);\nexpect(success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d52b9a1-75c1-4476-8c77-ac0f2a546540&quot;,&quot;parentUUID&quot;:&quot;f7bbadf8-0799-4eb9-b5d8-0e49c9fa1dc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unathorized user&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing delete comment unathorized user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;578a5fccf267fc3a463b35e8\&quot;;\nconst { success, error } = await commentServices.deleteComment(\n  id,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.NOT_AUTHOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a2f4390-3609-4cb1-98e6-b7f4544a427c&quot;,&quot;parentUUID&quot;:&quot;f7bbadf8-0799-4eb9-b5d8-0e49c9fa1dc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comment not found&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing delete comment comment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;CommentRepository.exists = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await commentServices.deleteComment(\n  id,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(commentErrors.COMMENT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d19278fb-a565-41b5-8b0d-47d08c4e885e&quot;,&quot;parentUUID&quot;:&quot;f7bbadf8-0799-4eb9-b5d8-0e49c9fa1dc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cffee553-bfa6-4e09-93f4-8345bff702d8&quot;,&quot;5d52b9a1-75c1-4476-8c77-ac0f2a546540&quot;,&quot;8a2f4390-3609-4cb1-98e6-b7f4544a427c&quot;,&quot;d19278fb-a565-41b5-8b0d-47d08c4e885e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cf6ffaf0-27bb-4d53-acd0-fe13476ca4b9&quot;,&quot;title&quot;:&quot;Testing hasValidParent function&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;valid parent(Comment)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing hasValidParent function valid parent(Comment)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const comment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Comment\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nconst valid = await commentServices.hasValidParent(comment);\nexpect(valid.success).to.equal(true);\n//expect(comment.post).to.equal(\&quot;456c5fccf267fc3a463b35e4\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55aaf888-037e-4aa8-985d-e6861a3c2b3d&quot;,&quot;parentUUID&quot;:&quot;cf6ffaf0-27bb-4d53-acd0-fe13476ca4b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;valid parent(post)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing hasValidParent function valid parent(post)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const comment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Post\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nconst valid = await commentServices.hasValidParent(comment);\nexpect(valid.success).to.equal(true);\n//expect(comment.post).to.equal(\&quot;123p5fccf267fc3a463b35e4\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86ce448d-c937-48b6-9ea9-85893afd8064&quot;,&quot;parentUUID&quot;:&quot;cf6ffaf0-27bb-4d53-acd0-fe13476ca4b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid parent(Comment)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing hasValidParent function invalid parent(Comment)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const comment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Comment\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nCommentRepository.findById = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst valid = await commentServices.hasValidParent(comment);\nexpect(valid.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49a814f0-b5d2-4750-a491-377958ceed6c&quot;,&quot;parentUUID&quot;:&quot;cf6ffaf0-27bb-4d53-acd0-fe13476ca4b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid parent(Post)&quot;,&quot;fullTitle&quot;:&quot;Comment service test Testing hasValidParent function invalid parent(Post)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const comment = {\n  parent: \&quot;636f647c888b41426fc6abdd\&quot;,\n  parentType: \&quot;Post\&quot;,\n  text: \&quot;comment text\&quot;,\n};\nPostRepository.findById = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst valid = await commentServices.hasValidParent(comment);\nexpect(valid.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3288139c-5ab0-4366-bacb-866ad1a4244b&quot;,&quot;parentUUID&quot;:&quot;cf6ffaf0-27bb-4d53-acd0-fe13476ca4b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55aaf888-037e-4aa8-985d-e6861a3c2b3d&quot;,&quot;86ce448d-c937-48b6-9ea9-85893afd8064&quot;,&quot;49a814f0-b5d2-4750-a491-377958ceed6c&quot;,&quot;3288139c-5ab0-4366-bacb-866ad1a4244b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7107368f-bda6-4a20-b718-bcbe07b344d9&quot;,&quot;title&quot;:&quot;get users comments&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test get users comments first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const CommentRepository = {\n  getUserComments: async () =&gt; {\n    return {\n      doc: [\n        {\n          _id: \&quot;1\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;1\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;User\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n              profilePicture: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n        {\n          _id: \&quot;2\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;1\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;User\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n              profilePicture: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n        {\n          _id: \&quot;3\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;1\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;User\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n              profilePicture: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n      ],\n    };\n  },\n};\nconst user = {\n  voteComment: [\n    { comments: \&quot;1\&quot;, commentVoteStatus: \&quot;1\&quot; },\n    { comments: \&quot;2\&quot;, commentVoteStatus: \&quot;-1\&quot; },\n  ],\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;3\&quot;,\n    },\n  ],\n};\nconst PostRepository = {};\nconst commentServices = new CommentService({\n  CommentRepository,\n  PostRepository,\n});\nconst comments = await commentServices.getUserComments(\&quot;1\&quot;, user, \&quot;\&quot;);\nexpect(comments.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe7ef32-8828-4683-8aca-a1924b6e7d4b&quot;,&quot;parentUUID&quot;:&quot;7107368f-bda6-4a20-b718-bcbe07b344d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Comment service test get users comments second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const CommentRepository = {\n  getUserComments: async () =&gt; {\n    return {\n      doc: [\n        {\n          _id: \&quot;1\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;1\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;User\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n              profilePicture: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n        {\n          _id: \&quot;2\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;2\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;User\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n              profilePicture: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n        {\n          _id: \&quot;3\&quot;,\n          mentions: [],\n          parent: \&quot;1\&quot;,\n          parentType: \&quot;Post\&quot;,\n          text: \&quot;1\&quot;,\n          votes: \&quot;1\&quot;,\n          repliesCount: 0,\n          createdAt: \&quot;\&quot;,\n          isDeleted: \&quot;1\&quot;,\n          sortOnHot: 5,\n          author: {\n            _id: \&quot;1\&quot;,\n            userName: \&quot;ahmed\&quot;,\n          },\n          post: {\n            _id: \&quot;1\&quot;,\n            author: {\n              _id: \&quot;1\&quot;,\n              userName: \&quot;ahmed\&quot;,\n            },\n            ownerType: \&quot;Subreddit\&quot;,\n            owner: {\n              _id: \&quot;1\&quot;,\n              fixedName: \&quot;ahmed\&quot;,\n              icon: \&quot;users/default.png\&quot;,\n            },\n          },\n        },\n      ],\n    };\n  },\n};\nconst user = {\n  voteComment: [\n    { comments: \&quot;1\&quot;, commentVoteStatus: \&quot;1\&quot; },\n    { comments: \&quot;2\&quot;, commentVoteStatus: \&quot;-1\&quot; },\n  ],\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;3\&quot;,\n    },\n  ],\n};\nconst PostRepository = {};\nconst commentServices = new CommentService({\n  CommentRepository,\n  PostRepository,\n});\nconst comments = await commentServices.getUserComments(\&quot;1\&quot;, user, \&quot;\&quot;);\nexpect(comments.length).to.equal(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91a73b16-424d-46af-9f28-896eddcc4458&quot;,&quot;parentUUID&quot;:&quot;7107368f-bda6-4a20-b718-bcbe07b344d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbe7ef32-8828-4683-8aca-a1924b6e7d4b&quot;,&quot;91a73b16-424d-46af-9f28-896eddcc4458&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;title&quot;:&quot;addVote function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test addVote function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: -1,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  commentKarma: 0,\n  save: async () =&gt; {},\n};\nconst CommentRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.addVote(user, \&quot;2\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd79a43a-857a-4a09-b0f8-fdb7369824bb&quot;,&quot;parentUUID&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;Comment service test addVote function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: -1,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  commentKarma: 0,\n  save: async () =&gt; {},\n};\nconst CommentRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.addVote(user, \&quot;5\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14634083-c9d2-49a6-ac02-856278b6ebc9&quot;,&quot;parentUUID&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test &quot;,&quot;fullTitle&quot;:&quot;Comment service test addVote function  thrid test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: -1,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  commentKarma: 0,\n  save: async () =&gt; {},\n};\nconst CommentRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.addVote(user, \&quot;2\&quot;, -1, 0, author);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb0666bd-4eae-430d-8405-3b9a7ee72fe5&quot;,&quot;parentUUID&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test &quot;,&quot;fullTitle&quot;:&quot;Comment service test addVote function  fourth test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: -1,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  commentKarma: 0,\n  save: async () =&gt; {},\n};\nconst CommentRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.addVote(user, \&quot;1\&quot;, 0, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fa552d6-a6c7-406f-8b51-8d5a00d0631b&quot;,&quot;parentUUID&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test &quot;,&quot;fullTitle&quot;:&quot;Comment service test addVote function  fifth test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: 0,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  commentKarma: 0,\n  save: async () =&gt; {},\n};\nconst CommentRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.addVote(user, \&quot;2\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e3126bb-863f-413f-b949-921d919e0097&quot;,&quot;parentUUID&quot;:&quot;873fd5b9-7213-406b-ac9a-a81ae55f10a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd79a43a-857a-4a09-b0f8-fdb7369824bb&quot;,&quot;14634083-c9d2-49a6-ac02-856278b6ebc9&quot;,&quot;cb0666bd-4eae-430d-8405-3b9a7ee72fe5&quot;,&quot;6fa552d6-a6c7-406f-8b51-8d5a00d0631b&quot;,&quot;3e3126bb-863f-413f-b949-921d919e0097&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;245a556f-b48b-4be0-a022-9963d6a3b097&quot;,&quot;title&quot;:&quot;saveComment function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test saveComment function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;2\&quot;,\n    },\n    {\n      savedComment: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst CommentServices = new CommentService({});\nconst result = await CommentServices.saveComment(user, \&quot;1\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47828fec-959e-486d-be23-c6da24d9c65f&quot;,&quot;parentUUID&quot;:&quot;245a556f-b48b-4be0-a022-9963d6a3b097&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Comment service test saveComment function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;2\&quot;,\n    },\n    {\n      savedComment: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst CommentServices = new CommentService({});\nconst result = await CommentServices.saveComment(user, \&quot;3\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a192697-7628-4aaf-81fe-73d6a288de17&quot;,&quot;parentUUID&quot;:&quot;245a556f-b48b-4be0-a022-9963d6a3b097&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47828fec-959e-486d-be23-c6da24d9c65f&quot;,&quot;7a192697-7628-4aaf-81fe-73d6a288de17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;11a7d206-113d-4403-acbe-fc24965c86f3&quot;,&quot;title&quot;:&quot;unSaveComment function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test unSaveComment function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Array.prototype.pull = function (elem) {\n  var i = this.indexOf(elem);\n  if (i === -1)\n    //w  w w  . j a  v a  2s .  c  o  m\n    return;\n  return this.splice(i, 1);\n};\nlet user = {\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;2\&quot;,\n    },\n    {\n      savedComment: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst CommentServices = new CommentService({});\nconst result = await CommentServices.unSaveComment(user, \&quot;1\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7062a5c-e9ae-4589-b414-3e3a7ea0a1e2&quot;,&quot;parentUUID&quot;:&quot;11a7d206-113d-4403-acbe-fc24965c86f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Comment service test unSaveComment function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  savedComments: [\n    {\n      savedComment: \&quot;1\&quot;,\n    },\n    {\n      savedComment: \&quot;2\&quot;,\n    },\n    {\n      savedComment: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst CommentServices = new CommentService({});\nconst result = await CommentServices.unSaveComment(user, \&quot;3\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d970235-da14-4987-b879-1b13388c938b&quot;,&quot;parentUUID&quot;:&quot;11a7d206-113d-4403-acbe-fc24965c86f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7062a5c-e9ae-4589-b414-3e3a7ea0a1e2&quot;,&quot;3d970235-da14-4987-b879-1b13388c938b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ea1eba70-eac6-4d76-9f80-7b6fe0aac55e&quot;,&quot;title&quot;:&quot;findCommentById function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test findCommentById function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const CommentRepository = {\n  getCommentwithAuthor: async (data) =&gt; {\n    return { success: true, doc: [] };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.findCommentById(\&quot;1\&quot;);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f85f0ed6-d314-4256-80ca-ed290af1f51a&quot;,&quot;parentUUID&quot;:&quot;ea1eba70-eac6-4d76-9f80-7b6fe0aac55e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Comment service test findCommentById function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const CommentRepository = {\n  getCommentwithAuthor: async (data) =&gt; {\n    return { success: false, doc: [] };\n  },\n};\nconst CommentServices = new CommentService({ CommentRepository });\nconst result = await CommentServices.findCommentById(\&quot;1\&quot;);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac06bd9d-dae6-4319-9250-b5c9efa7e2b6&quot;,&quot;parentUUID&quot;:&quot;ea1eba70-eac6-4d76-9f80-7b6fe0aac55e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f85f0ed6-d314-4256-80ca-ed290af1f51a&quot;,&quot;ac06bd9d-dae6-4319-9250-b5c9efa7e2b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;847866f0-8d8e-46fc-b9aa-37c7b88d3bcc&quot;,&quot;title&quot;:&quot;setVoteStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\commentService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\commentService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Comment service test setVoteStatus function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let saved = [\n  {\n    savedComment: {\n      _id: \&quot;1\&quot;,\n      post:{\n        _id:\&quot;1\&quot;,\n        title:\&quot;\&quot;,\n        author:{\n          _id:\&quot;1\&quot;,\n          userName:\&quot;ahmed\&quot;,\n          profilePicture:\&quot;icon.png\&quot;\n        },\n        ownerType:\&quot;User\&quot;,\n        owner:{\n          _id:\&quot;1\&quot;,\n          userName:\&quot;ahmed\&quot;,\n          profilePicture:\&quot;icon.png\&quot;\n        },\n        text:\&quot;\&quot;,\n        nsfw:\&quot;\&quot;,\n        flairId:\&quot;\&quot;,\n      },\n      commentVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;users/default.png\&quot;,\n      },\n      ownerType: \&quot;User\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    },\n  },\n  {\n    savedComment: {\n      _id: \&quot;2\&quot;,\n      commentVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        fixedName: \&quot;ahmed\&quot;,\n        icon: \&quot;subreddits/default.png\&quot;,\n      },\n      ownerType: \&quot;Subreddit\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n      post:{\n        _id:\&quot;1\&quot;,\n        title:\&quot;\&quot;,\n        author:{\n          _id:\&quot;1\&quot;,\n          userName:\&quot;ahmed\&quot;,\n          profilePicture:\&quot;icon.png\&quot;\n        },\n        ownerType:\&quot;Subreddit\&quot;,\n        owner:{\n          _id:\&quot;1\&quot;,\n          fixedName:\&quot;ahmed\&quot;,\n          icon:\&quot;icon.png\&quot;\n        },\n        text:\&quot;\&quot;,\n        nsfw:\&quot;\&quot;,\n        flairId:\&quot;\&quot;,\n      },\n    },\n  },\n  {\n    savedComment: {\n      _id: \&quot;3\&quot;,\n      commentVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        fixedName: \&quot;ahmed\&quot;,\n        icon: \&quot;subreddits/default.png\&quot;,\n      },\n      ownerType: \&quot;Subreddit\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n      post:{\n        _id:\&quot;2\&quot;,\n        title:\&quot;\&quot;,\n        author:{\n          _id:\&quot;1\&quot;,\n          userName:\&quot;ahmed\&quot;,\n          profilePicture:\&quot;icon.png\&quot;\n        },\n        ownerType:\&quot;Subreddit\&quot;,\n        owner:{\n          _id:\&quot;1\&quot;,\n          fixedName:\&quot;ahmed\&quot;,\n          icon:\&quot;icon.png\&quot;\n        },\n        text:\&quot;\&quot;,\n        nsfw:\&quot;\&quot;,\n        flairId:\&quot;\&quot;,\n      },\n    },\n  },\n];\nlet user = {\n  voteComment: [\n    {\n      comments: \&quot;1\&quot;,\n      commentVoteStatus: 1,\n    },\n    {\n      comments: \&quot;2\&quot;,\n      commentVoteStatus: -1,\n    },\n    {\n      comments: \&quot;4\&quot;,\n      commentVoteStatus: -1,\n    },\n  ],\n};\nconst result = CommentServices.setVoteStatus(user, saved);\nexpect(result.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01058a40-d23a-4225-9708-a4c24d62d88c&quot;,&quot;parentUUID&quot;:&quot;847866f0-8d8e-46fc-b9aa-37c7b88d3bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01058a40-d23a-4225-9708-a4c24d62d88c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;72e6d321-d9a6-4a2f-a063-e555e81ef660&quot;,&quot;title&quot;:&quot;get subreddit flair&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\flairService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\flairService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get subreddit flair 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  getSubredditFlairs: async(subredditName) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        _id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }]\n      \n      \n    };\n    \n    return response;\n  },\n};\nconst on = {};\nconst subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nconst flairId= mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\nconst result = await subredditServiceObj.getFlair(subredditName,flairId);\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first flair\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;caa67312-9f4e-4a62-93a3-9f1d63d4fecb&quot;,&quot;parentUUID&quot;:&quot;72e6d321-d9a6-4a2f-a063-e555e81ef660&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;get subreddit flair 2) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  getSubredditFlairs: async(subredditName) =&gt; {\n    const response = {\n       success: false, error: mongoErrors.NOT_FOUND\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nconst subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\n const subredditName = \&quot; \&quot;;\n const flairId=\&quot;\&quot;\nconst result = await subredditServiceObj.getFlair(subredditName,flairId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b25641f-4557-4a8a-b2f3-c51983267eae&quot;,&quot;parentUUID&quot;:&quot;72e6d321-d9a6-4a2f-a063-e555e81ef660&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test flair not found&quot;,&quot;fullTitle&quot;:&quot;get subreddit flair 3) test flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  getSubredditFlairs: async(subredditName) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        _id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }]\n      \n      \n    };\n    \n    return response;\n  },\n};\nconst on = {};\nconst subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nconst flairId= mongoose.Types.ObjectId(\&quot;636e901bbc48533bd1113880\&quot;);\nconst result = await subredditServiceObj.getFlair(subredditName,flairId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( subredditErrors.FLAIR_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b493c20-97ac-4164-9a77-ed348e68f0d0&quot;,&quot;parentUUID&quot;:&quot;72e6d321-d9a6-4a2f-a063-e555e81ef660&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;caa67312-9f4e-4a62-93a3-9f1d63d4fecb&quot;,&quot;9b25641f-4557-4a8a-b2f3-c51983267eae&quot;,&quot;0b493c20-97ac-4164-9a77-ed348e68f0d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cff5b6e5-77ba-4e68-b4ec-aeed4af15d66&quot;,&quot;title&quot;:&quot;update subreddit flairs&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\flairService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\flairService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;update subreddit flairs 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const FlairRepository = {\n  updateFlair: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nlet subredditServiceObj = new SubredditService({ on, FlairRepository, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.updateFlair(subredditName);\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first flair\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f633380a-2751-4f55-9eae-0a4b97afb088&quot;,&quot;parentUUID&quot;:&quot;cff5b6e5-77ba-4e68-b4ec-aeed4af15d66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found &quot;,&quot;fullTitle&quot;:&quot;update subreddit flairs 2) test subreddit not found &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const FlairRepository = {\n  updateFlair: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nlet subredditServiceObj = new SubredditService({ on, FlairRepository, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: false,\n    error:subredditErrors.SUBREDDIT_NOT_FOUND\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.updateFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a087a339-0311-44fb-9f49-816ce12f54fc&quot;,&quot;parentUUID&quot;:&quot;cff5b6e5-77ba-4e68-b4ec-aeed4af15d66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test not moderator&quot;,&quot;fullTitle&quot;:&quot;update subreddit flairs 3) test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const FlairRepository = {\n  updateFlair: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\n    \n    \nconst on = {};\nlet subredditServiceObj = new SubredditService({ on, FlairRepository, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n     success: false, error: subredditErrors.NOT_MODERATOR\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.updateFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc6e559d-749d-441e-8fd3-7ef2cddcfc4e&quot;,&quot;parentUUID&quot;:&quot;cff5b6e5-77ba-4e68-b4ec-aeed4af15d66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test not subreddit flair&quot;,&quot;fullTitle&quot;:&quot;update subreddit flairs 4) test not subreddit flair&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const FlairRepository = {\n  updateFlair: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\n    \n    \nconst on = {};\nlet subredditServiceObj = new SubredditService({ on, FlairRepository, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n     success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n  success: false, error: subredditErrors.FLAIR_NOT_FOUND\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.updateFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c53549b6-1e2c-4d8a-9135-972237236a05&quot;,&quot;parentUUID&quot;:&quot;cff5b6e5-77ba-4e68-b4ec-aeed4af15d66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f633380a-2751-4f55-9eae-0a4b97afb088&quot;,&quot;a087a339-0311-44fb-9f49-816ce12f54fc&quot;,&quot;cc6e559d-749d-441e-8fd3-7ef2cddcfc4e&quot;,&quot;c53549b6-1e2c-4d8a-9135-972237236a05&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4d96c356-ab2a-4e52-b9ed-328cd2f8fd00&quot;,&quot;title&quot;:&quot;delete subreddit flair&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\flairService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\flairService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;delete subreddit flair 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  removeFlairFromSubreddit: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nlet subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.deleteFlair(subredditName);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;876250f8-09bc-4c62-b5f8-a9b7fd44ca96&quot;,&quot;parentUUID&quot;:&quot;4d96c356-ab2a-4e52-b9ed-328cd2f8fd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found &quot;,&quot;fullTitle&quot;:&quot;delete subreddit flair 2) test subreddit not found &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const  SubredditRepository = {\n  removeFlairFromSubreddit: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nlet subredditServiceObj = new SubredditService({  SubredditRepository,on,  on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: false,\n    error:subredditErrors.SUBREDDIT_NOT_FOUND\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.deleteFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd3c02ab-1550-4008-ae68-3bf6ba36edfc&quot;,&quot;parentUUID&quot;:&quot;4d96c356-ab2a-4e52-b9ed-328cd2f8fd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test not moderator&quot;,&quot;fullTitle&quot;:&quot;delete subreddit flair 3) test not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const  SubredditRepository = {\n  removeFlairFromSubreddit: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\n    \n    \nconst on = {};\nlet subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n     success: false, error: subredditErrors.NOT_MODERATOR\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n    success: true,\n    doc: {\n      _id: \&quot;12345\&quot;,\n      fixedName: \&quot;Nonlegit\&quot;,\n      moderators: [{\n        id: \&quot;12345\&quot;\n      }]\n    }\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.deleteFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a73b8a2c-acfe-4e13-9fb1-deaad5ab77fd&quot;,&quot;parentUUID&quot;:&quot;4d96c356-ab2a-4e52-b9ed-328cd2f8fd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test not subreddit flair&quot;,&quot;fullTitle&quot;:&quot;delete subreddit flair 4) test not subreddit flair&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const  SubredditRepository = {\n  updateFlair: async(userData,data) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n    };\n    \n    return response;\n  },\n};\n    \n    \nconst on = {};\nlet subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nsubredditServiceObj.checkSubreddit = async (subredditName) =&gt; {\n  const resp = {\n    success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkModerator = (subreddit,userID) =&gt; {\n  const resp = {\n     success: true,\n     doc: {\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }\n  };\n  return resp;\n};\nsubredditServiceObj.checkFlair=(subreddit,flairID) =&gt; {\n  const resp = {\n  success: false, error: subredditErrors.FLAIR_NOT_FOUND\n  };\n  \n  return resp;\n};\nconst result = await subredditServiceObj.deleteFlair(subredditName);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0782f39-f03e-4acc-8571-5e25b1b2ac33&quot;,&quot;parentUUID&quot;:&quot;4d96c356-ab2a-4e52-b9ed-328cd2f8fd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;876250f8-09bc-4c62-b5f8-a9b7fd44ca96&quot;,&quot;bd3c02ab-1550-4008-ae68-3bf6ba36edfc&quot;,&quot;a73b8a2c-acfe-4e13-9fb1-deaad5ab77fd&quot;,&quot;f0782f39-f03e-4acc-8571-5e25b1b2ac33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;b522a810-f3bc-44de-ba1d-f01974e3070a&quot;,&quot;title&quot;:&quot;get subreddit flairs&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\flairService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\flairService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get subreddit flairs 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  getSubredditFlairs: async(subredditName) =&gt; {\n    const response = {\n      success: true,\n      doc: [{\n        _id: \&quot;636e901bbc485bd111dd3880\&quot;,\n        text: \&quot;first flair\&quot;,\n        __v: 0\n      }]\n      \n      \n    };\n    \n    return response;\n  },\n};\nconst on = {};\nconst subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\n\nconst result = await subredditServiceObj.getFlairs(subredditName);\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first flair\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b80eda7-77b4-4047-a57e-dbb6e725b6fd&quot;,&quot;parentUUID&quot;:&quot;b522a810-f3bc-44de-ba1d-f01974e3070a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test subreddit not found&quot;,&quot;fullTitle&quot;:&quot;get subreddit flairs 2) test subreddit not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SubredditRepository = {\n  getSubredditFlairs: async(subredditName) =&gt; {\n    const response = {\n       success: false, error: mongoErrors.NOT_FOUND\n    };\n    \n    return response;\n  },\n};\nconst on = {};\nconst subredditServiceObj = new SubredditService({  SubredditRepository,on, on});\nconst subredditName = \&quot; \&quot;;\nconst result = await subredditServiceObj.getFlairs(subredditName);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee3a5dba-8c2e-4855-9d3b-d108438ab820&quot;,&quot;parentUUID&quot;:&quot;b522a810-f3bc-44de-ba1d-f01974e3070a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b80eda7-77b4-4047-a57e-dbb6e725b6fd&quot;,&quot;ee3a5dba-8c2e-4855-9d3b-d108438ab820&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;b8ed6e5c-5331-40d3-95fb-52ba45b5f17b&quot;,&quot;title&quot;:&quot;create moderator message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;create moderator message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  modMessage: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.modMessage();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23abd312-5992-4bd1-af21-36a61b746e5c&quot;,&quot;parentUUID&quot;:&quot;b8ed6e5c-5331-40d3-95fb-52ba45b5f17b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;create moderator message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  modMessage: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.modMessage();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64b810ce-1807-41c9-b7d4-a2600eca626c&quot;,&quot;parentUUID&quot;:&quot;b8ed6e5c-5331-40d3-95fb-52ba45b5f17b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;23abd312-5992-4bd1-af21-36a61b746e5c&quot;,&quot;64b810ce-1807-41c9-b7d4-a2600eca626c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;83f1c3aa-2f0f-4aac-b4c4-57da8b8f7abd&quot;,&quot;title&quot;:&quot;create reply message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;create reply message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  createReplyMessage: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.createReplyMessage();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b67c4dd1-fc54-4782-9d68-97f3680f51e1&quot;,&quot;parentUUID&quot;:&quot;83f1c3aa-2f0f-4aac-b4c4-57da8b8f7abd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b67c4dd1-fc54-4782-9d68-97f3680f51e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5071f00f-c5fe-4386-b434-069a7bc37e18&quot;,&quot;title&quot;:&quot;get sent message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get sent message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getSentMessage: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }  ]     \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getSentMessage();\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce1b4177-2f8d-4b0f-b8aa-e3103990f124&quot;,&quot;parentUUID&quot;:&quot;5071f00f-c5fe-4386-b434-069a7bc37e18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get sent message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getSentMessage: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getSentMessage();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40891060-d950-4cc1-ae94-92ec669351c7&quot;,&quot;parentUUID&quot;:&quot;5071f00f-c5fe-4386-b434-069a7bc37e18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce1b4177-2f8d-4b0f-b8aa-e3103990f124&quot;,&quot;40891060-d950-4cc1-ae94-92ec669351c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6e920e55-5094-4c9f-9f6a-b770c6efe6eb&quot;,&quot;title&quot;:&quot;get inbox message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get inbox message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getMessages: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }  ]     \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getMessages();\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16490824-83f2-4203-9858-37b299519d39&quot;,&quot;parentUUID&quot;:&quot;6e920e55-5094-4c9f-9f6a-b770c6efe6eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get inbox message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getMessages: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getMessages();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca59cfb5-163f-4fc3-81f9-2a18e1dea482&quot;,&quot;parentUUID&quot;:&quot;6e920e55-5094-4c9f-9f6a-b770c6efe6eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16490824-83f2-4203-9858-37b299519d39&quot;,&quot;ca59cfb5-163f-4fc3-81f9-2a18e1dea482&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;81c0b87d-3165-426a-95d3-f930079d136f&quot;,&quot;title&quot;:&quot;get all message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get all message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getAllMessages: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }  ]     \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getAllMessages();\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6ff964b-f87d-4d2d-86c9-eefc1c9960b0&quot;,&quot;parentUUID&quot;:&quot;81c0b87d-3165-426a-95d3-f930079d136f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get all message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getAllMessages: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getAllMessages();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f20d086-1d47-4ba9-b87b-e596e8d500c6&quot;,&quot;parentUUID&quot;:&quot;81c0b87d-3165-426a-95d3-f930079d136f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6ff964b-f87d-4d2d-86c9-eefc1c9960b0&quot;,&quot;2f20d086-1d47-4ba9-b87b-e596e8d500c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e34f3e34-f3cc-4ae8-830a-20eb75346ab9&quot;,&quot;title&quot;:&quot;get unread message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get unread message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getUnreadMessage: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }  ]     \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getUnreadMessage();\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b6bf231-d9e0-4cf3-9674-7e2aaeb97f20&quot;,&quot;parentUUID&quot;:&quot;e34f3e34-f3cc-4ae8-830a-20eb75346ab9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get unread message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getUnreadMessage: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getUnreadMessage();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;318664cf-1b77-417f-9610-6ef13b88bd37&quot;,&quot;parentUUID&quot;:&quot;e34f3e34-f3cc-4ae8-830a-20eb75346ab9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b6bf231-d9e0-4cf3-9674-7e2aaeb97f20&quot;,&quot;318664cf-1b77-417f-9610-6ef13b88bd37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cc2913b4-c9c6-4fea-b644-02f31468b94c&quot;,&quot;title&quot;:&quot;get post replies message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get post replies message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getPostReplies: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        [{\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }  ]     \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getPostReplies();\nexpect(result.success).to.equal(true);\nexpect(result.data[0].text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1d0d569-c6b1-4a15-bd2b-866087cfc53f&quot;,&quot;parentUUID&quot;:&quot;cc2913b4-c9c6-4fea-b644-02f31468b94c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get post replies message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  getPostReplies: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.getPostReplies();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93326303-8c39-47bb-9f77-2bf3222dae20&quot;,&quot;parentUUID&quot;:&quot;cc2913b4-c9c6-4fea-b644-02f31468b94c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1d0d569-c6b1-4a15-bd2b-866087cfc53f&quot;,&quot;93326303-8c39-47bb-9f77-2bf3222dae20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;8160f8c3-d4fa-478a-844e-b8ed55c6c2c3&quot;,&quot;title&quot;:&quot;mark all as read&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;mark all as read 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  markAllAsRead: async(msg) =&gt; {\n    const response = {\n      success: true    \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.markAllAsRead();\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a30556c-4b04-4ada-b120-5bff0c188824&quot;,&quot;parentUUID&quot;:&quot;8160f8c3-d4fa-478a-844e-b8ed55c6c2c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;mark all as read 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  markAllAsRead: async(msg) =&gt; {\n    const response = {\n      success: false    \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.markAllAsRead();\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7d26fb5-8c79-43e9-abd3-3f7aed9dbad1&quot;,&quot;parentUUID&quot;:&quot;8160f8c3-d4fa-478a-844e-b8ed55c6c2c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a30556c-4b04-4ada-b120-5bff0c188824&quot;,&quot;b7d26fb5-8c79-43e9-abd3-3f7aed9dbad1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;9c329086-f886-4560-927e-4b27a93f3763&quot;,&quot;title&quot;:&quot;delete message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;delete message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  deleteMessage: async(msg) =&gt; {\n    const response = {\n      success: true    \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.deleteMessage();\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43986cde-a13e-48e0-800a-336b062559b6&quot;,&quot;parentUUID&quot;:&quot;9c329086-f886-4560-927e-4b27a93f3763&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;delete message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const MessageRepository = {\n  deleteMessage: async(msg) =&gt; {\n    const response = {\n        success: false, \n      \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst messageServiceObj = new MessageService({  MessageRepository,on});\nconst result = await messageServiceObj.deleteMessage();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(messageErrors.MESSAGE_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6627811a-987a-4792-9e66-9e68ec65a61e&quot;,&quot;parentUUID&quot;:&quot;9c329086-f886-4560-927e-4b27a93f3763&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43986cde-a13e-48e0-800a-336b062559b6&quot;,&quot;6627811a-987a-4792-9e66-9e68ec65a61e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cce42176-73ee-46e8-a866-a17943f18711&quot;,&quot;title&quot;:&quot;create message&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;create message 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const message = { to: \&quot;\&quot; };\n      const MessageRepository = {\n        createMessage: async(msg) =&gt; {\n const response = {\n   success: true    \n };         \n return response;\n        },\n        };\nconst UserRepository = {\n        findByName: async(msg) =&gt; {\n const response = {\n     success: true,\n    doc:{_id:\&quot; \&quot;}    \n };         \n return response;\n        },\n        };\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,UserRepository});\n      const result = await messageServiceObj.createMessage(on,message);\n      expect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1b82925-b328-418e-871e-86587264e62c&quot;,&quot;parentUUID&quot;:&quot;cce42176-73ee-46e8-a866-a17943f18711&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;create message 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const message = { to: \&quot;\&quot; };\n      const MessageRepository = {\ncreateMessage: async(msg) =&gt; {\n  const response = {\n      success: false, \n    \n  };         \n  return response;\n},\n };\n   const UserRepository = {\nfindByName: async(msg) =&gt; {\n  const response = {\n      success: true,\n    doc:{_id:\&quot; \&quot;}  \n  };         \n  return response;\n},\n};\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,UserRepository});\n      const result = await messageServiceObj.createMessage(on,message);\n      expect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3a2fb9b-a5d4-40fa-bcf3-14b0c6cabf97&quot;,&quot;parentUUID&quot;:&quot;cce42176-73ee-46e8-a866-a17943f18711&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail user not existed&quot;,&quot;fullTitle&quot;:&quot;create message 3) test fail user not existed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const message = { to: \&quot;\&quot; };\n      const MessageRepository = {\ncreateMessage: async(msg) =&gt; {\n  const response = {\n      success: false, \n    \n  };         \n  return response;\n},\n };\n   const UserRepository = {\nfindByName: async(msg) =&gt; {\n  const response = {\n      success: false\n  };         \n  return response;\n},\n};\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,UserRepository});\n      const result = await messageServiceObj.createMessage(on,message);\n      expect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;637053ae-b7a0-4d7d-94f7-7f93e25e3252&quot;,&quot;parentUUID&quot;:&quot;cce42176-73ee-46e8-a866-a17943f18711&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1b82925-b328-418e-871e-86587264e62c&quot;,&quot;b3a2fb9b-a5d4-40fa-bcf3-14b0c6cabf97&quot;,&quot;637053ae-b7a0-4d7d-94f7-7f93e25e3252&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;title&quot;:&quot;create reply&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\messageService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\messageService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;create reply 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\nreply: async(msg) =&gt; {\n  const response = {\n    success: true    \n  };         \n  return response;\n  },\n  findById: async(msg) =&gt; {\n  const response = {\n      success: true,\n      doc: {\n          to: { _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;)},\n          from:{_id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),}\n      }    \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83d62e94-c783-4cf5-8172-b234ba2bbfa5&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test message does not exist&quot;,&quot;fullTitle&quot;:&quot;create reply 2) test message does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\n\n  findById: async(msg) =&gt; {\n  const response = {\n      success: false,\n       \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdbd477c-b529-4c4e-94f5-5a71c1d374c9&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3) test fail&quot;,&quot;fullTitle&quot;:&quot;create reply 3) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\nreply: async(msg) =&gt; {\n  const response = {\n      success: false,\n    error:  mongoErrors.UNKOWN\n  };         \n  return response;\n  },\n  findById: async(msg) =&gt; {\n  const response = {\n      success: true,\n      doc: {\n          to: { _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;)},\n          from:{_id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),}\n      }    \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c2971d5-dfc5-48b8-ae8a-ea9eab4b6005&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4) test success&quot;,&quot;fullTitle&quot;:&quot;create reply 4) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\nreply: async(msg) =&gt; {\n  const response = {\n    success: true    \n  };         \n  return response;\n  },\n  findById: async(msg) =&gt; {\n  const response = {\n      success: true,\n      doc: {\n         to: { _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd101dd3880\&quot;)},\n          from:{_id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),}\n      }    \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3555e07a-92a4-4a46-98d1-4ba4962c7fdf&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5) test success&quot;,&quot;fullTitle&quot;:&quot;create reply 5) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\nreply: async(msg) =&gt; {\n  const response = {\n    success: true    \n  };         \n  return response;\n  },\n  findById: async(msg) =&gt; {\n  const response = {\n      success: true,\n      doc: {\n          to: { _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;)},\n          from:{_id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3280\&quot;),}\n      }    \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffe98306-a32d-4a3c-b7be-8e18add4e375&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;create reply 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userId =mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;);\n      const MessageRepository = {\nreply: async(msg) =&gt; {\n  const response = {\n    success: true    \n  };         \n  return response;\n  },\n  findById: async(msg) =&gt; {\n  const response = {\n      success: true,\n      doc: {\n          to: { _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111d03880\&quot;)},\n          from:{_id:mongoose.Types.ObjectId(\&quot;636e901bbc485bd111d03880\&quot;),}\n      }    \n  };         \n  return response;\n},\n};\n\n\n      const on = {};\n      const messageServiceObj = new MessageService({  MessageRepository,on});\n      const result = await messageServiceObj.reply(userId);\n      expect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a5320c4-a431-493b-a6ac-d115e2bbdf08&quot;,&quot;parentUUID&quot;:&quot;3d2a1ee4-25d7-4700-9a87-56156d1953eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83d62e94-c783-4cf5-8172-b234ba2bbfa5&quot;,&quot;bdbd477c-b529-4c4e-94f5-5a71c1d374c9&quot;,&quot;4c2971d5-dfc5-48b8-ae8a-ea9eab4b6005&quot;,&quot;3555e07a-92a4-4a46-98d1-4ba4962c7fdf&quot;,&quot;ffe98306-a32d-4a3c-b7be-8e18add4e375&quot;,&quot;1a5320c4-a431-493b-a6ac-d115e2bbdf08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;067b942b-ed02-452d-b7a9-f8f758145aeb&quot;,&quot;title&quot;:&quot;add reply notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;add reply notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  addReplyNotification: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.addReplyNotification();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68755783-7b5a-418d-b8ab-83030e2a533e&quot;,&quot;parentUUID&quot;:&quot;067b942b-ed02-452d-b7a9-f8f758145aeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;add reply notification 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  addReplyNotification: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.addReplyNotification();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4600c560-67c9-410e-97fa-08b978926948&quot;,&quot;parentUUID&quot;:&quot;067b942b-ed02-452d-b7a9-f8f758145aeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68755783-7b5a-418d-b8ab-83030e2a533e&quot;,&quot;4600c560-67c9-410e-97fa-08b978926948&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cca42dfa-0021-4f4d-975f-cebf35b9ccb1&quot;,&quot;title&quot;:&quot;send mentions&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;send mentions 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  sendMentions: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.sendMentions();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47ba20be-7b02-438a-ae76-a82e3b5f3874&quot;,&quot;parentUUID&quot;:&quot;cca42dfa-0021-4f4d-975f-cebf35b9ccb1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;send mentions 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  sendMentions: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.sendMentions();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e555c8b-e436-408f-8993-4827f1498997&quot;,&quot;parentUUID&quot;:&quot;cca42dfa-0021-4f4d-975f-cebf35b9ccb1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47ba20be-7b02-438a-ae76-a82e3b5f3874&quot;,&quot;6e555c8b-e436-408f-8993-4827f1498997&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;740f9360-bada-4688-a47a-ace850541bc0&quot;,&quot;title&quot;:&quot;add follow notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;add follow notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  addFollowNotification: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.addFollowNotification();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;241b8d08-26c8-4b36-bd20-c34e202291ea&quot;,&quot;parentUUID&quot;:&quot;740f9360-bada-4688-a47a-ace850541bc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;add follow notification 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  addFollowNotification: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.addFollowNotification();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f6dd7e2-2cb0-474c-b60a-8c784abed72e&quot;,&quot;parentUUID&quot;:&quot;740f9360-bada-4688-a47a-ace850541bc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;241b8d08-26c8-4b36-bd20-c34e202291ea&quot;,&quot;5f6dd7e2-2cb0-474c-b60a-8c784abed72e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;8fb60078-7dfc-4332-9bbe-63e91797c632&quot;,&quot;title&quot;:&quot;get firebase token&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get firebase token 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  getFirebaseToken: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  on,UserRepository});\nconst result = await notificationServiceObj.getFirebaseToken();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;badd8ce6-b0c3-4fa7-83a5-808e5dd2d3f9&quot;,&quot;parentUUID&quot;:&quot;8fb60078-7dfc-4332-9bbe-63e91797c632&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get firebase token 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  getFirebaseToken: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  on,UserRepository});\nconst result = await notificationServiceObj.getFirebaseToken();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebfdeeac-61d6-4f55-bbb0-00835cf127e2&quot;,&quot;parentUUID&quot;:&quot;8fb60078-7dfc-4332-9bbe-63e91797c632&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;badd8ce6-b0c3-4fa7-83a5-808e5dd2d3f9&quot;,&quot;ebfdeeac-61d6-4f55-bbb0-00835cf127e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;05e1861f-f814-4426-8a5e-5f02ee695ab5&quot;,&quot;title&quot;:&quot;get all notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;get all notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  getAllNotifications: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.getAllNotifications();\nexpect(result.success).to.equal(true);\nexpect(result.data.text).to.equal( \&quot;first message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b744474-762a-466a-bd76-b560f2b816b6&quot;,&quot;parentUUID&quot;:&quot;05e1861f-f814-4426-8a5e-5f02ee695ab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;get all notification 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  getAllNotifications: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.getAllNotifications();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b9cfea8-7f94-4c2d-94df-585afb79ad0a&quot;,&quot;parentUUID&quot;:&quot;05e1861f-f814-4426-8a5e-5f02ee695ab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b744474-762a-466a-bd76-b560f2b816b6&quot;,&quot;9b9cfea8-7f94-4c2d-94df-585afb79ad0a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;738d6fd9-a1d9-4da9-8033-e42e78db88d8&quot;,&quot;title&quot;:&quot;mark all as read&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;mark all as read 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  markAllNotificationsAsRead: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.markAllNotificationsAsRead();\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce4bdb18-994b-4a3e-a12f-038df5028630&quot;,&quot;parentUUID&quot;:&quot;738d6fd9-a1d9-4da9-8033-e42e78db88d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;mark all as read 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  markAllNotificationsAsRead: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.markAllNotificationsAsRead();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( mongoErrors.UNKOWN );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9884d85a-779b-402d-bfbd-23995ff4c7d8&quot;,&quot;parentUUID&quot;:&quot;738d6fd9-a1d9-4da9-8033-e42e78db88d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce4bdb18-994b-4a3e-a12f-038df5028630&quot;,&quot;9884d85a-779b-402d-bfbd-23995ff4c7d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;1d3a2b28-b7b4-4db0-a85c-e60c2e7d09b9&quot;,&quot;title&quot;:&quot;mark one as read&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;mark one as read 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  markAllNotificationsAsRead: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.markAllNotificationsAsRead();\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d6b90b9-d090-4353-9959-9d5242d58ed4&quot;,&quot;parentUUID&quot;:&quot;1d3a2b28-b7b4-4db0-a85c-e60c2e7d09b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;mark one as read 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  markNotificationAsRead: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.markNotificationAsRead();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( notificationErrors.NOTIFICATION_NOT_FOUND );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a434e3e-c657-414e-9003-561e84b3c8f3&quot;,&quot;parentUUID&quot;:&quot;1d3a2b28-b7b4-4db0-a85c-e60c2e7d09b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d6b90b9-d090-4353-9959-9d5242d58ed4&quot;,&quot;0a434e3e-c657-414e-9003-561e84b3c8f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ac33416b-f905-43b3-84ee-e77467b70348&quot;,&quot;title&quot;:&quot;hide notification&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\notificationService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\notificationService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;1) test success&quot;,&quot;fullTitle&quot;:&quot;hide notification 1) test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  hideNotification: async(msg) =&gt; {\n    const response = {\n      success: true,\n      doc: \n        {\n        text: \&quot;first message\&quot;,\n        __v: 0\n      }       \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.hideNotification();\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0fa70f9-8736-4888-b91b-a72b3ff55388&quot;,&quot;parentUUID&quot;:&quot;ac33416b-f905-43b3-84ee-e77467b70348&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2) test fail&quot;,&quot;fullTitle&quot;:&quot;hide notification 2) test fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const NotificationRepository = {\n  hideNotification: async(msg) =&gt; {\n    const response = {\n        success: false, \n      error:mongoErrors.UNKOWN  \n    };         \n    return response;\n  },\n};\nconst on = {};\nconst notificationServiceObj = new NotificationService({  NotificationRepository,on});\nconst result = await notificationServiceObj.hideNotification();\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal( notificationErrors.NOTIFICATION_NOT_FOUND );&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd59c7d3-1772-4a39-8ab7-ea35b442abfe&quot;,&quot;parentUUID&quot;:&quot;ac33416b-f905-43b3-84ee-e77467b70348&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0fa70f9-8736-4888-b91b-a72b3ff55388&quot;,&quot;dd59c7d3-1772-4a39-8ab7-ea35b442abfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;66968d2d-e6c1-4e07-a6f3-5c5c39160402&quot;,&quot;title&quot;:&quot;Post service test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;title&quot;:&quot;create post&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful post create in subreddit&quot;,&quot;fullTitle&quot;:&quot;Post service test create post successful post create in subreddit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;123d493c3ff67d626ec994f7\&quot;,\n};\nconst { success, data } = await postServices.createPost(post);\nexpect(success).to.equal(true);\nexpect(data).to.eql(post);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84a9d3dd-6d94-41fa-889f-621d448edee7&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;successful post create in user profile&quot;,&quot;fullTitle&quot;:&quot;Post service test create post successful post create in user profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;User\&quot;,\n  flairId: \&quot;879d493c3ff67d626ec990e5\&quot;,\n};\nconst { success, data } = await postServices.createPost(post);\nexpect(success).to.equal(true);\nexpect(data.owner).to.equal(post.author);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfe6a539-e575-4c55-a7cd-19b9acd35e75&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid kind&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid kind&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let post = {\n  kind: \&quot;link\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_POST_KIND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b913016-aa18-43ab-afbc-eafff68f09b7&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid owner 1&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid owner 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_OWNER);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1be9c336-3a0b-4c28-8040-6b16bbbd08b2&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid owner 2&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid owner 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  owner: \&quot;259d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Not a valid owner\&quot;,\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_OWNER);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;008f66ad-e668-4c95-b69a-4cea32c7fdc9&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid post kind 1&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid post kind 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;image\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;123d493c3ff67d626ec994f7\&quot;,\n};\nSubredditRepository.findById = async (id, fields) =&gt; {\n  return {\n    success: true,\n    doc: {\n      flairIds: [\&quot;123d493c3ff67d626ec994f7\&quot;, \&quot;666d493c3ff67d626ec990d1\&quot;],\n      allowImgs: false,\n    },\n  };\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_POST_KIND)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07077259-9ce6-4af8-abfb-f4de7ff97e8f&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid post kind 2&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid post kind 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;video\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;123d493c3ff67d626ec994f7\&quot;,\n};\nSubredditRepository.findById = async (id, fields) =&gt; {\n  return {\n    success: true,\n    doc: {\n      flairIds: [\&quot;123d493c3ff67d626ec994f7\&quot;, \&quot;666d493c3ff67d626ec990d1\&quot;],\n      allowVideos: false,\n    },\n  };\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_POST_KIND)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;319ae722-56c8-4cdd-8763-8a14f112a92e&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid post kind 3&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid post kind 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;link\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;123d493c3ff67d626ec994f7\&quot;,\n};\nSubredditRepository.findById = async (id, fields) =&gt; {\n  return {\n    success: true,\n    doc: {\n      flairIds: [\&quot;123d493c3ff67d626ec994f7\&quot;, \&quot;666d493c3ff67d626ec990d1\&quot;],\n      allowLinks: false,\n    },\n  };\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.INVALID_POST_KIND)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;136213f1-42ff-4a37-9486-9fb63e4b50f1&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;flair not found&quot;,&quot;fullTitle&quot;:&quot;Post service test create post flair not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;456d493c3ff67d626ec994f7\&quot;,\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.FLAIR_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ad9b666-ebde-4510-b8fa-c157495fc1e1&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Error in data access layer&quot;,&quot;fullTitle&quot;:&quot;Post service test create post Error in data access layer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n  flairId: \&quot;123d493c3ff67d626ec994f7\&quot;,\n};\nPostRepository.createOne = async (data) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c62fcf27-8b24-4a31-bf49-81adf903319b&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid subreddit&quot;,&quot;fullTitle&quot;:&quot;Post service test create post invalid subreddit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;post = {\n  title: \&quot;kiro post\&quot;,\n  kind: \&quot;self\&quot;,\n  text: \&quot;this is a post\&quot;,\n  owner: \&quot;636d493c3ff67d626ec990d0\&quot;,\n  author: \&quot;879d493c3ff67d626ec990e5\&quot;,\n  ownerType: \&quot;Subreddit\&quot;,\n};\nSubredditRepository.findById = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await postServices.createPost(post);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;310777cf-f5b4-43d8-8def-c3e5a0c889c5&quot;,&quot;parentUUID&quot;:&quot;51540e99-2fe1-424a-a059-0c2642069fa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84a9d3dd-6d94-41fa-889f-621d448edee7&quot;,&quot;cfe6a539-e575-4c55-a7cd-19b9acd35e75&quot;,&quot;5b913016-aa18-43ab-afbc-eafff68f09b7&quot;,&quot;1be9c336-3a0b-4c28-8040-6b16bbbd08b2&quot;,&quot;008f66ad-e668-4c95-b69a-4cea32c7fdc9&quot;,&quot;07077259-9ce6-4af8-abfb-f4de7ff97e8f&quot;,&quot;319ae722-56c8-4cdd-8763-8a14f112a92e&quot;,&quot;136213f1-42ff-4a37-9486-9fb63e4b50f1&quot;,&quot;1ad9b666-ebde-4510-b8fa-c157495fc1e1&quot;,&quot;c62fcf27-8b24-4a31-bf49-81adf903319b&quot;,&quot;310777cf-f5b4-43d8-8def-c3e5a0c889c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f743aee1-ea10-423b-874b-f43ab808e3ec&quot;,&quot;title&quot;:&quot;Testing update post&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful post update&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing update post successful post update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { success, data: updatedData } = await postServices.updatePost(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(true);\nexpect(updatedData.text).to.equal(\&quot;updated post text\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91d87986-1172-43e8-8344-beef0161425e&quot;,&quot;parentUUID&quot;:&quot;f743aee1-ea10-423b-874b-f43ab808e3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unathorized user&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing update post unathorized user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;578a5fccf267fc3a463b35e\&quot;;\nconst { success, error } = await postServices.updatePost(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.NOT_AUTHOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97bb1c2f-3950-4009-b258-b3ec764647be&quot;,&quot;parentUUID&quot;:&quot;f743aee1-ea10-423b-874b-f43ab808e3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not editable&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing update post post not editable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;578a5fccf267fc3a463b35e4\&quot;;\nPostRepository.exists = async (id, fields) =&gt; {\n  const post = {\n    author: ObjectId(\&quot;578a5fccf267fc3a463b35e4\&quot;),\n    kind: \&quot;link\&quot;,\n    sharedFrom: false,\n  };\n  return { success: true, doc: post };\n};\nconst { success, error } = await postServices.updatePost(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.NOT_EDITABLE);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7824e8f8-7758-4499-9992-0f4c59ab8985&quot;,&quot;parentUUID&quot;:&quot;f743aee1-ea10-423b-874b-f43ab808e3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing update post post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.exists = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await postServices.updatePost(\n  id,\n  data,\n  userId\n);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4168de1-6316-4a7e-ad32-29941bf1883e&quot;,&quot;parentUUID&quot;:&quot;f743aee1-ea10-423b-874b-f43ab808e3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91d87986-1172-43e8-8344-beef0161425e&quot;,&quot;97bb1c2f-3950-4009-b258-b3ec764647be&quot;,&quot;7824e8f8-7758-4499-9992-0f4c59ab8985&quot;,&quot;d4168de1-6316-4a7e-ad32-29941bf1883e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;623e1c4a-6535-4210-aa4e-5285d8bff211&quot;,&quot;title&quot;:&quot;Testing delete post&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;successful post delete&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing delete post successful post delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { success } = await postServices.deletePost(id, userId);\nexpect(success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e07829ba-3bfb-4f58-a632-3fdc445939af&quot;,&quot;parentUUID&quot;:&quot;623e1c4a-6535-4210-aa4e-5285d8bff211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unathorized user&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing delete post unathorized user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;578a5fccf267fc3a463b35e\&quot;;\nconst { success, error } = await postServices.deletePost(id, userId);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.NOT_AUTHOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;171e3d39-7e79-4cc3-926a-0021b73e893c&quot;,&quot;parentUUID&quot;:&quot;623e1c4a-6535-4210-aa4e-5285d8bff211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test Testing delete post post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.exists = async (id, fields) =&gt; {\n  return { success: false };\n};\nconst { success, error } = await postServices.deletePost(id, userId);\nexpect(success).to.equal(false);\nexpect(error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efae27be-59b0-4470-a726-6fb39d348bda&quot;,&quot;parentUUID&quot;:&quot;623e1c4a-6535-4210-aa4e-5285d8bff211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e07829ba-3bfb-4f58-a632-3fdc445939af&quot;,&quot;171e3d39-7e79-4cc3-926a-0021b73e893c&quot;,&quot;efae27be-59b0-4470-a726-6fb39d348bda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;title&quot;:&quot;addVote function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test addVote function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: -1,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  postKarma: 0,\n  save: async () =&gt; {},\n};\nconst PostRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.addVote(user, \&quot;2\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da759e9e-b9fb-4319-8880-1da6868ef84d&quot;,&quot;parentUUID&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;Post service test addVote function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: -1,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  postKarma: 0,\n  save: async () =&gt; {},\n};\nconst PostRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.addVote(user, \&quot;5\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99272ba7-7f1f-44e0-89be-2a34b6d08971&quot;,&quot;parentUUID&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test &quot;,&quot;fullTitle&quot;:&quot;Post service test addVote function  thrid test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: -1,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  postKarma: 0,\n  save: async () =&gt; {},\n};\nconst PostRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.addVote(user, \&quot;2\&quot;, -1, 0, author);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e7f3110-5154-4fca-a9cd-0ba43118feae&quot;,&quot;parentUUID&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test &quot;,&quot;fullTitle&quot;:&quot;Post service test addVote function  fourth test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: -1,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  postKarma: 0,\n  save: async () =&gt; {},\n};\nconst PostRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.addVote(user, \&quot;1\&quot;, 0, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21699bc2-c6ed-4af2-8300-bac6de91d61c&quot;,&quot;parentUUID&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test &quot;,&quot;fullTitle&quot;:&quot;Post service test addVote function  fifth test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: 0,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n  save: async () =&gt; {},\n};\nlet author = {\n  postKarma: 0,\n  save: async () =&gt; {},\n};\nconst PostRepository = {\n  updateVotesCount: async (data) =&gt; {\n    return { success: true };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.addVote(user, \&quot;2\&quot;, 1, 0, author);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;741fb10f-6dcb-47cb-96dc-ecf7b8721765&quot;,&quot;parentUUID&quot;:&quot;4ff62108-95ff-4465-b623-d54e9b268954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da759e9e-b9fb-4319-8880-1da6868ef84d&quot;,&quot;99272ba7-7f1f-44e0-89be-2a34b6d08971&quot;,&quot;2e7f3110-5154-4fca-a9cd-0ba43118feae&quot;,&quot;21699bc2-c6ed-4af2-8300-bac6de91d61c&quot;,&quot;741fb10f-6dcb-47cb-96dc-ecf7b8721765&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;27ebac4b-e0ec-43ea-baa5-b1518ea9ff78&quot;,&quot;title&quot;:&quot;savePost function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test savePost function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  saved: [\n    {\n      savedPost: \&quot;1\&quot;,\n    },\n    {\n      savedPost: \&quot;2\&quot;,\n    },\n    {\n      savedPost: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.savePost(user, \&quot;1\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dc8d2ad-2801-4a1e-a21a-44bcdab389bf&quot;,&quot;parentUUID&quot;:&quot;27ebac4b-e0ec-43ea-baa5-b1518ea9ff78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Post service test savePost function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  saved: [\n    {\n      savedPost: \&quot;1\&quot;,\n    },\n    {\n      savedPost: \&quot;2\&quot;,\n    },\n    {\n      savedPost: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.savePost(user, \&quot;3\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1611eff-1649-45a3-8731-87a7f6ed1505&quot;,&quot;parentUUID&quot;:&quot;27ebac4b-e0ec-43ea-baa5-b1518ea9ff78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0dc8d2ad-2801-4a1e-a21a-44bcdab389bf&quot;,&quot;e1611eff-1649-45a3-8731-87a7f6ed1505&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;95799b73-f671-4449-8abb-9b751f595e6a&quot;,&quot;title&quot;:&quot;unSavePost function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test unSavePost function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Array.prototype.pull = function (elem) {\n  var i = this.indexOf(elem);\n  if (i === -1)\n    //w  w w  . j a  v a  2s .  c  o  m\n    return;\n  return this.splice(i, 1);\n};\nlet user = {\n  saved: [\n    {\n      savedPost: \&quot;1\&quot;,\n    },\n    {\n      savedPost: \&quot;2\&quot;,\n    },\n    {\n      savedPost: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.unSavePost(user, \&quot;1\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f8b39e0-f1f8-405a-8d76-ef6a2721aab6&quot;,&quot;parentUUID&quot;:&quot;95799b73-f671-4449-8abb-9b751f595e6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Post service test unSavePost function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  saved: [\n    {\n      savedPost: \&quot;1\&quot;,\n    },\n    {\n      savedPost: \&quot;2\&quot;,\n    },\n    {\n      savedPost: \&quot;4\&quot;,\n    },\n  ],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.unSavePost(user, \&quot;3\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cabb5fb5-cd29-421c-b636-557cc0820c9b&quot;,&quot;parentUUID&quot;:&quot;95799b73-f671-4449-8abb-9b751f595e6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f8b39e0-f1f8-405a-8d76-ef6a2721aab6&quot;,&quot;cabb5fb5-cd29-421c-b636-557cc0820c9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;abe52fc9-2736-4238-af46-5ea406f5c728&quot;,&quot;title&quot;:&quot;hidePost function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test hidePost function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;4\&quot;],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.hidePost(user, \&quot;1\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8fec961-9c7c-4e46-bf36-4de30a522e65&quot;,&quot;parentUUID&quot;:&quot;abe52fc9-2736-4238-af46-5ea406f5c728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Post service test hidePost function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;4\&quot;],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.hidePost(user, \&quot;3\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66a6aa49-0d1f-440d-a399-9af19414f239&quot;,&quot;parentUUID&quot;:&quot;abe52fc9-2736-4238-af46-5ea406f5c728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8fec961-9c7c-4e46-bf36-4de30a522e65&quot;,&quot;66a6aa49-0d1f-440d-a399-9af19414f239&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;06f3b7b9-b1dc-4773-857c-af0b426ba635&quot;,&quot;title&quot;:&quot;unHidePost function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test unHidePost function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Array.prototype.pull = function (elem) {\n  var i = this.indexOf(elem);\n  if (i === -1)\n    //w  w w  . j a  v a  2s .  c  o  m\n    return;\n  return this.splice(i, 1);\n};\nlet user = {\n  hidden: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;4\&quot;],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.unHidePost(user, \&quot;1\&quot;);\nexpect(result).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e365ecc7-97e9-4340-bd41-f0d2bafb3741&quot;,&quot;parentUUID&quot;:&quot;06f3b7b9-b1dc-4773-857c-af0b426ba635&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Post service test unHidePost function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;4\&quot;],\n  save: async () =&gt; {},\n};\nconst postservices = new PostService({});\nconst result = await postservices.unHidePost(user, \&quot;3\&quot;);\nexpect(result).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a93b6219-e396-4345-b82c-b56f56810bd6&quot;,&quot;parentUUID&quot;:&quot;06f3b7b9-b1dc-4773-857c-af0b426ba635&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e365ecc7-97e9-4340-bd41-f0d2bafb3741&quot;,&quot;a93b6219-e396-4345-b82c-b56f56810bd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;90dd8bb5-334a-402b-ac4a-f49640b0bf71&quot;,&quot;title&quot;:&quot;filterPosts function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test filterPosts function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;4\&quot;],\n  save: async () =&gt; {},\n};\nposts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;2\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n];\ncomments = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;2\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n];\nconst postservices = new PostService({});\nconst result = await postservices.filterPosts(posts, comments);\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bce3c0ca-9898-4bf9-a7c4-088561193769&quot;,&quot;parentUUID&quot;:&quot;90dd8bb5-334a-402b-ac4a-f49640b0bf71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bce3c0ca-9898-4bf9-a7c4-088561193769&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;9c1f8d03-4b3b-4de9-8e37-5c058e352e63&quot;,&quot;title&quot;:&quot;findPostById function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Post service test findPostById function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const PostRepository = {\n  getPostwithAuthor: async (data) =&gt; {\n    return { success: true, doc: [] };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.findPostById(\&quot;1\&quot;);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;480e6710-0e9d-44a2-a9aa-91ca48bf05d5&quot;,&quot;parentUUID&quot;:&quot;9c1f8d03-4b3b-4de9-8e37-5c058e352e63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test &quot;,&quot;fullTitle&quot;:&quot;Post service test findPostById function  second test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const PostRepository = {\n  getPostwithAuthor: async (data) =&gt; {\n    return { success: false, doc: [] };\n  },\n};\nconst postservices = new PostService({ PostRepository });\nconst result = await postservices.findPostById(\&quot;1\&quot;);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74d592f2-22b7-4da6-811a-16af647fbd12&quot;,&quot;parentUUID&quot;:&quot;9c1f8d03-4b3b-4de9-8e37-5c058e352e63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;480e6710-0e9d-44a2-a9aa-91ca48bf05d5&quot;,&quot;74d592f2-22b7-4da6-811a-16af647fbd12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;title&quot;:&quot;Is author or mod&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;author&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author or mod author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await postservices.isAuthOrMod(postId, userId);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fd1b1ee-3d28-4292-a0ac-b480f6136acf&quot;,&quot;parentUUID&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;moderator&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author or mod moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;000a5fccf267fc3a463b35e4\&quot;;\nconst result = await postservices.isAuthOrMod(postId, userId);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51c11a9e-3898-4ff8-b352-ea08c3d24aa7&quot;,&quot;parentUUID&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not author or moderator 1&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author or mod not author or moderator 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async (data) =&gt; {\n  return {\n    success: true,\n    doc: {\n      author: ObjectId(\&quot;578a5fccf267fc3a463b35e4\&quot;),\n      owner: ObjectId(\&quot;123a5fccf267fc3a463b35e3\&quot;),\n      ownerType: \&quot;User\&quot;,\n    },\n  };\n};\nconst result = await postservices.isAuthOrMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.NOT_AUTHOR_OR_MOD);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a5e4d58-5e41-4de7-9d8d-9871595e4354&quot;,&quot;parentUUID&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not author or moderator 2&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author or mod not author or moderator 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;SubredditRepository.moderator = async () =&gt; {\n  return { success: false };\n};\nconst result = await postservices.isAuthOrMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.NOT_AUTHOR_OR_MOD);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff400c34-5221-414e-9324-ba79cc47768a&quot;,&quot;parentUUID&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author or mod post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async () =&gt; {\n  return { success: false };\n};\nconst result = await postservices.isAuthOrMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65d833e0-fbde-4054-9a55-b9325a417847&quot;,&quot;parentUUID&quot;:&quot;72cbc68b-6877-4898-adc7-a5da39f023b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fd1b1ee-3d28-4292-a0ac-b480f6136acf&quot;,&quot;51c11a9e-3898-4ff8-b352-ea08c3d24aa7&quot;,&quot;3a5e4d58-5e41-4de7-9d8d-9871595e4354&quot;,&quot;ff400c34-5221-414e-9324-ba79cc47768a&quot;,&quot;65d833e0-fbde-4054-9a55-b9325a417847&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;70dd081d-4215-4260-b8ad-ebff1b058370&quot;,&quot;title&quot;:&quot;Is author&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;author&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await postservices.isAuth(postId, userId);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92acbfe9-4ebb-4f90-a4e0-ff16e6fe4f56&quot;,&quot;parentUUID&quot;:&quot;70dd081d-4215-4260-b8ad-ebff1b058370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not author&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author not author&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = \&quot;000a5fccf267fc3a463b35e4\&quot;;\nconst result = await postservices.isAuth(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.NOT_AUTHOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e1f48ee-2859-4b52-862d-bc8f4a557ce7&quot;,&quot;parentUUID&quot;:&quot;70dd081d-4215-4260-b8ad-ebff1b058370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test Is author post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async () =&gt; {\n  return { success: false };\n};\nconst result = await postservices.isAuth(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06defa5c-6c44-4741-87ab-e1a34a574606&quot;,&quot;parentUUID&quot;:&quot;70dd081d-4215-4260-b8ad-ebff1b058370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92acbfe9-4ebb-4f90-a4e0-ff16e6fe4f56&quot;,&quot;8e1f48ee-2859-4b52-862d-bc8f4a557ce7&quot;,&quot;06defa5c-6c44-4741-87ab-e1a34a574606&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fdc09e02-137d-44c8-8734-39c0dec5fac3&quot;,&quot;title&quot;:&quot;Is mod&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;moderator&quot;,&quot;fullTitle&quot;:&quot;Post service test Is mod moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await postservices.isMod(postId, userId);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;647c91ef-96e9-4744-b508-fe8133123456&quot;,&quot;parentUUID&quot;:&quot;fdc09e02-137d-44c8-8734-39c0dec5fac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not moderator&quot;,&quot;fullTitle&quot;:&quot;Post service test Is mod not moderator&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;SubredditRepository.moderator = async () =&gt; {\n  return { success: false };\n};\nconst result = await postservices.isMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.NOT_MOD);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93136af8-619f-4724-8709-ecac4689503b&quot;,&quot;parentUUID&quot;:&quot;fdc09e02-137d-44c8-8734-39c0dec5fac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not in subreddit&quot;,&quot;fullTitle&quot;:&quot;Post service test Is mod not in subreddit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async (data) =&gt; {\n  return {\n    success: true,\n    doc: {\n      owner: ObjectId(\&quot;123a5fccf267fc3a463b35e3\&quot;),\n      ownerType: \&quot;User\&quot;,\n    },\n  };\n};\nconst result = await postservices.isMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.OWNER_NOT_SUBREDDIT);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18e4c0d6-e17a-496b-87a4-448f2b35e627&quot;,&quot;parentUUID&quot;:&quot;fdc09e02-137d-44c8-8734-39c0dec5fac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test Is mod post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async () =&gt; {\n  return { success: false };\n};\nconst result = await postservices.isMod(postId, userId);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d28e1e59-0b27-4a7b-b923-9de136c8e892&quot;,&quot;parentUUID&quot;:&quot;fdc09e02-137d-44c8-8734-39c0dec5fac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;647c91ef-96e9-4744-b508-fe8133123456&quot;,&quot;93136af8-619f-4724-8709-ecac4689503b&quot;,&quot;18e4c0d6-e17a-496b-87a4-448f2b35e627&quot;,&quot;d28e1e59-0b27-4a7b-b923-9de136c8e892&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3e2ac98f-0f5b-411f-a00f-3a5e67fc13b9&quot;,&quot;title&quot;:&quot;post actions&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lock&quot;,&quot;fullTitle&quot;:&quot;Post service test post actions lock&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;lock_comments\&quot;;\nawait postservices.postAction(postId, action);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b9b5854-1718-486b-941b-fbdff079e57b&quot;,&quot;parentUUID&quot;:&quot;3e2ac98f-0f5b-411f-a00f-3a5e67fc13b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unlock&quot;,&quot;fullTitle&quot;:&quot;Post service test post actions unlock&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;unlock_comments\&quot;;\nawait postservices.postAction(postId, action);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3065d4ba-763f-45cb-a92d-8e97627244b3&quot;,&quot;parentUUID&quot;:&quot;3e2ac98f-0f5b-411f-a00f-3a5e67fc13b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;nsfw&quot;,&quot;fullTitle&quot;:&quot;Post service test post actions nsfw&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;mark_nsfw\&quot;;\nawait postservices.postAction(postId, action);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58605f45-4ad3-4078-891c-60877bfff1f1&quot;,&quot;parentUUID&quot;:&quot;3e2ac98f-0f5b-411f-a00f-3a5e67fc13b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;spoiler&quot;,&quot;fullTitle&quot;:&quot;Post service test post actions spoiler&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;spoiler\&quot;;\nawait postservices.postAction(postId, action);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcb363bc-2b04-4e62-9638-dc86e4807ca6&quot;,&quot;parentUUID&quot;:&quot;3e2ac98f-0f5b-411f-a00f-3a5e67fc13b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b9b5854-1718-486b-941b-fbdff079e57b&quot;,&quot;3065d4ba-763f-45cb-a92d-8e97627244b3&quot;,&quot;58605f45-4ad3-4078-891c-60877bfff1f1&quot;,&quot;bcb363bc-2b04-4e62-9638-dc86e4807ca6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;63026480-3497-4d51-927a-8582b1ab8387&quot;,&quot;title&quot;:&quot;mod actions&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;modAction&quot;,&quot;fullTitle&quot;:&quot;Post service test mod actions modAction&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;lock_comments\&quot;;\nawait postservices.modAction(postId, action);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c6760f2-dba8-4850-8f19-7fb6cf2588bb&quot;,&quot;parentUUID&quot;:&quot;63026480-3497-4d51-927a-8582b1ab8387&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c6760f2-dba8-4850-8f19-7fb6cf2588bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;title&quot;:&quot;spam&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;unspam success&quot;,&quot;fullTitle&quot;:&quot;Post service test spam unspam success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dir = -1;\nconst result = await postservices.spam(postId, userId, dir);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3690cbcd-59c2-456a-ad31-4d8ed1d46e73&quot;,&quot;parentUUID&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;spam fail&quot;,&quot;fullTitle&quot;:&quot;Post service test spam spam fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dir = 1;\nconst result = await postservices.spam(postId, userId, dir);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.ACTION_ALREADY_DONE);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56ed9e77-02ba-4f4c-9602-7f891a230bfd&quot;,&quot;parentUUID&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unspam fail&quot;,&quot;fullTitle&quot;:&quot;Post service test spam unspam fail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async (data) =&gt; {\n  return {\n    success: true,\n    doc: {\n      spammedBy: [\&quot;123a5fccf267fc3a463b35e4\&quot;],\n      spamCount: 4,\n    },\n  };\n};\ndir = -1;\nconst result = await postservices.spam(postId, userId, dir);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.ACTION_ALREADY_DONE);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;999ec54d-b592-42eb-a52d-28c8a7cb029c&quot;,&quot;parentUUID&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;spam success&quot;,&quot;fullTitle&quot;:&quot;Post service test spam spam success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dir = 1;\nconst result = await postservices.spam(postId, userId, dir);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2489a7e2-b1f6-4c21-a0a4-4dcaf1d8e7e1&quot;,&quot;parentUUID&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;post not found&quot;,&quot;fullTitle&quot;:&quot;Post service test spam post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;PostRepository.findById = async (data) =&gt; {\n  return { success: false };\n};\nconst result = await postservices.spam(postId, userId, dir);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(postErrors.POST_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e07504a-c121-4832-b188-dcf3df5c3861&quot;,&quot;parentUUID&quot;:&quot;d77601b4-8196-4c91-8789-8afa6e47e436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3690cbcd-59c2-456a-ad31-4d8ed1d46e73&quot;,&quot;56ed9e77-02ba-4f4c-9602-7f891a230bfd&quot;,&quot;999ec54d-b592-42eb-a52d-28c8a7cb029c&quot;,&quot;2489a7e2-b1f6-4c21-a0a4-4dcaf1d8e7e1&quot;,&quot;8e07504a-c121-4832-b188-dcf3df5c3861&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;41e97f2f-30d6-4038-9294-69da03b8eb21&quot;,&quot;title&quot;:&quot;add file&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\postService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\postService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;image&quot;,&quot;fullTitle&quot;:&quot;Post service test add file image&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;kind = \&quot;image\&quot;;\nconst result = await postservices.addFile(postId, kind, file);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bcb73dd-b4b5-4233-ade7-2cebb0d1cd71&quot;,&quot;parentUUID&quot;:&quot;41e97f2f-30d6-4038-9294-69da03b8eb21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;video&quot;,&quot;fullTitle&quot;:&quot;Post service test add file video&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;kind = \&quot;video\&quot;;\nconst result = await postservices.addFile(postId, kind, file);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea0b493a-87e2-48c8-a2f4-62e2afd3d2d9&quot;,&quot;parentUUID&quot;:&quot;41e97f2f-30d6-4038-9294-69da03b8eb21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bcb73dd-b4b5-4233-ade7-2cebb0d1cd71&quot;,&quot;ea0b493a-87e2-48c8-a2f4-62e2afd3d2d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;9bffa2ee-6f92-4836-8f81-73c4413bf609&quot;,&quot;title&quot;:&quot;ser service test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\searchService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\searchService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;posts&quot;,&quot;fullTitle&quot;:&quot;ser service test posts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;type = \&quot;posts\&quot;;\nawait searchServices.search(q, type, page, limit, sort, time, currentUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cbe1443-b418-4ad0-9cea-caaa15e71bf8&quot;,&quot;parentUUID&quot;:&quot;9bffa2ee-6f92-4836-8f81-73c4413bf609&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;comments&quot;,&quot;fullTitle&quot;:&quot;ser service test comments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;type = \&quot;comments\&quot;;\nawait searchServices.search(q, type, page, limit, sort, time, currentUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b1ab009-127e-4975-8f88-42547356faef&quot;,&quot;parentUUID&quot;:&quot;9bffa2ee-6f92-4836-8f81-73c4413bf609&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;posts&quot;,&quot;fullTitle&quot;:&quot;ser service test posts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;type = \&quot;communities\&quot;;\nawait searchServices.search(q, type, page, limit, sort, time, currentUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ec376dc-9424-4518-b9b7-cd49397ec105&quot;,&quot;parentUUID&quot;:&quot;9bffa2ee-6f92-4836-8f81-73c4413bf609&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;posts&quot;,&quot;fullTitle&quot;:&quot;ser service test posts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;type = \&quot;people\&quot;;\nawait searchServices.search(q, type, page, limit, sort, time, currentUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea25b6f8-ab0c-46ac-beb0-f2f37c22348e&quot;,&quot;parentUUID&quot;:&quot;9bffa2ee-6f92-4836-8f81-73c4413bf609&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cbe1443-b418-4ad0-9cea-caaa15e71bf8&quot;,&quot;2b1ab009-127e-4975-8f88-42547356faef&quot;,&quot;5ec376dc-9424-4518-b9b7-cd49397ec105&quot;,&quot;ea25b6f8-ab0c-46ac-beb0-f2f37c22348e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;1fd07b9d-e226-49ad-9c58-c8a5931d781f&quot;,&quot;title&quot;:&quot;Subreddit Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4f6cd5a2-0464-4df2-a786-9572e66e7ad9&quot;,&quot;title&quot;:&quot;Subreddit services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f52d22da-98cd-4189-a1ea-b3eb0b6e4f5d&quot;,&quot;title&quot;:&quot;createSubreddit function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test createSubreddit function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  createOne: async (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n      },\n    };\n    return response;\n  },\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  subscribe: async (subredditId, userId) =&gt; {\n    return true;\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      data: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  subscribe: async (subredditId, userId) =&gt; {\n    return true;\n  },\n  disInvite: async (userId, subredditName) =&gt; {\n    return true;\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nlet userName = \&quot;khaled\&quot;;\nlet data = {\n  owner: userName,\n  fixedName: \&quot;subreddit\&quot;,\n  type: \&quot;Public\&quot;,\n  nsfw: true,\n};\nlet profilePicture = \&quot;profile.png\&quot;;\nconst result = await subredditServices.createSubreddit(\n  data,\n  userName,\n  profilePicture\n);\nexpect(result.data._id).to.equal(\&quot;10\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb7f3d7d-203b-494b-87d4-778c23217df2&quot;,&quot;parentUUID&quot;:&quot;f52d22da-98cd-4189-a1ea-b3eb0b6e4f5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test (fail) &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test createSubreddit function  second test (fail) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  createOne: async (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n      },\n    };\n    return response;\n  },\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      data: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nlet userName = \&quot;khaled\&quot;;\nlet data = {\n  owner: userName,\n  fixedName: \&quot;subreddit\&quot;,\n  type: \&quot;Public\&quot;,\n  nsfw: true,\n};\nlet profilePicture = \&quot;profile.png\&quot;;\nconst result = await subredditServices.createSubreddit(\n  data,\n  userName,\n  profilePicture\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.ALREADY_EXISTS);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ef2712d-e50d-48db-a389-f9ff8efa2fb0&quot;,&quot;parentUUID&quot;:&quot;f52d22da-98cd-4189-a1ea-b3eb0b6e4f5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Third test (fail) &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test createSubreddit function  Third test (fail) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  createOne: async (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n      },\n    };\n    return response;\n  },\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return {\n      success: false,\n      msg: \&quot;Invalid data: A subreddit name must have more or equal then 2 characters\&quot;,\n    };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      data: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nlet userName = \&quot;khaled\&quot;;\nlet data = {\n  owner: userName,\n  fixedName: \&quot;s\&quot;,\n  type: \&quot;Public\&quot;,\n  nsfw: true,\n};\nlet profilePicture = \&quot;profile.png\&quot;;\nconst result = await subredditServices.createSubreddit(\n  data,\n  userName,\n  profilePicture\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);\nexpect(result.msg).to.equal(\n  \&quot;Invalid data: A subreddit name must have more or equal then 2 characters\&quot;\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa2c31e-44e8-4028-a879-70f356d136e0&quot;,&quot;parentUUID&quot;:&quot;f52d22da-98cd-4189-a1ea-b3eb0b6e4f5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb7f3d7d-203b-494b-87d4-778c23217df2&quot;,&quot;4ef2712d-e50d-48db-a389-f9ff8efa2fb0&quot;,&quot;4fa2c31e-44e8-4028-a879-70f356d136e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;45e422ff-8a2f-482f-9681-3525b663c511&quot;,&quot;title&quot;:&quot;retrieveSubreddit function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test retrieveSubreddit function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.retrieveSubreddit(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.data._id).to.equal(\&quot;10\&quot;);\nexpect(result.data.fixedName).to.equal(\&quot;subreddit\&quot;);\nexpect(result.data.nsfw).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a6f4c83-f76a-4178-82b1-c57b071a0467&quot;,&quot;parentUUID&quot;:&quot;45e422ff-8a2f-482f-9681-3525b663c511&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test retrieveSubreddit function  second test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.SUBREDDIT_NOT_FOUND,\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.retrieveSubreddit(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5089d0b-532c-46b9-b256-85aeade01e42&quot;,&quot;parentUUID&quot;:&quot;45e422ff-8a2f-482f-9681-3525b663c511&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a6f4c83-f76a-4178-82b1-c57b071a0467&quot;,&quot;e5089d0b-532c-46b9-b256-85aeade01e42&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;baef8f6f-45c9-4a10-ab2a-846731f5e78a&quot;,&quot;title&quot;:&quot;deleteSubreddit function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteSubreddit function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isOwner: async (subredditName, userID) =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n  delete: async (subredditName) =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4978ba7d-5afd-4910-a26a-5f95e9eb0ef2&quot;,&quot;parentUUID&quot;:&quot;baef8f6f-45c9-4a10-ab2a-846731f5e78a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteSubreddit function  second test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isOwner: async (subredditName, userID) =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n  delete: async (subredditName) =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2910f102-1215-4a97-878d-cc9fdc2f9d38&quot;,&quot;parentUUID&quot;:&quot;baef8f6f-45c9-4a10-ab2a-846731f5e78a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteSubreddit function  third test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isOwner: async (subredditName, userID) =&gt; {\n    return { success: false, error: mongoErrors.NOT_FOUND };\n  },\n  delete: async (subredditName) =&gt; {\n    return { success: false, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_OWNER);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c5ae08f-2895-4640-b79d-c232b85dddc9&quot;,&quot;parentUUID&quot;:&quot;baef8f6f-45c9-4a10-ab2a-846731f5e78a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteSubreddit function  fourth test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isOwner: async (subredditName, userID) =&gt; {\n    return { success: true, error: mongoErrors.NOT_FOUND };\n  },\n  delete: async (subredditName) =&gt; {\n    return {\n      success: false,\n      error: mongoErrors.UNKOWN,\n      msg: \&quot;mongo error\&quot;,\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(mongoErrors.UNKOWN);\nexpect(result.msg).to.equal(\&quot;mongo error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;302d1113-438e-4e9f-8f11-e93dba412bbc&quot;,&quot;parentUUID&quot;:&quot;baef8f6f-45c9-4a10-ab2a-846731f5e78a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4978ba7d-5afd-4910-a26a-5f95e9eb0ef2&quot;,&quot;2910f102-1215-4a97-878d-cc9fdc2f9d38&quot;,&quot;2c5ae08f-2895-4640-b79d-c232b85dddc9&quot;,&quot;302d1113-438e-4e9f-8f11-e93dba412bbc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d3df01af-abbd-469c-9e26-a81aefb29d56&quot;,&quot;title&quot;:&quot;updateSubredit function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateSubredit function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return { success: true, doc: { moderators: [{ id: \&quot;1\&quot; }] } };\n  },\n  update: async (subredditName, data) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot;, nsfw: false } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  {\n    nsfw: false,\n  }\n);\nexpect(result.success).to.equal(true);\nexpect(result.data._id).to.equal(\&quot;10\&quot;);\nexpect(result.data.nsfw).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f990c68-b55a-43cf-bdb4-5288860f3ae1&quot;,&quot;parentUUID&quot;:&quot;d3df01af-abbd-469c-9e26-a81aefb29d56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateSubredit function  second test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return { success: true, doc: { moderators: [{ id: \&quot;1\&quot; }] } };\n  },\n  update: async (subredditName, data) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot;, nsfw: false } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateSubreddit(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  {\n    nsfw: false,\n  }\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3f05580-5030-44ec-bf61-a0db5de3c06f&quot;,&quot;parentUUID&quot;:&quot;d3df01af-abbd-469c-9e26-a81aefb29d56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateSubredit function  third test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return { success: false };\n  },\n  update: async (subredditName, data) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot;, nsfw: false } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateSubreddit(\n  \&quot;subreddit2\&quot;,\n  \&quot;1\&quot;,\n  {\n    nsfw: false,\n  }\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cd7d5e9-0b00-4809-8d26-c5659fb15639&quot;,&quot;parentUUID&quot;:&quot;d3df01af-abbd-469c-9e26-a81aefb29d56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test (fail)&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateSubredit function  fourth test (fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return { success: true, doc: { moderators: [{ id: \&quot;1\&quot; }] } };\n  },\n  update: async (subredditName, data) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n      msg: \&quot;mongo error\&quot;,\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateSubreddit(\n  \&quot;subreddit2\&quot;,\n  \&quot;1\&quot;,\n  {\n    nsfw: false,\n  }\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);\nexpect(result.msg).to.equal(\&quot;mongo error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d813b637-737a-4b8f-970b-3ff2c2e6b7d6&quot;,&quot;parentUUID&quot;:&quot;d3df01af-abbd-469c-9e26-a81aefb29d56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f990c68-b55a-43cf-bdb4-5288860f3ae1&quot;,&quot;e3f05580-5030-44ec-bf61-a0db5de3c06f&quot;,&quot;6cd7d5e9-0b00-4809-8d26-c5659fb15639&quot;,&quot;d813b637-737a-4b8f-970b-3ff2c2e6b7d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;title&quot;:&quot;subredditsIamIn function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return true;\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: {\n            find: function (val) {\n              return false;\n            },\n          },\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: {\n            find: function (val) {\n              return false;\n            },\n          },\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  \&quot;1\&quot;,\n  \&quot;moderator\&quot;\n);\nexpect(result.success).to.equal(true);\nexpect(result.data[0].fixedName).to.equal(\&quot;subreddit\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b2f53ab-6f44-4e5d-af6f-00dbdda15f9a&quot;,&quot;parentUUID&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return true;\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          subscribed: [\n            {\n              fixedName: \&quot;subreddit\&quot;,\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: {\n        subscribed: [\n          {\n            fixedName: \&quot;subreddit\&quot;,\n          },\n        ],\n      },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  \&quot;1\&quot;,\n  \&quot;subscriber\&quot;\n);\nexpect(result.success).to.equal(true);\nexpect(result.data[0].fixedName).to.equal(\&quot;subreddit\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cdbfa5a-6af5-4766-ad5b-c39d3ea7e56d&quot;,&quot;parentUUID&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  third test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return true;\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n      msg: \&quot;mongo error\&quot;,\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  \&quot;1\&quot;,\n  \&quot;moderator\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39fd0902-dd4f-46c2-ad94-d99182f09e12&quot;,&quot;parentUUID&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  fourth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return true;\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n      msg: \&quot;mongo error\&quot;,\n    };\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  \&quot;1\&quot;,\n  \&quot;subscriber\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83f98b98-3727-4b7b-8ac1-e2b031e5cc19&quot;,&quot;parentUUID&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  fifth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return true;\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\&quot;1\&quot;, \&quot;sub\&quot;);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.INVALID_ENUM);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4131ab37-d674-4d96-96cf-7f0d54aa223d&quot;,&quot;parentUUID&quot;:&quot;a268f926-ea95-493b-996c-3b3cb11a27bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b2f53ab-6f44-4e5d-af6f-00dbdda15f9a&quot;,&quot;6cdbfa5a-6af5-4766-ad5b-c39d3ea7e56d&quot;,&quot;39fd0902-dd4f-46c2-ad94-d99182f09e12&quot;,&quot;83f98b98-3727-4b7b-8ac1-e2b031e5cc19&quot;,&quot;4131ab37-d674-4d96-96cf-7f0d54aa223d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c1c3a8aa-a370-43d5-af60-8b76f3ddb3b3&quot;,&quot;title&quot;:&quot;subredditsModeratedBy function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsModeratedBy function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsModeratedBy(\&quot;khaled\&quot;);\nexpect(result.success).to.equal(true);\nexpect(result.data[0].fixedName).to.equal(\&quot;subreddit\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b216b6-5626-4472-9e81-2fe5b8579dbd&quot;,&quot;parentUUID&quot;:&quot;c1c3a8aa-a370-43d5-af60-8b76f3ddb3b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsModeratedBy function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: false,\n      error: subredditErrors.MONGO_ERR,\n      msg: \&quot;mongo error\&quot;,\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsModeratedBy(\&quot;fathy\&quot;);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e423703-f611-4b19-8648-567f5fda1c00&quot;,&quot;parentUUID&quot;:&quot;c1c3a8aa-a370-43d5-af60-8b76f3ddb3b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66b216b6-5626-4472-9e81-2fe5b8579dbd&quot;,&quot;5e423703-f611-4b19-8648-567f5fda1c00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;title&quot;:&quot;inviteMod function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2510befd-dff7-4bd4-b68b-e46d36a07b2a&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57d0afaf-ab28-4c4e-958f-b7f4aa978676&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  third test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;484710e2-9773-468f-9812-eb3b01cce301&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fourth test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  fourth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: false };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f872db30-95a2-401c-81f2-4a980a0c603b&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fifth test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  fifth test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.ALREADY_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f674e027-6b70-41fe-a4d3-450414c879f4&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test inviteMod function  6th test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot; }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.inviteMod(\n  \&quot;subreddit\&quot;,\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  {\n    permissions: {\n      all: false,\n      access: true,\n      config: true,\n      flair: false,\n      posts: false,\n    },\n  }\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a8bd93b-604c-45af-95a2-aecb2cc73021&quot;,&quot;parentUUID&quot;:&quot;914b8cfa-6a94-44cf-a8fb-15d18ee60f6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2510befd-dff7-4bd4-b68b-e46d36a07b2a&quot;,&quot;57d0afaf-ab28-4c4e-958f-b7f4aa978676&quot;,&quot;484710e2-9773-468f-9812-eb3b01cce301&quot;,&quot;f872db30-95a2-401c-81f2-4a980a0c603b&quot;,&quot;f674e027-6b70-41fe-a4d3-450414c879f4&quot;,&quot;8a8bd93b-604c-45af-95a2-aecb2cc73021&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;84881aab-ab48-498c-aa84-5178e3333b27&quot;,&quot;title&quot;:&quot;handleInvitation function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test handleInvitation function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  returnInvitations: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateInvitations: async (userId, invitations) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: {\n          equals: function (val) {\n            return false;\n          },\n        },\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n  addModerator: async () =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n  disInvite: async () =&gt; {\n    return true;\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.handleInvitation(\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;default.png\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;accept\&quot;\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb1c7bd8-aae5-41be-b499-02695c25dff5&quot;,&quot;parentUUID&quot;:&quot;84881aab-ab48-498c-aa84-5178e3333b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test handleInvitation function  2nd test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  returnInvitations: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateInvitations: async (userId, invitations) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  addModerator: async () =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n  disInvite: async () =&gt; {\n    return true;\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.handleInvitation(\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;default.png\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;accept\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bc9eee9-b163-44a7-a2ea-def20a22ada1&quot;,&quot;parentUUID&quot;:&quot;84881aab-ab48-498c-aa84-5178e3333b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test handleInvitation function  3rd test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  returnInvitations: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateInvitations: async (userId, invitations) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: {\n          equals: function (val) {\n            return false;\n          },\n        },\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n  addModerator: async () =&gt; {\n    return { success: true, doc: { fixedName: \&quot;subreddit\&quot; } };\n  },\n  disInvite: async () =&gt; {\n    return true;\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.handleInvitation(\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;default.png\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;accept\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NO_INVITATION);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0791935-263d-4f95-82ca-4b168021f1e1&quot;,&quot;parentUUID&quot;:&quot;84881aab-ab48-498c-aa84-5178e3333b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test handleInvitation function  4th test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  returnInvitations: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: {\n        pendingInvitations: [\n          {\n            subredditId: \&quot;10\&quot;,\n            permissions: {\n              all: false,\n              access: true,\n              config: true,\n              flair: false,\n              posts: false,\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateInvitations: async (userId, invitations) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: {\n          equals: function (val) {\n            return false;\n          },\n        },\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n  addModerator: async () =&gt; {\n    return { success: false };\n  },\n  disInvite: async () =&gt; {\n    return true;\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.handleInvitation(\n  \&quot;1\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;default.png\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;accept\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.MONGO_ERR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;872fb14a-26c5-42b3-a165-352930db8fa1&quot;,&quot;parentUUID&quot;:&quot;84881aab-ab48-498c-aa84-5178e3333b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb1c7bd8-aae5-41be-b499-02695c25dff5&quot;,&quot;6bc9eee9-b163-44a7-a2ea-def20a22ada1&quot;,&quot;e0791935-263d-4f95-82ca-4b168021f1e1&quot;,&quot;872fb14a-26c5-42b3-a165-352930db8fa1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;title&quot;:&quot;deleteMod function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2ccdec1-ae09-4b49-8b7b-6036e7642c7d&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  2nd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea0efd8c-dcb6-46b0-8589-5cbb7e01ac01&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  3rd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0ad2710-dacd-496e-933d-d9254a01eecd&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  4th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: false };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;486d3e23-2a52-444c-a747-845133860e99&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  5th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.Not_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f565919-b162-4e6c-b862-9106866d3036&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  6th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.retrieveSubreddit(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41155998-70f3-4490-8276-81109cba4a0a&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test deleteMod function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.deleteMod(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.CANNOT_DELETE);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d76a8e81-b9a3-4f5e-a8e4-d7b57bb908f9&quot;,&quot;parentUUID&quot;:&quot;beb11a79-e80c-42e9-89f1-0495876da593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2ccdec1-ae09-4b49-8b7b-6036e7642c7d&quot;,&quot;ea0efd8c-dcb6-46b0-8589-5cbb7e01ac01&quot;,&quot;d0ad2710-dacd-496e-933d-d9254a01eecd&quot;,&quot;486d3e23-2a52-444c-a747-845133860e99&quot;,&quot;5f565919-b162-4e6c-b862-9106866d3036&quot;,&quot;41155998-70f3-4490-8276-81109cba4a0a&quot;,&quot;d76a8e81-b9a3-4f5e-a8e4-d7b57bb908f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e37c4d98-c372-441d-8d2a-d4da5ddfda0e&quot;,&quot;title&quot;:&quot;subredditsIamIn function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: [\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;moderator\&quot;\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08a9b56c-41e9-4d87-a5dd-163ca1f02851&quot;,&quot;parentUUID&quot;:&quot;e37c4d98-c372-441d-8d2a-d4da5ddfda0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  getSubreddits: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: [\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subscriber\&quot;\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b6fb4a5-194a-4be0-a4b9-c51f331b46ea&quot;,&quot;parentUUID&quot;:&quot;e37c4d98-c372-441d-8d2a-d4da5ddfda0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsIamIn function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  getSubreddits: async (userId) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: [\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        fixedName: \&quot;subreddit\&quot;,\n        nsfw: true,\n      },\n    };\n  },\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: [\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsIamIn(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;moderatorrrr\&quot;\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.INVALID_ENUM);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fdaf2c1-3a29-49f8-b48c-66feb1a2f1cc&quot;,&quot;parentUUID&quot;:&quot;e37c4d98-c372-441d-8d2a-d4da5ddfda0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08a9b56c-41e9-4d87-a5dd-163ca1f02851&quot;,&quot;3b6fb4a5-194a-4be0-a4b9-c51f331b46ea&quot;,&quot;0fdaf2c1-3a29-49f8-b48c-66feb1a2f1cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ab77ceb1-6f94-40e3-bf4c-cb07ccff800e&quot;,&quot;title&quot;:&quot;subredditsModeratedBy function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test subredditsModeratedBy function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getSubreddits: async (userId, type) =&gt; {\n    return {\n      success: true,\n      doc: [\n        {\n          fixedName: \&quot;subreddit\&quot;,\n          users: [\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n            {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          ],\n        },\n      ],\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.subredditsModeratedBy(\&quot;khaled\&quot;);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e489d3-cc68-49a8-9295-fa7600113964&quot;,&quot;parentUUID&quot;:&quot;ab77ceb1-6f94-40e3-bf4c-cb07ccff800e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8e489d3-cc68-49a8-9295-fa7600113964&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e2ec3034-e9a1-4cb9-86be-5fcacb05fb59&quot;,&quot;title&quot;:&quot;getFavourites function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test getFavourites function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  getFavouriteSubreddits: async (userId) =&gt; {\n    return { success: true, doc: { fixedName: \&quot;sub\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.getFavourites(\&quot;19148901\&quot;);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dd351e6-7c7c-4472-a54d-6298b89d5f33&quot;,&quot;parentUUID&quot;:&quot;e2ec3034-e9a1-4cb9-86be-5fcacb05fb59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test getFavourites function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  getFavouriteSubreddits: async (userId) =&gt; {\n    return { success: false, doc: { fixedName: \&quot;sub\&quot; } };\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.getFavourites(\&quot;19148901\&quot;);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adac631c-d15a-42de-8eec-b889a1513bcc&quot;,&quot;parentUUID&quot;:&quot;e2ec3034-e9a1-4cb9-86be-5fcacb05fb59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9e748aa-003d-4498-9eec-112508d83359&quot;,&quot;title&quot;:&quot;retrieveSubreddit function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test getFavourites function  retrieveSubreddit function  first test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n};\nconst SubredditRepository = {\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.retrieveSubreddit(\n  \&quot;1\&quot;,\n  \&quot;subreddit\&quot;,\n  true\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;410030ae-b7ec-4c94-a552-22116d5c11ba&quot;,&quot;parentUUID&quot;:&quot;f9e748aa-003d-4498-9eec-112508d83359&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;410030ae-b7ec-4c94-a552-22116d5c11ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[&quot;5dd351e6-7c7c-4472-a54d-6298b89d5f33&quot;,&quot;adac631c-d15a-42de-8eec-b889a1513bcc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;title&quot;:&quot;updateModeratorSettings function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9729a3d5-5852-4ad0-9c62-d4a4cccb5c0d&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  2nd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0432b829-bea4-40e1-8ac8-378b4ae619d8&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  3rd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3b3582d-5cbf-4c3e-80ee-dc9023c69de3&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  4th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: false };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed60ed2e-9902-4f23-8b41-70f58d94ad6b&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  5th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.Not_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1639391c-c605-4a09-8975-dc782885ed19&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  6th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68111c6f-fb52-4a23-905b-a35f7fda92ed&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test updateModeratorSettings function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.updateModeratorSettings(\n  \&quot;subreddit\&quot;,\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;khaled\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8279fbc5-fe50-485c-9aeb-665657d2a5d1&quot;,&quot;parentUUID&quot;:&quot;f6e3a35f-0cbd-44b8-b9e0-49d9e737c98d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9729a3d5-5852-4ad0-9c62-d4a4cccb5c0d&quot;,&quot;0432b829-bea4-40e1-8ac8-378b4ae619d8&quot;,&quot;f3b3582d-5cbf-4c3e-80ee-dc9023c69de3&quot;,&quot;ed60ed2e-9902-4f23-8b41-70f58d94ad6b&quot;,&quot;1639391c-c605-4a09-8975-dc782885ed19&quot;,&quot;68111c6f-fb52-4a23-905b-a35f7fda92ed&quot;,&quot;8279fbc5-fe50-485c-9aeb-665657d2a5d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;title&quot;:&quot;banUnban function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: false };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d4a8448-b218-4398-ad8a-0f567dc030aa&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: false };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.mongoErrors);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e589f37d-5891-43ba-a1ed-51c999292ee1&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  2nd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bfa43bd-3c06-49b8-b9ec-feb9d16efa97&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  3rd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f95f7ddd-befd-4fe2-b106-12386da2d338&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  4th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: false };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3153cccc-a653-403d-b670-6a1165e01ac9&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;5th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  5th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: true };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.ALREADY_BANED);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e9875a9-ced6-4664-80fd-a09844d2c9ad&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  6th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f40b9b7f-70a8-4112-9e67-e2dabd49834e&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c780dbd3-df5c-4b0d-998a-8e3249eb6dff&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test banUnban function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: true };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: true };\n  },\n  getPunished: async (subredditName) =&gt; {\n    return { doc: { punished: {} } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.banUnban(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;unban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56c932f1-db59-4c66-b692-4cd165fa383a&quot;,&quot;parentUUID&quot;:&quot;ff77ec68-173d-497c-ae38-5170c2ef6310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d4a8448-b218-4398-ad8a-0f567dc030aa&quot;,&quot;e589f37d-5891-43ba-a1ed-51c999292ee1&quot;,&quot;9bfa43bd-3c06-49b8-b9ec-feb9d16efa97&quot;,&quot;f95f7ddd-befd-4fe2-b106-12386da2d338&quot;,&quot;3153cccc-a653-403d-b670-6a1165e01ac9&quot;,&quot;8e9875a9-ced6-4664-80fd-a09844d2c9ad&quot;,&quot;f40b9b7f-70a8-4112-9e67-e2dabd49834e&quot;,&quot;c780dbd3-df5c-4b0d-998a-8e3249eb6dff&quot;,&quot;56c932f1-db59-4c66-b692-4cd165fa383a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;title&quot;:&quot;muteUnmute function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: false };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a27319-a9e0-4376-a3c6-68c497c020e8&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;first test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  first test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: false };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63b8670e-f96b-4ee4-81f8-eeb293052367&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;2nd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  2nd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: false,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6967da5-3a91-4226-9781-b6281d64bf7f&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;3rd test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  3rd test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: false,\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(subredditErrors.NOT_MODERATOR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3b18607-4da5-4b50-a10e-d14db12d80d5&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;4th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  4th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: false };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 10 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: true };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);\nexpect(result.error).to.equal(userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdfe5a55-52eb-4869-9c89-8f4f0871588a&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;6th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  6th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n        userName: \&quot;khaled\&quot;,\n      },\n    };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 10,\n          },\n        ],\n      },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: {\n        _id: \&quot;10\&quot;,\n        moderators: [\n          {\n            _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            modDate: 15,\n          },\n        ],\n      },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return {\n      success: true,\n      doc: {\n        moderators: [\n          {\n            user: {\n              _id: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n            },\n          },\n        ],\n      },\n    };\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5c7ea90-d96c-4faf-aa19-1a5c03edf939&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;ban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34bce1ac-2bcf-40ed-862f-84250640aa1b&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;7th test &quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subreddit services Test muteUnmute function  7th test &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  isSubscribed: async (user, subreddit) =&gt; {\n    return false;\n  },\n  findByUserName: async (userName, select, pop) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  updateByName: async (userName, subredditId, permissions) =&gt; {\n    return { success: true, doc: { _id: \&quot;1\&quot;, userName: \&quot;khaled\&quot; } };\n  },\n  checkInvetation: async (userId, subredditId) =&gt; {\n    return { suucess: true };\n  },\n};\nconst SubredditRepository = {\n  create: async (data, userName, profilePicture) =&gt; {\n    return { success: true, doc: { _id: \&quot;10\&quot; } };\n  },\n  getsubreddit: async (name, select, popOptions) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, fixedName: \&quot;subreddit\&quot;, nsfw: true },\n    };\n  },\n  isModerator_1: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 30 }] },\n    };\n  },\n  isModerator_2: async (subredditName, userID) =&gt; {\n    return {\n      success: true,\n      doc: { _id: \&quot;10\&quot;, moderators: [{ _id: \&quot;1\&quot;, modDate: 15 }] },\n    };\n  },\n  invite: async (userId, subredditName) =&gt; {\n    return { success: true };\n  },\n  getModerators: async (subredditName) =&gt; {\n    return true;\n  },\n  updateModerators: async (subredditName, moderators) =&gt; {\n    return { success: false };\n  },\n  checkPunished: async (userId, subredditName, action) =&gt; {\n    return { success: true };\n  },\n  banUser: async (user, subredditName, data) =&gt; {\n    return { success: true };\n  },\n  getPunished: async (subredditName) =&gt; {\n    return { doc: { punished: {} } };\n  },\n};\nconst FlairRepository = {};\nconst subredditServices = new subredditService({\n  SubredditRepository,\n  FlairRepository,\n  UserRepository,\n});\nconst result = await subredditServices.muteUnmute(\n  mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n  \&quot;subreddit\&quot;,\n  \&quot;khaled\&quot;,\n  \&quot;unban\&quot;,\n  {}\n);\nexpect(result.success).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f848f4ec-19c3-427d-a6db-ed917acabbc1&quot;,&quot;parentUUID&quot;:&quot;393c5cd6-61c5-4549-8e1c-6bad2753b519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20a27319-a9e0-4376-a3c6-68c497c020e8&quot;,&quot;63b8670e-f96b-4ee4-81f8-eeb293052367&quot;,&quot;a6967da5-3a91-4226-9781-b6281d64bf7f&quot;,&quot;c3b18607-4da5-4b50-a10e-d14db12d80d5&quot;,&quot;fdfe5a55-52eb-4869-9c89-8f4f0871588a&quot;,&quot;e5c7ea90-d96c-4faf-aa19-1a5c03edf939&quot;,&quot;34bce1ac-2bcf-40ed-862f-84250640aa1b&quot;,&quot;f848f4ec-19c3-427d-a6db-ed917acabbc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;35552116-e1f4-4e24-aa68-08a819c27d90&quot;,&quot;title&quot;:&quot;Subscriable Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\subredditService.js&quot;,&quot;file&quot;:&quot;\\test\\services\\subredditService.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;subscriable&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subscriable Test subscriable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const subscriable = await subredditServices.subscriable(\n  subredditName,\n  userId\n);\nexpect(subscriable.success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3387f21f-60f5-4a4a-baed-a2d3fbc20fe0&quot;,&quot;parentUUID&quot;:&quot;35552116-e1f4-4e24-aa68-08a819c27d90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;banned&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subscriable Test banned&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;userId = ObjectId(\&quot;678a5fccf267fc3a463b35e5\&quot;);\nconst subscriable = await subredditServices.subscriable(\n  subredditName,\n  userId\n);\nexpect(subscriable.success).to.equal(false);\nexpect(subscriable.error).to.equal(subredditErrors.BANNED);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c475696f-acdc-4c26-b67c-2a1063ca1e79&quot;,&quot;parentUUID&quot;:&quot;35552116-e1f4-4e24-aa68-08a819c27d90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not found&quot;,&quot;fullTitle&quot;:&quot;Subreddit Test Subscriable Test not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;SubredditRepository.findByName = () =&gt; {\n  return { success: false };\n};\nconst subscriable = await subredditServices.subscriable(\n  subredditName,\n  userId\n);\nexpect(subscriable.success).to.equal(false);\nexpect(subscriable.error).to.equal(subredditErrors.SUBREDDIT_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d77ab0ba-05f6-466a-85ba-b5b1100e79c4&quot;,&quot;parentUUID&quot;:&quot;35552116-e1f4-4e24-aa68-08a819c27d90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3387f21f-60f5-4a4a-baed-a2d3fbc20fe0&quot;,&quot;c475696f-acdc-4c26-b67c-2a1063ca1e79&quot;,&quot;d77ab0ba-05f6-466a-85ba-b5b1100e79c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;32f64104-b8cc-4952-a153-cdd020a76db3&quot;,&quot;title&quot;:&quot;User Post Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f68874d3-dae9-4325-9c00-4236a223aeb1&quot;,&quot;title&quot;:&quot;User Post services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7f898a58-72eb-4349-8f85-48ebccc8f6e8&quot;,&quot;title&quot;:&quot;setVotePostStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setVotePostStatus function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;3\&quot;,\n      postVoteStatus: 0,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n};\nlet posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nconst result = postservices.setVotePostStatus(user, posts);\nexpect(result[0].postVoteStatus).to.equal(1);\nexpect(result[1].postVoteStatus).to.equal(0);\nexpect(result[2].postVoteStatus).to.equal(-1);\nexpect(result[3].postVoteStatus).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e09f6ab-2584-46a6-9fea-b441ef658023&quot;,&quot;parentUUID&quot;:&quot;7f898a58-72eb-4349-8f85-48ebccc8f6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setVotePostStatus function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let posts = [];\nlet user = { votePost: [] };\nconst result = postservices.setVotePostStatus(user, posts);\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7edce7f-47ca-4c7a-a53b-fb3507ab92fa&quot;,&quot;parentUUID&quot;:&quot;7f898a58-72eb-4349-8f85-48ebccc8f6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setVotePostStatus function  third test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n];\nlet user = { votePost: [] };\nconst result = postservices.setVotePostStatus(user, posts);\nexpect(result[0].postVoteStatus).to.equal(0);\nexpect(result[1].postVoteStatus).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a40733f2-4237-49c6-b5f4-6ec889747129&quot;,&quot;parentUUID&quot;:&quot;7f898a58-72eb-4349-8f85-48ebccc8f6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e09f6ab-2584-46a6-9fea-b441ef658023&quot;,&quot;f7edce7f-47ca-4c7a-a53b-fb3507ab92fa&quot;,&quot;a40733f2-4237-49c6-b5f4-6ec889747129&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5250c7bd-6495-4ed2-a869-26cd9e172723&quot;,&quot;title&quot;:&quot;selectPostsWithVotes function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test selectPostsWithVotes function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Posts = [\n  {\n    posts: { id: \&quot;1\&quot; },\n    postVoteStatus: 1,\n  },\n  {\n    posts: { id: \&quot;1\&quot; },\n    postVoteStatus: 0,\n  },\n  {\n    posts: { id: \&quot;1\&quot; },\n    postVoteStatus: 0,\n  },\n  {\n    posts: { id: \&quot;1\&quot; },\n    postVoteStatus: 0,\n  },\n];\nconst result = postservices.selectPostsWithVotes(Posts, 1);\nexpect(result.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f35fc5a-3f72-4a99-aa3d-1fdfa5a99844&quot;,&quot;parentUUID&quot;:&quot;5250c7bd-6495-4ed2-a869-26cd9e172723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test selectPostsWithVotes function  second test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let posts = [];\nlet user = { votePost: [] };\nconst result = postservices.setVotePostStatus(user, posts);\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0aa775a8-5def-4c24-98ad-c7af6554c372&quot;,&quot;parentUUID&quot;:&quot;5250c7bd-6495-4ed2-a869-26cd9e172723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test selectPostsWithVotes function  third test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n];\nlet user = { votePost: [] };\nconst result = postservices.setVotePostStatus(user, posts);\nexpect(result[0].postVoteStatus).to.equal(0);\nexpect(result[1].postVoteStatus).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c403014a-47c7-436c-a444-c5c07f1c4bdf&quot;,&quot;parentUUID&quot;:&quot;5250c7bd-6495-4ed2-a869-26cd9e172723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f35fc5a-3f72-4a99-aa3d-1fdfa5a99844&quot;,&quot;0aa775a8-5def-4c24-98ad-c7af6554c372&quot;,&quot;c403014a-47c7-436c-a444-c5c07f1c4bdf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e6d85272-aa85-4139-8a6a-255ad31f8096&quot;,&quot;title&quot;:&quot;getUserPosts function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test getUserPosts function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;posts = await postservices.getUserPosts(\&quot;\&quot;, \&quot;\&quot;);\n//console.log(posts);\nexpect(posts.length).to.equal(1);\nexpect(posts[0][\&quot;_id\&quot;]).to.equal(\&quot;1\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b2a3a3e-8a2f-404a-92a6-11335b7b09fa&quot;,&quot;parentUUID&quot;:&quot;e6d85272-aa85-4139-8a6a-255ad31f8096&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test getUserPosts function  second test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;posts = await postservices.getUserPosts(\&quot;\&quot;, \&quot;Hot\&quot;);\n//console.log(posts);\nexpect(posts.length).to.equal(1);\nexpect(posts[0][\&quot;_id\&quot;]).to.equal(\&quot;1\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a640b07-eb85-4cec-aa4b-e6c23266663b&quot;,&quot;parentUUID&quot;:&quot;e6d85272-aa85-4139-8a6a-255ad31f8096&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test getUserPosts function  thrid test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;posts = await postservices.getUserPosts(\&quot;\&quot;, \&quot;Top\&quot;);\n//console.log(posts);\nexpect(posts.length).to.equal(1);\nexpect(posts[0][\&quot;_id\&quot;]).to.equal(\&quot;1\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a32f4524-9434-4626-a220-a32612b50efb&quot;,&quot;parentUUID&quot;:&quot;e6d85272-aa85-4139-8a6a-255ad31f8096&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b2a3a3e-8a2f-404a-92a6-11335b7b09fa&quot;,&quot;0a640b07-eb85-4cec-aa4b-e6c23266663b&quot;,&quot;a32f4524-9434-4626-a220-a32612b50efb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;92c8f485-fefb-4b70-9768-084f3460b61d&quot;,&quot;title&quot;:&quot;removehiddenposts function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test removehiddenposts function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;4\&quot;],\n};\nlet user2 = {\n  hidden: [\&quot;10\&quot;],\n};\nlet posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nlet posts2 = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nconst result = postservices.removeHiddenPosts(user, posts);\nconst result2 = postservices.removeHiddenPosts(user2, posts2);\nexpect(result.length).to.equal(2);\nexpect(result2.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad3695a9-eb07-4188-9e4e-189fb290bec8&quot;,&quot;parentUUID&quot;:&quot;92c8f485-fefb-4b70-9768-084f3460b61d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad3695a9-eb07-4188-9e4e-189fb290bec8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6cc27511-a0c9-4498-9e22-2f50a96efc7b&quot;,&quot;title&quot;:&quot;setSavedPostStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setSavedPostStatus function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  saved: [\n    {\n      savedPost: \&quot;1\&quot;,\n    },\n    {\n      savedPost: \&quot;2\&quot;,\n    },\n    {\n      savedPost: \&quot;3\&quot;,\n    },\n  ],\n};\nlet user2 = {\n  saved: [\n    {\n      savedPost: \&quot;10\&quot;,\n    },\n    {\n      savedPost: \&quot;20\&quot;,\n    },\n    {\n      savedPost: \&quot;30\&quot;,\n    },\n  ],\n};\nlet posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nlet posts2 = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nconst result = postservices.setSavedPostStatus(user, posts);\nconst result2 = postservices.setSavedPostStatus(user2, posts2);\nexpect(result.length).to.equal(4);\nexpect(result[0][\&quot;isSaved\&quot;]).to.equal(true);\nexpect(result[1][\&quot;isSaved\&quot;]).to.equal(true);\nexpect(result[2][\&quot;isSaved\&quot;]).to.equal(false);\nexpect(result[3][\&quot;isSaved\&quot;]).to.equal(false);\nexpect(result2.length).to.equal(4);\nexpect(result2[0][\&quot;isSaved\&quot;]).to.equal(false);\nexpect(result2[1][\&quot;isSaved\&quot;]).to.equal(false);\nexpect(result2[2][\&quot;isSaved\&quot;]).to.equal(false);\nexpect(result2[3][\&quot;isSaved\&quot;]).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f99c573d-7e69-4bf6-a44d-0e7b1c71a613&quot;,&quot;parentUUID&quot;:&quot;6cc27511-a0c9-4498-9e22-2f50a96efc7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f99c573d-7e69-4bf6-a44d-0e7b1c71a613&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4d4698b5-c88d-4e2f-9bd3-500aee893a9a&quot;,&quot;title&quot;:&quot;setHiddenPostStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setHiddenPostStatus function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  hidden: [\&quot;1\&quot;, \&quot;4\&quot;],\n};\nlet user2 = {\n  hidden: [{\n    _id:\&quot;10\&quot;\n  }],\n};\nlet posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nlet posts2 = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nconst result = postservices.setHiddenPostStatus(user, posts);\nconst result2 = postservices.setHiddenPostStatus(user2, posts2);\nexpect(result.length).to.equal(4);\nexpect(result[0][\&quot;isHidden\&quot;]).to.equal(true);\nexpect(result[1][\&quot;isHidden\&quot;]).to.equal(false);\nexpect(result[2][\&quot;isHidden\&quot;]).to.equal(true);\nexpect(result[3][\&quot;isHidden\&quot;]).to.equal(false);\nexpect(result2.length).to.equal(4);\nexpect(result2[0][\&quot;isHidden\&quot;]).to.equal(false);\nexpect(result2[1][\&quot;isHidden\&quot;]).to.equal(false);\nexpect(result2[2][\&quot;isHidden\&quot;]).to.equal(false);\nexpect(result2[3][\&quot;isHidden\&quot;]).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;182b625e-ed1c-400b-96e5-1a929936b467&quot;,&quot;parentUUID&quot;:&quot;4d4698b5-c88d-4e2f-9bd3-500aee893a9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;182b625e-ed1c-400b-96e5-1a929936b467&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;2ca7c84a-a3df-4860-9a38-0ffe2cbcecd6&quot;,&quot;title&quot;:&quot;setPostOwnerData function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setPostOwnerData function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let posts = [\n  {\n    _id: \&quot;1\&quot;,\n    ownerType: \&quot;User\&quot;,\n    owner: { _id: \&quot;1\&quot;, userName: \&quot;ahmed\&quot; },\n    author: {\n      _id: \&quot;1\&quot;,\n      userName: \&quot;ahmed\&quot;,\n    },\n    sharedFrom:{\n      _id: \&quot;10\&quot;,\n      ownerType: \&quot;User\&quot;,\n      owner: { _id: \&quot;1\&quot;, userName: \&quot;ahmed\&quot; ,profilePicture:\&quot;\&quot;},\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    }\n  },\n  {\n    _id: \&quot;3\&quot;,\n    ownerType: \&quot;User\&quot;,\n    owner: {\n      _id: \&quot;3\&quot;,\n      userName: \&quot;ahmed2\&quot;,\n    },\n    author: {\n      _id: \&quot;3\&quot;,\n      userName: \&quot;ahmed2\&quot;,\n    },\n    sharedFrom:{\n      _id: \&quot;11\&quot;,\n      ownerType: \&quot;Subreddit\&quot;,\n      owner: { _id: \&quot;1\&quot;, fixedName: \&quot;ahmed\&quot; ,icon:\&quot;\&quot;},\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    }\n  },\n  {\n    _id: \&quot;4\&quot;,\n    ownerType: \&quot;Subreddit\&quot;,\n    owner: {\n      _id: \&quot;1\&quot;,\n      fixedName: \&quot;ahmed3\&quot;,\n    },\n    author: {\n      _id: \&quot;1\&quot;,\n      userName: \&quot;ahmed\&quot;,\n    },\n  },\n  {\n    _id: \&quot;6\&quot;,\n    ownerType: \&quot;Subreddit\&quot;,\n    owner: {\n      _id: \&quot;2\&quot;,\n      fixedName: \&quot;ahmed4\&quot;,\n    },\n    author: {\n      _id: \&quot;1\&quot;,\n      userName: \&quot;ahmed\&quot;,\n    },\n  },\n];\nconst result = postservices.setPostOwnerData(posts);\nexpect(result.length).to.equal(4);\nexpect(result[0][\&quot;name\&quot;]).to.equal(\&quot;ahmed\&quot;);\nexpect(result[1][\&quot;name\&quot;]).to.equal(\&quot;ahmed2\&quot;);\nexpect(result[2][\&quot;name\&quot;]).to.equal(\&quot;ahmed3\&quot;);\nexpect(result[3][\&quot;name\&quot;]).to.equal(\&quot;ahmed4\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd3ec893-eedf-4faa-b418-bc8222dbf51a&quot;,&quot;parentUUID&quot;:&quot;2ca7c84a-a3df-4860-9a38-0ffe2cbcecd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd3ec893-eedf-4faa-b418-bc8222dbf51a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;99ffa590-c34d-4049-88af-2f1c9f0cf4eb&quot;,&quot;title&quot;:&quot;setVoteStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setVoteStatus function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let saved = [\n  {\n    savedPost: {\n      _id: \&quot;1\&quot;,\n      postVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;users/default.png\&quot;,\n      },\n      ownerType: \&quot;User\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    },\n  },\n  {\n    savedPost: {\n      _id: \&quot;2\&quot;,\n      postVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        fixedName: \&quot;ahmed\&quot;,\n        icon: \&quot;subreddits/default.png\&quot;,\n      },\n      ownerType: \&quot;Subreddit\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    },\n  },\n  {\n    savedPost: {\n      _id: \&quot;3\&quot;,\n      postVoteStatus: 1,\n      owner: {\n        _id: \&quot;1\&quot;,\n        fixedName: \&quot;ahmed\&quot;,\n        icon: \&quot;subreddits/default.png\&quot;,\n      },\n      ownerType: \&quot;Subreddit\&quot;,\n      author: {\n        _id: \&quot;1\&quot;,\n        userName: \&quot;ahmed\&quot;,\n      },\n    },\n  },\n];\nlet user = {\n  votePost: [\n    {\n      posts: \&quot;1\&quot;,\n      postVoteStatus: 1,\n    },\n    {\n      posts: \&quot;2\&quot;,\n      postVoteStatus: -1,\n    },\n    {\n      posts: \&quot;4\&quot;,\n      postVoteStatus: -1,\n    },\n  ],\n};\nconst result = postservices.setVoteStatus(user, saved);\nexpect(result.length).to.equal(3);\nexpect(result[2].savedPost.author.name).to.equal(\&quot;ahmed\&quot;);\nexpect(result[2].savedPost.author._id).to.equal(\&quot;1\&quot;);\nexpect(result[2].savedPost.owner.name).to.equal(\&quot;ahmed\&quot;);\nexpect(result[2].savedPost.owner._id).to.equal(\&quot;1\&quot;);\nexpect(result[2].savedPost.owner.icon).to.equal(\n  `${process.env.BACKDOMAIN}/users/default.png`\n);\nexpect(result[2].savedPost.ownerType).to.equal(\&quot;User\&quot;);\nexpect(result[2].savedPost.postVoteStatus).to.equal(1);\nexpect(result[1].savedPost.owner.name).to.equal(\&quot;ahmed\&quot;);\nexpect(result[1].savedPost.owner._id).to.equal(\&quot;1\&quot;);\nexpect(result[1].savedPost.owner.icon).to.equal(\n  \&quot;subreddits/default.png\&quot;\n);\nexpect(result[1].savedPost.ownerType).to.equal(\&quot;Subreddit\&quot;);\nexpect(result[1].savedPost.postVoteStatus).to.equal(-1);\nexpect(result[0].savedPost.owner.name).to.equal(\&quot;ahmed\&quot;);\nexpect(result[0].savedPost.owner._id).to.equal(\&quot;1\&quot;);\nexpect(result[0].savedPost.owner.icon).to.equal(\n  \&quot;subreddits/default.png\&quot;\n);\nexpect(result[0].savedPost.ownerType).to.equal(\&quot;Subreddit\&quot;);\nexpect(result[0].savedPost.postVoteStatus).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e569205d-b654-46e6-bcee-ae07ef8370c6&quot;,&quot;parentUUID&quot;:&quot;99ffa590-c34d-4049-88af-2f1c9f0cf4eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e569205d-b654-46e6-bcee-ae07ef8370c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a9225407-04ca-40d3-a70c-806b80ee000d&quot;,&quot;title&quot;:&quot;setHiddenPostStatus function &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userPostServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userPostServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test,&quot;,&quot;fullTitle&quot;:&quot;User Post Test User Post services Test setHiddenPostStatus function  first test,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let user = {\n  spam: [\&quot;1\&quot;, \&quot;4\&quot;],\n};\nlet user2 = {\n  spam: [{\n    _id:\&quot;10\&quot;\n  }],\n};\nlet posts = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nlet posts2 = [\n  {\n    _id: \&quot;1\&quot;,\n  },\n  {\n    _id: \&quot;3\&quot;,\n  },\n  {\n    _id: \&quot;4\&quot;,\n  },\n  {\n    _id: \&quot;6\&quot;,\n  },\n];\nconst result = postservices.setSpamPostStatus(user, posts);\nconst result2 = postservices.setSpamPostStatus(user2, posts2);\nexpect(result.length).to.equal(4);\nexpect(result[0][\&quot;isSpam\&quot;]).to.equal(true);\nexpect(result[1][\&quot;isSpam\&quot;]).to.equal(false);\nexpect(result[2][\&quot;isSpam\&quot;]).to.equal(true);\nexpect(result[3][\&quot;isSpam\&quot;]).to.equal(false);\nexpect(result2.length).to.equal(4);\nexpect(result2[0][\&quot;isSpam\&quot;]).to.equal(false);\nexpect(result2[1][\&quot;isSpam\&quot;]).to.equal(false);\nexpect(result2[2][\&quot;isSpam\&quot;]).to.equal(false);\nexpect(result2[3][\&quot;isSpam\&quot;]).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;489129fa-d795-41f2-872e-30b827078f51&quot;,&quot;parentUUID&quot;:&quot;a9225407-04ca-40d3-a70c-806b80ee000d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;489129fa-d795-41f2-872e-30b827078f51&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fc9d1f14-ea2c-4632-8b0d-a77be4718961&quot;,&quot;title&quot;:&quot;Authentication Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bde1043f-324e-473f-98fc-f2d0d9904b87&quot;,&quot;title&quot;:&quot;Sign-up services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Sign-up services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  createOne: function (userData) {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconsole.log(\&quot;hi\&quot;);\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.signUp(\n  \&quot;ahmed@gmail\&quot;,\n  \&quot;ahmed\&quot;,\n  \&quot;Aa1234*\&quot;\n);\nassert.equal(output.success, true);\nassert.notEqual(output.token, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96938b28-69cd-4602-87cc-b89140878ab5&quot;,&quot;parentUUID&quot;:&quot;bde1043f-324e-473f-98fc-f2d0d9904b87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test(fail operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Sign-up services Test second test(fail operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  createOne: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.signUp(\n  \&quot;ahmed@gmail\&quot;,\n  \&quot;ahmed\&quot;,\n  \&quot;Aa1234*\&quot;\n);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.USER_ALREADY_EXISTS);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;176c4896-5a72-4fd4-bed2-e0d7ff76afcd&quot;,&quot;parentUUID&quot;:&quot;bde1043f-324e-473f-98fc-f2d0d9904b87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96938b28-69cd-4602-87cc-b89140878ab5&quot;,&quot;176c4896-5a72-4fd4-bed2-e0d7ff76afcd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7d82a053-ba52-4ff7-8d79-391b2df616fc&quot;,&quot;title&quot;:&quot;Log-in services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Log-in services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        checkPassword: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.logIn(\&quot;ahmed\&quot;, \&quot;Aa1234*\&quot;);\nassert.equal(output.success, true);\nassert.notEqual(output.token, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46f00ccb-82eb-45f4-a26c-2519c8d51772&quot;,&quot;parentUUID&quot;:&quot;7d82a053-ba52-4ff7-8d79-391b2df616fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test(success operation of database but wrong password)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Log-in services Test second test(success operation of database but wrong password)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.logIn(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0b29475-5e95-4686-8b87-fe88222b8985&quot;,&quot;parentUUID&quot;:&quot;7d82a053-ba52-4ff7-8d79-391b2df616fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test(incorrect password)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Log-in services Test thrid test(incorrect password)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;123456\&quot;,\n        checkPassword: async (data1, data2) =&gt; {\n          return false;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.logIn(\&quot;ahmed\&quot;, \&quot;1234\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.INCORRECT_PASSWORD);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a776597a-361a-483f-9ab8-4edc64039be7&quot;,&quot;parentUUID&quot;:&quot;7d82a053-ba52-4ff7-8d79-391b2df616fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46f00ccb-82eb-45f4-a26c-2519c8d51772&quot;,&quot;f0b29475-5e95-4686-8b87-fe88222b8985&quot;,&quot;a776597a-361a-483f-9ab8-4edc64039be7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;8c06d15f-b197-4644-a4a3-32ff9f5e4dac&quot;,&quot;title&quot;:&quot;Forgot-username services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-username services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmail: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        checkPassword: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.forgotUserName(\&quot;\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a16bb10a-2704-4f27-a606-8acd07e56b9a&quot;,&quot;parentUUID&quot;:&quot;8c06d15f-b197-4644-a4a3-32ff9f5e4dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test(fail operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-username services Test second test(fail operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmail: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.forgotUserName(\&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62a6ee41-0bd3-42e8-a672-2b92fb83ee99&quot;,&quot;parentUUID&quot;:&quot;8c06d15f-b197-4644-a4a3-32ff9f5e4dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;third test(exception in mail service)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-username services Test third test(exception in mail service)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmail: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        checkPassword: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n});\nconst output = await userServiceObj.forgotUserName(\&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.EMAIL_ERROR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd2353f2-c1da-4999-8334-274c598d9c97&quot;,&quot;parentUUID&quot;:&quot;8c06d15f-b197-4644-a4a3-32ff9f5e4dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a16bb10a-2704-4f27-a606-8acd07e56b9a&quot;,&quot;62a6ee41-0bd3-42e8-a672-2b92fb83ee99&quot;,&quot;cd2353f2-c1da-4999-8334-274c598d9c97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;07327dae-ebf2-4112-9c87-b7013ece9ab0&quot;,&quot;title&quot;:&quot;Forgot-password services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-password services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmailAndUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        profileBackground: {\n          replace: () =&gt; {\n            return \&quot;string\&quot;;\n          },\n        },\n        profilePicture: {\n          replace: () =&gt; {\n            return \&quot;string\&quot;;\n          },\n        },\n        save: (password, passwordDB) =&gt; {\n          return true;\n        },\n        createPasswordResetToken: () =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.forgotPassword(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dae04e6-4427-4b50-a378-994d38aced9c&quot;,&quot;parentUUID&quot;:&quot;07327dae-ebf2-4112-9c87-b7013ece9ab0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test(success operation of database but  exception occured)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-password services Test second test(success operation of database but  exception occured)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmailAndUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        save: (password, passwordDB) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n});\nconst output = await userServiceObj.forgotPassword(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.EMAIL_ERROR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;723c0e4f-15d7-45fa-b163-62564903ce9e&quot;,&quot;parentUUID&quot;:&quot;07327dae-ebf2-4112-9c87-b7013ece9ab0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test(fail operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test Forgot-password services Test thrid test(fail operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmailAndUserName: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n      msg: \&quot;\&quot;,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.forgotPassword(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.USER_NOT_FOUND);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66afcd46-dd72-46d6-a7ac-98429adc34ac&quot;,&quot;parentUUID&quot;:&quot;07327dae-ebf2-4112-9c87-b7013ece9ab0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4dae04e6-4427-4b50-a378-994d38aced9c&quot;,&quot;723c0e4f-15d7-45fa-b163-62564903ce9e&quot;,&quot;66afcd46-dd72-46d6-a7ac-98429adc34ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;1afe34fc-c14f-44f1-b407-f5972f3132d0&quot;,&quot;title&quot;:&quot;reset-password services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test reset-password services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByResetPassword: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        profileBackground: {\n          replace: () =&gt; {\n            return \&quot;string\&quot;;\n          },\n        },\n        profilePicture: {\n          replace: () =&gt; {\n            return \&quot;string\&quot;;\n          },\n        },\n        save: (password, passwordDB) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.resetPassword(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, true);\nassert.notEqual(output.token, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca9b430d-313a-4177-aef0-43ea21ceb142&quot;,&quot;parentUUID&quot;:&quot;1afe34fc-c14f-44f1-b407-f5972f3132d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test(fao; operation of database)&quot;,&quot;fullTitle&quot;:&quot;Authentication Test reset-password services Test second test(fao; operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByResetPassword: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.resetPassword(\&quot;\&quot;, \&quot;\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.INVALID_RESET_TOKEN);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1978689-8696-45a0-bc4a-fd6c9cc270b3&quot;,&quot;parentUUID&quot;:&quot;1afe34fc-c14f-44f1-b407-f5972f3132d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca9b430d-313a-4177-aef0-43ea21ceb142&quot;,&quot;e1978689-8696-45a0-bc4a-fd6c9cc270b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;2ec5dfdf-2e2d-493f-baa2-a7080e44e434&quot;,&quot;title&quot;:&quot;User Services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3b676e49-50dd-4470-97bc-3cbebbcd418a&quot;,&quot;title&quot;:&quot;Get user preferences &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test Get user preferences  test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet user = {\n  canbeFollowed: true,\n  nsfw: true,\n  displayName: \&quot;ahmed\&quot;,\n  profilePicture: \&quot;img.png\&quot;,\n};\nlet result = userServiceObj.getPrefs(user);\nassert.equal(result.displayName, user.displayName);\nassert.equal(result.nsfw, user.nsfw);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4228dbc8-2167-4a9c-8bd3-35d01d87c43d&quot;,&quot;parentUUID&quot;:&quot;3b676e49-50dd-4470-97bc-3cbebbcd418a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4228dbc8-2167-4a9c-8bd3-35d01d87c43d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ed062e48-4b93-4de7-8ea0-3ab21b859242&quot;,&quot;title&quot;:&quot;Update user preferences &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test Update user preferences  test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  updateOne: (userData, body) =&gt; {\n    const response = {\n      doc: {\n        canbeFollowed: false,\n        nsfw: true,\n        displayName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;img.png\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n});\nconst query = {\n  canbeFollowed: false,\n};\nlet result = await userServiceObj.updatePrefs(query, \&quot;\&quot;);\nassert.equal(result.displayName, \&quot;ahmed\&quot;);\nassert.equal(result.canbeFollowed, false);\nassert.equal(result.nsfw, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fd06220-518c-45e8-b8c6-4bb56044823f&quot;,&quot;parentUUID&quot;:&quot;ed062e48-4b93-4de7-8ea0-3ab21b859242&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fd06220-518c-45e8-b8c6-4bb56044823f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;33a0522c-7396-47b6-bbbf-6212d9587055&quot;,&quot;title&quot;:&quot;Username available&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;available&quot;,&quot;fullTitle&quot;:&quot;User Services Test Username available available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByName: async (userName) =&gt; {\n    return { success: false };\n  },\n};\nconst userServices = new UserService({\n  UserRepository,\n});\nconst available = await userServices.isAvailable(\&quot;kiro\&quot;);\nexpect(available).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9d299f2-5339-4ca6-a506-2643613ffbe8&quot;,&quot;parentUUID&quot;:&quot;33a0522c-7396-47b6-bbbf-6212d9587055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unavailable&quot;,&quot;fullTitle&quot;:&quot;User Services Test Username available unavailable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByName: async (userName) =&gt; {\n    return { success: true };\n  },\n};\nconst userServices = new UserService({\n  UserRepository,\n});\nconst available = await userServices.isAvailable(\&quot;kiro\&quot;);\nexpect(available).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23ab2298-f9d0-4dfd-abf6-b7bfd6a0b91a&quot;,&quot;parentUUID&quot;:&quot;33a0522c-7396-47b6-bbbf-6212d9587055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9d299f2-5339-4ca6-a506-2643613ffbe8&quot;,&quot;23ab2298-f9d0-4dfd-abf6-b7bfd6a0b91a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;975a6d3d-cf70-468d-a1be-e5e88a5f620c&quot;,&quot;title&quot;:&quot;Subscribe&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;subscribe(fail)&quot;,&quot;fullTitle&quot;:&quot;User Services Test Subscribe subscribe(fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;sub\&quot;;\nUserRepository.isSubscribed = async (userName) =&gt; true;\nconst subscribed = await userServices.subscribe(\n  userId,\n  subredditId,\n  action\n);\nexpect(subscribed).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e5da297-6590-4c44-b666-19ad0623c671&quot;,&quot;parentUUID&quot;:&quot;975a6d3d-cf70-468d-a1be-e5e88a5f620c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribe(fail)&quot;,&quot;fullTitle&quot;:&quot;User Services Test Subscribe unsubscribe(fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;unsub\&quot;;\nUserRepository.isSubscribed = async (userName) =&gt; false;\nconst subscribed = await userServices.subscribe(\n  userId,\n  subredditId,\n  action\n);\nexpect(subscribed).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fd11eaa-a43f-4aa7-9c86-52fee8498049&quot;,&quot;parentUUID&quot;:&quot;975a6d3d-cf70-468d-a1be-e5e88a5f620c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;invalid action&quot;,&quot;fullTitle&quot;:&quot;User Services Test Subscribe invalid action&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;action = \&quot;not a valid action\&quot;;\nconst subscribed = await userServices.subscribe(\n  userId,\n  subredditId,\n  action\n);\nexpect(subscribed).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1be571ed-aea4-4f59-981f-6122b678dffe&quot;,&quot;parentUUID&quot;:&quot;975a6d3d-cf70-468d-a1be-e5e88a5f620c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e5da297-6590-4c44-b666-19ad0623c671&quot;,&quot;9fd11eaa-a43f-4aa7-9c86-52fee8498049&quot;,&quot;1be571ed-aea4-4f59-981f-6122b678dffe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;b55db82d-05b9-4d61-a4c4-9ebefe076c43&quot;,&quot;title&quot;:&quot;Subscribe&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;subscribe(fail)&quot;,&quot;fullTitle&quot;:&quot;User Services Test Subscribe subscribe(fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  push: async (id, obj) =&gt; {},\n  pull: async (id, obj) =&gt; {},\n  isSubscribed:async  () =&gt; {\n    return true;\n  },\n  subscribe:async  () =&gt; {\n    return true;\n  },\n};\nconst SubredditRepository = {\n  push: async (id, obj) =&gt; {},\n  pull: async (id, obj) =&gt; {},\n  unSubscribe :async  () =&gt; {\n    return true;\n  },\n  isSubscribed:async  () =&gt; {\n    return true;\n  },\n};\nconst userServices = new UserService({\n  UserRepository,SubredditRepository\n});\nconst userId = \&quot;123d493c3ff67d626ec994f7\&quot;;\nconst subredditId = \&quot;456d493c3ff67d626ec994f7\&quot;;\nlet action = \&quot;sub\&quot;;\naction = \&quot;sub\&quot;;\nUserRepository.isSubscribed = async (userName) =&gt; true;\nconst subscribed = await userServices.subscribe(\n  userId,\n  subredditId,\n  action\n);\nexpect(subscribed).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da0563d9-831a-4834-870d-9f3dc7b532f4&quot;,&quot;parentUUID&quot;:&quot;b55db82d-05b9-4d61-a4c4-9ebefe076c43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribe(fail)&quot;,&quot;fullTitle&quot;:&quot;User Services Test Subscribe unsubscribe(fail)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  push: async (id, obj) =&gt; {},\n  pull: async (id, obj) =&gt; {},\n  unSubscribe :async  () =&gt; {\n    return true;\n  },\n  isSubscribed:async  () =&gt; {\n    return true;\n  },\n};\nconst SubredditRepository = {\n  push: async (id, obj) =&gt; {},\n  pull: async (id, obj) =&gt; {},\n  unSubscribe :async  () =&gt; {\n    return true;\n  },\n  isSubscribed:async  () =&gt; {\n    return true;\n  },\n};\nconst userServices = new UserService({\n  UserRepository,SubredditRepository\n});\nconst userId = \&quot;123d493c3ff67d626ec994f7\&quot;;\nconst subredditId = \&quot;456d493c3ff67d626ec994f7\&quot;;\nlet action = \&quot;unsub\&quot;;\naction = \&quot;unsub\&quot;;\nUserRepository.isSubscribed = async (userName) =&gt; true;\nconst subscribed = await userServices.subscribe(\n  userId,\n  subredditId,\n  action\n);\nexpect(subscribed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f32aa33-5dd2-49c9-8429-d6602441b556&quot;,&quot;parentUUID&quot;:&quot;b55db82d-05b9-4d61-a4c4-9ebefe076c43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da0563d9-831a-4834-870d-9f3dc7b532f4&quot;,&quot;8f32aa33-5dd2-49c9-8429-d6602441b556&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;2567a969-e618-4116-9674-2f7d138c250b&quot;,&quot;title&quot;:&quot;addUserImageURL  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test addUserImageURL   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  updateOne: (userData, body) =&gt; {\n    const response = {\n      doc: {\n        canbeFollowed: false,\n        nsfw: true,\n        displayName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;img.png\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({ UserRepository });\nlet user = {\n  canbeFollowed: true,\n  nsfw: true,\n  displayName: \&quot;ahmed\&quot;,\n  profilePicture: \&quot;img.png\&quot;,\n  profileBackground: \&quot;img.png\&quot;,\n};\nlet result = await userServiceObj.addUserImageURL(\n  \&quot;!\&quot;,\n  \&quot;profilePicture\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.displayName, user.displayName);\nassert.equal(result.nsfw, user.nsfw);\nresult = await userServiceObj.addUserImageURL(\n  \&quot;!\&quot;,\n  \&quot;profileBackground\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.displayName, user.displayName);\nassert.equal(result.nsfw, user.nsfw);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e247841-2878-4e78-ae73-6183d5221b57&quot;,&quot;parentUUID&quot;:&quot;2567a969-e618-4116-9674-2f7d138c250b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e247841-2878-4e78-ae73-6183d5221b57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;cd95c651-cc2b-4765-8231-212b7f57399e&quot;,&quot;title&quot;:&quot;getSocialLinks  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SocialRepository = {\n  getAll: (userData, body) =&gt; {\n    const response = {\n      canbeFollowed: false,\n      nsfw: true,\n      displayName: \&quot;ahmed\&quot;,\n      profilePicture: \&quot;img.png\&quot;,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({ SocialRepository });\nlet user = {\n  canbeFollowed: true,\n  nsfw: true,\n  displayName: \&quot;ahmed\&quot;,\n  profilePicture: \&quot;img.png\&quot;,\n  profileBackground: \&quot;img.png\&quot;,\n};\nlet result = await userServiceObj.getSocialLinks(\n  \&quot;!\&quot;,\n  \&quot;profilePicture\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.displayName, user.displayName);\nassert.equal(result.nsfw, user.nsfw);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7a3ee21-2899-4fd3-ac1b-30c1e180d045&quot;,&quot;parentUUID&quot;:&quot;cd95c651-cc2b-4765-8231-212b7f57399e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d7a3ee21-2899-4fd3-ac1b-30c1e180d045&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;3d0fa2e4-1cf7-4eb8-80fc-ac53a57b75d7&quot;,&quot;title&quot;:&quot;createSocialLinks  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test createSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SocialRepository = {\n  findOne: (userData) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst UserRepository = {\n  updateSocialLinks: (userData, body) =&gt; {\n    const response = {\n      doc: {\n        canbeFollowed: false,\n        nsfw: true,\n        displayName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;img.png\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  SocialRepository,\n});\nlet me = {\n  socialLinks: [],\n  _id: \&quot;1\&quot;,\n};\nlet result = await userServiceObj.createSocialLinks(\n  me,\n  \&quot;profilePicture\&quot;,\n  \&quot;1\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b82d651-59e8-4b8b-8cfa-f34c4df7efa5&quot;,&quot;parentUUID&quot;:&quot;3d0fa2e4-1cf7-4eb8-80fc-ac53a57b75d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test createSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SocialRepository = {\n  findOne: (userData) =&gt; {\n    const response = {\n      success: true,\n    };\n    return response;\n  },\n};\nconst UserRepository = {\n  updateSocialLinks: (userData, body) =&gt; {\n    const response = {\n      doc: {\n        canbeFollowed: false,\n        nsfw: true,\n        displayName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;img.png\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  SocialRepository,\n});\nlet me = {\n  socialLinks: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;3\&quot;, \&quot;4\&quot;, \&quot;5\&quot;],\n  _id: \&quot;1\&quot;,\n};\nlet result = await userServiceObj.createSocialLinks(\n  me,\n  \&quot;profilePicture\&quot;,\n  \&quot;1\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.success, false);\nassert.equal(result.msg, \&quot;Max Links 5\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab83dcd2-4e55-47fe-83e9-e9feefcd3e6e&quot;,&quot;parentUUID&quot;:&quot;3d0fa2e4-1cf7-4eb8-80fc-ac53a57b75d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test createSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const SocialRepository = {\n  findOne: (userData) =&gt; {\n    const response = {\n      success: false,\n    };\n    return response;\n  },\n};\nconst UserRepository = {\n  updateSocialLinks: (userData, body) =&gt; {\n    const response = {\n      doc: {\n        canbeFollowed: false,\n        nsfw: true,\n        displayName: \&quot;ahmed\&quot;,\n        profilePicture: \&quot;img.png\&quot;,\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  SocialRepository,\n});\nlet me = {\n  socialLinks: [\&quot;1\&quot;, \&quot;2\&quot;, \&quot;3\&quot;, \&quot;4\&quot;],\n  _id: \&quot;1\&quot;,\n};\nlet result = await userServiceObj.createSocialLinks(\n  me,\n  \&quot;profilePicture\&quot;,\n  \&quot;1\&quot;,\n  \&quot;1\&quot;\n);\nassert.equal(result.success, false);\nassert.equal(result.msg, \&quot;Invalid social Id\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6a7807f-a249-460c-9601-e19d7c9cc304&quot;,&quot;parentUUID&quot;:&quot;3d0fa2e4-1cf7-4eb8-80fc-ac53a57b75d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b82d651-59e8-4b8b-8cfa-f34c4df7efa5&quot;,&quot;ab83dcd2-4e55-47fe-83e9-e9feefcd3e6e&quot;,&quot;a6a7807f-a249-460c-9601-e19d7c9cc304&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a0237729-cc28-422f-a657-fdd763550624&quot;,&quot;title&quot;:&quot;updateSocialLinks  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test updateSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n    {\n      _id: \&quot;2\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n  ],\n  _id: \&quot;3\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.updateSocialLinks(me, \&quot;2\&quot;, true, true);\nassert.equal(result.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cae9c83-0f98-4a97-ba77-2dd4df0be5b1&quot;,&quot;parentUUID&quot;:&quot;a0237729-cc28-422f-a657-fdd763550624&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test updateSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n    {\n      _id: \&quot;2\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n  ],\n  _id: \&quot;3\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.updateSocialLinks(me, \&quot;5\&quot;, true, true);\nassert.equal(result.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86ba3043-e31d-4907-a5d4-8b77f89046d8&quot;,&quot;parentUUID&quot;:&quot;a0237729-cc28-422f-a657-fdd763550624&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cae9c83-0f98-4a97-ba77-2dd4df0be5b1&quot;,&quot;86ba3043-e31d-4907-a5d4-8b77f89046d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;52de5d4b-eb33-4028-8a95-3d5b8a98d887&quot;,&quot;title&quot;:&quot;deleteSocialLinks  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test deleteSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n    {\n      _id: \&quot;2\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n  ],\n  _id: \&quot;3\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.deleteSocialLinks(me, \&quot;2\&quot;);\nassert.equal(result.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cb65c3d-1d59-4aaa-95b7-576fe5d984d5&quot;,&quot;parentUUID&quot;:&quot;52de5d4b-eb33-4028-8a95-3d5b8a98d887&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test deleteSocialLinks   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  socialLinks: [\n    {\n      _id: \&quot;1\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n    {\n      _id: \&quot;2\&quot;,\n      userLink: \&quot;\&quot;,\n      displayText: \&quot;\&quot;,\n    },\n  ],\n  _id: \&quot;3\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.deleteSocialLinks(me, \&quot;5\&quot;);\nassert.equal(result.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a6a5681-1c3e-4287-a7bb-13a92d7970d9&quot;,&quot;parentUUID&quot;:&quot;52de5d4b-eb33-4028-8a95-3d5b8a98d887&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7cb65c3d-1d59-4aaa-95b7-576fe5d984d5&quot;,&quot;8a6a5681-1c3e-4287-a7bb-13a92d7970d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;7955f5d8-56bf-41e8-a819-60b9d96b437d&quot;,&quot;title&quot;:&quot;replaceProfile  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test replaceProfile   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  _id: \&quot;3\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: `${process.env.BACKDOMAIN}/icon.png`,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = userServiceObj.replaceProfile(me);\nassert.equal(result.profilePicture, \&quot;icon.png\&quot;);\nassert.equal(result.profileBackground, me.profileBackground);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a38e4c5-fcd2-4a9c-b98f-9679a007b72e&quot;,&quot;parentUUID&quot;:&quot;7955f5d8-56bf-41e8-a819-60b9d96b437d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a38e4c5-fcd2-4a9c-b98f-9679a007b72e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;84d697ee-42c5-4beb-9f01-32cd8e8ee8be&quot;,&quot;title&quot;:&quot;checkBlockStatus &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkBlockStatus  test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  meUserRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.checkBlockStatus(me, other);\nassert.equal(result, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fc04a3b-dac7-4914-b92b-06e1ec56f781&quot;,&quot;parentUUID&quot;:&quot;84d697ee-42c5-4beb-9f01-32cd8e8ee8be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkBlockStatus  test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  meUserRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.checkBlockStatus(me, other);\nassert.equal(result, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7233d43-9dbd-4b72-9d93-d2a58562ff55&quot;,&quot;parentUUID&quot;:&quot;84d697ee-42c5-4beb-9f01-32cd8e8ee8be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fc04a3b-dac7-4914-b92b-06e1ec56f781&quot;,&quot;d7233d43-9dbd-4b72-9d93-d2a58562ff55&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;20fedb24-fdb4-458d-95c6-37d24e28f3e2&quot;,&quot;title&quot;:&quot;blockUser  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test blockUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  meUserRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.blockUser(me, other);\nassert.equal(result, true);\nassert.equal(me.meUserRelationship[0].status, \&quot;blocked\&quot;);\nassert.equal(other.userMeRelationship[0].status, \&quot;blocked\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc61a9f3-48c3-4c20-a265-782f13cde7c8&quot;,&quot;parentUUID&quot;:&quot;20fedb24-fdb4-458d-95c6-37d24e28f3e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test blockUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;none\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  meUserRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;none\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.blockUser(me, other);\nassert.equal(result, true);\nassert.equal(me.meUserRelationship[1].status, \&quot;blocked\&quot;);\nassert.equal(other.userMeRelationship[2].status, \&quot;blocked\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e6a4a27-87db-40f8-b168-fdd971dc476f&quot;,&quot;parentUUID&quot;:&quot;20fedb24-fdb4-458d-95c6-37d24e28f3e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc61a9f3-48c3-4c20-a265-782f13cde7c8&quot;,&quot;5e6a4a27-87db-40f8-b168-fdd971dc476f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a90877cd-2b26-4513-aa5f-31151becfe94&quot;,&quot;title&quot;:&quot;unBlockUser  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test unBlockUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.unBlockUser(me, other);\nassert.equal(result, true);\nassert.equal(me.meUserRelationship[0].status, \&quot;none\&quot;);\nassert.equal(other.userMeRelationship[0].status, \&quot;none\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c35a9dad-a105-404a-88be-f730fc3dfdb6&quot;,&quot;parentUUID&quot;:&quot;a90877cd-2b26-4513-aa5f-31151becfe94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c35a9dad-a105-404a-88be-f730fc3dfdb6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;bd2cf81f-0c77-46e1-8111-0344fc8274b1&quot;,&quot;title&quot;:&quot;followUser  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test followUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  meUserRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.followUser(me, other);\nassert.equal(result, false);\nassert.equal(me.meUserRelationship[0].status, \&quot;followed\&quot;);\nassert.equal(other.userMeRelationship[2].status, \&quot;followed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75bbaa97-ff7d-47c3-8711-bacffaa02278&quot;,&quot;parentUUID&quot;:&quot;bd2cf81f-0c77-46e1-8111-0344fc8274b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test2 should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test followUser   test2 should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;none\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  meUserRelationship: [\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;none\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.followUser(me, other);\nassert.equal(result, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df600d46-955a-46ce-a019-c20b6042708b&quot;,&quot;parentUUID&quot;:&quot;bd2cf81f-0c77-46e1-8111-0344fc8274b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75bbaa97-ff7d-47c3-8711-bacffaa02278&quot;,&quot;df600d46-955a-46ce-a019-c20b6042708b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;126ee295-fa59-4bcb-a150-5d73c08e56fb&quot;,&quot;title&quot;:&quot;unFollowUser  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test unFollowUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;1\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.unfollowUser(me, other);\nassert.equal(result, false);\nassert.equal(me.meUserRelationship[0].status, \&quot;none\&quot;);\nassert.equal(other.userMeRelationship[0].status, \&quot;none\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85b69009-313c-42f8-91fe-2b03c51f2a95&quot;,&quot;parentUUID&quot;:&quot;126ee295-fa59-4bcb-a150-5d73c08e56fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test unFollowUser   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  userMeRelationship: [\n    {\n      userId: \&quot;4\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;5\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;2\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.unfollowUser(me, other);\nassert.equal(result, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15c70fcc-917c-47b1-9f0c-c89c02fef54b&quot;,&quot;parentUUID&quot;:&quot;126ee295-fa59-4bcb-a150-5d73c08e56fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85b69009-313c-42f8-91fe-2b03c51f2a95&quot;,&quot;15c70fcc-917c-47b1-9f0c-c89c02fef54b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0096b959-8c4c-41e5-b38a-e4d67cdc2cd6&quot;,&quot;title&quot;:&quot;generateRandomPassword  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test generateRandomPassword   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet result = userServiceObj.generateRandomPassword();\nassert.notEqual(result, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ffe929e-2eda-4579-ac88-73a648d91ae6&quot;,&quot;parentUUID&quot;:&quot;0096b959-8c4c-41e5-b38a-e4d67cdc2cd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ffe929e-2eda-4579-ac88-73a648d91ae6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;123503f3-bc97-49a3-97d0-4380abf73bda&quot;,&quot;title&quot;:&quot;checkPasswordStrength  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkPasswordStrength   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet result = userServiceObj.checkPasswordStrength(\&quot;Aa123456*\&quot;);\nassert.equal(result, \&quot;Medium\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad7c8612-d9b2-46c5-8167-738058d57efe&quot;,&quot;parentUUID&quot;:&quot;123503f3-bc97-49a3-97d0-4380abf73bda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad7c8612-d9b2-46c5-8167-738058d57efe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;aa7c1d88-8c69-4152-8a53-c52ed8cd48bf&quot;,&quot;title&quot;:&quot;sendVerificationToken  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test sendVerificationToken   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({ Email });\nlet user = {\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  createVerificationToken: () =&gt; {\n    return \&quot;token\&quot;;\n  },\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.sendVerificationToken(user);\nassert.equal(result.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3504b0f0-5f22-4a31-becd-c2b8599d765e&quot;,&quot;parentUUID&quot;:&quot;aa7c1d88-8c69-4152-8a53-c52ed8cd48bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test sendVerificationToken   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet user = {\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  createVerificationToken: () =&gt; {\n    return \&quot;token\&quot;;\n  },\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.sendVerificationToken(user);\nassert.equal(result.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f4917ae-22ea-483a-a64e-73d52ac50c6e&quot;,&quot;parentUUID&quot;:&quot;aa7c1d88-8c69-4152-8a53-c52ed8cd48bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3504b0f0-5f22-4a31-becd-c2b8599d765e&quot;,&quot;6f4917ae-22ea-483a-a64e-73d52ac50c6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ad8ca289-f230-4510-84e3-468b94e117d5&quot;,&quot;title&quot;:&quot;changePassword  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test changePassword   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet user = {\n  _id: \&quot;1\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.changePassword(user);\nassert.notEqual(result, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0034bf9d-6d37-4694-af16-2374f81d1159&quot;,&quot;parentUUID&quot;:&quot;ad8ca289-f230-4510-84e3-468b94e117d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0034bf9d-6d37-4694-af16-2374f81d1159&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;f3271792-c445-4a54-8106-d45a2eff19b7&quot;,&quot;title&quot;:&quot;deleteAccount  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test deleteAccount   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\nlet user = {\n  _id: \&quot;1\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet result = await userServiceObj.deleteAccount(user);\nassert.equal(result, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e6faa07-ae47-461d-9fa4-8de25a06f1ed&quot;,&quot;parentUUID&quot;:&quot;f3271792-c445-4a54-8106-d45a2eff19b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e6faa07-ae47-461d-9fa4-8de25a06f1ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;0d995b9c-a100-40c0-a3cb-43895a91bf2a&quot;,&quot;title&quot;:&quot;decodeToken  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test decodeToken   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userServiceObj = new UserService({});\ntoken = userServiceObj.createToken(\&quot;1\&quot;);\nlet result = await userServiceObj.decodeToken(token);\nassert.notEqual(result, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e621e949-a435-43fd-aa20-c96551452cf1&quot;,&quot;parentUUID&quot;:&quot;0d995b9c-a100-40c0-a3cb-43895a91bf2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e621e949-a435-43fd-aa20-c96551452cf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;5803edfa-8a9b-4a4d-8b29-67429cfe520f&quot;,&quot;title&quot;:&quot;verifyEmailToken services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test verifyEmailToken services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByVerificationToken: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.verifyEmailToken(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);\nassert.notEqual(output.token, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68bc1f43-1402-4905-b98c-a3d360c384d6&quot;,&quot;parentUUID&quot;:&quot;5803edfa-8a9b-4a4d-8b29-67429cfe520f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test verifyEmailToken services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByVerificationToken: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.verifyEmailToken(\&quot;token\&quot;);\nassert.equal(output.success, false);\nassert.equal(output.error, userErrors.INVALID_RESET_TOKEN);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56740477-8fad-4a80-af36-703b2109e82b&quot;,&quot;parentUUID&quot;:&quot;5803edfa-8a9b-4a4d-8b29-67429cfe520f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68bc1f43-1402-4905-b98c-a3d360c384d6&quot;,&quot;56740477-8fad-4a80-af36-703b2109e82b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;8b04644a-ce5a-4324-8eaa-5d91f1a0d960&quot;,&quot;title&quot;:&quot;getUser services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUser services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findById: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUser(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c63c9f3-aa09-4432-a4cd-fa0f5f72f1f1&quot;,&quot;parentUUID&quot;:&quot;8b04644a-ce5a-4324-8eaa-5d91f1a0d960&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUser services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findById: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUser(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ed36950-07ff-48e9-97e6-ea4639b94275&quot;,&quot;parentUUID&quot;:&quot;8b04644a-ce5a-4324-8eaa-5d91f1a0d960&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c63c9f3-aa09-4432-a4cd-fa0f5f72f1f1&quot;,&quot;5ed36950-07ff-48e9-97e6-ea4639b94275&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e6eb2c54-f21c-4895-9956-6ba06d00c78c&quot;,&quot;title&quot;:&quot;getUserWithFollowers services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserWithFollowers services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findById: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserWithFollowers(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9900b176-774c-4565-81d3-d6f3b15baaa8&quot;,&quot;parentUUID&quot;:&quot;e6eb2c54-f21c-4895-9956-6ba06d00c78c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserWithFollowers services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findById: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserWithFollowers(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8fec09c-cc5c-4f96-835d-89664893a2f9&quot;,&quot;parentUUID&quot;:&quot;e6eb2c54-f21c-4895-9956-6ba06d00c78c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9900b176-774c-4565-81d3-d6f3b15baaa8&quot;,&quot;f8fec09c-cc5c-4f96-835d-89664893a2f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;acd5e626-f9b2-404b-9b4b-840fc2b01639&quot;,&quot;title&quot;:&quot;getUserByEmail services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserByEmail services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmail: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserByEmail(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdf1f3f9-53ed-43bd-95dc-aa8f682635a1&quot;,&quot;parentUUID&quot;:&quot;acd5e626-f9b2-404b-9b4b-840fc2b01639&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserByEmail services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByEmail: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserByEmail(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20fdfbda-9abe-4512-b1bd-052253293671&quot;,&quot;parentUUID&quot;:&quot;acd5e626-f9b2-404b-9b4b-840fc2b01639&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cdf1f3f9-53ed-43bd-95dc-aa8f682635a1&quot;,&quot;20fdfbda-9abe-4512-b1bd-052253293671&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;a37ce061-165a-47bd-a8ed-ec346975e1af&quot;,&quot;title&quot;:&quot;getUserByName services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserByName services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserByName(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;794e42d8-468d-4da4-868a-22c32adc2e14&quot;,&quot;parentUUID&quot;:&quot;a37ce061-165a-47bd-a8ed-ec346975e1af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getUserByName services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getUserByName(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a759c14-6ffb-4a97-befa-08d8bc859a8a&quot;,&quot;parentUUID&quot;:&quot;a37ce061-165a-47bd-a8ed-ec346975e1af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;794e42d8-468d-4da4-868a-22c32adc2e14&quot;,&quot;0a759c14-6ffb-4a97-befa-08d8bc859a8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;707d53ac-6f26-421f-a014-5836225da6b0&quot;,&quot;title&quot;:&quot;checkPassword  &quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;test should be success&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkPassword   test should be success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByUserName: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        checkPassword: async () =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({ UserRepository });\nlet result = await userServiceObj.checkPassword(token);\nassert.equal(result, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3d9dda0-15d6-42f8-b5d3-976f1cdac0a6&quot;,&quot;parentUUID&quot;:&quot;707d53ac-6f26-421f-a014-5836225da6b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3d9dda0-15d6-42f8-b5d3-976f1cdac0a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;72d0098c-83c8-4e5f-bba1-6a0e89ba5f29&quot;,&quot;title&quot;:&quot;updateUserEmail services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test updateUserEmail services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  updateEmailById: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.updateUserEmail(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c5cf1f0-5a30-4095-b5cc-8047a6431a5b&quot;,&quot;parentUUID&quot;:&quot;72d0098c-83c8-4e5f-bba1-6a0e89ba5f29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test updateUserEmail services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  updateEmailById: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.updateUserEmail(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5038fd39-dcb3-4fbf-b31a-f4885638367f&quot;,&quot;parentUUID&quot;:&quot;72d0098c-83c8-4e5f-bba1-6a0e89ba5f29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c5cf1f0-5a30-4095-b5cc-8047a6431a5b&quot;,&quot;5038fd39-dcb3-4fbf-b31a-f4885638367f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6c0e8137-14c3-43c7-8e34-338115d31e8e&quot;,&quot;title&quot;:&quot;checkResetTokenTime services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkResetTokenTime services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByResetPassword: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.checkResetTokenTime(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eec57fb8-ff2c-4e81-b920-b67ae22b1d86&quot;,&quot;parentUUID&quot;:&quot;6c0e8137-14c3-43c7-8e34-338115d31e8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test checkResetTokenTime services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  findByResetPassword: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.checkResetTokenTime(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b85ca5d0-cfec-4061-b0b1-f2cd10658d92&quot;,&quot;parentUUID&quot;:&quot;6c0e8137-14c3-43c7-8e34-338115d31e8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eec57fb8-ff2c-4e81-b920-b67ae22b1d86&quot;,&quot;b85ca5d0-cfec-4061-b0b1-f2cd10658d92&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;6016e241-9c06-45d0-af2a-85034c4223ea&quot;,&quot;title&quot;:&quot;about services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test about services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  _id: \&quot;2\&quot;,\n  userName: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  profileBackground: \&quot;\&quot;,\n  canbeFollowed: 0,\n  followersCount: 0,\n  friendsCount: 0,\n  gender: \&quot;\&quot;,\n  displayName: \&quot;\&quot;,\n  postKarma: 0,\n  commentKarma: 0,\n  description: \&quot;\&quot;,\n  createdAt: \&quot;\&quot;,\n  nsfw: true,\n  autoplayMedia: true,\n  adultContent: true,\n  isFollowed: true,\n  country: \&quot;\&quot;,\n  socialLinks: [],\n  isBlocked: false,\n};\nconst userServiceObj = new UserService({});\nconst output = await userServiceObj.about(me, other);\nassert.equal(output.profileBackground, \&quot;\&quot;);\nassert.equal(output.isBlocked, false);\nassert.equal(output.isFollowed, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b37f4dc1-59a8-4ce2-a9e5-70ed9fed854f&quot;,&quot;parentUUID&quot;:&quot;6016e241-9c06-45d0-af2a-85034c4223ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test about services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  _id: \&quot;2\&quot;,\n  userName: \&quot;\&quot;,\n  profilePicture: `${process.env.BACKDOMAIN}/users/default.png`,\n  profileBackground: `${process.env.BACKDOMAIN}/users/defaultcover.png`,\n  canbeFollowed: 0,\n  followersCount: 0,\n  friendsCount: 0,\n  gender: \&quot;\&quot;,\n  displayName: \&quot;\&quot;,\n  postKarma: 0,\n  commentKarma: 0,\n  description: \&quot;\&quot;,\n  createdAt: \&quot;\&quot;,\n  nsfw: true,\n  autoplayMedia: true,\n  adultContent: true,\n  isFollowed: false,\n  country: \&quot;\&quot;,\n  socialLinks: [],\n  isBlocked: true,\n};\nconst userServiceObj = new UserService({});\nconst output = await userServiceObj.about(me, other);\nassert.equal(\n  output.profileBackground,\n  `${process.env.BACKDOMAIN}/users/defaultcover.png`\n);\nassert.equal(output.isBlocked, false);\nassert.equal(output.isFollowed, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a106b449-407d-46d1-8986-85d2f3fa103c&quot;,&quot;parentUUID&quot;:&quot;6016e241-9c06-45d0-af2a-85034c4223ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;thrid test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test about services Test thrid test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: \&quot;3\&quot;,\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n  ],\n  _id: \&quot;1\&quot;,\n  profileBackground: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  save: async () =&gt; {\n    return true;\n  },\n};\nlet other = {\n  _id: \&quot;2\&quot;,\n  userName: \&quot;\&quot;,\n  profilePicture: \&quot;\&quot;,\n  profileBackground: \&quot;\&quot;,\n  canbeFollowed: 0,\n  followersCount: 0,\n  friendsCount: 0,\n  gender: \&quot;\&quot;,\n  displayName: \&quot;\&quot;,\n  postKarma: 0,\n  commentKarma: 0,\n  description: \&quot;\&quot;,\n  createdAt: \&quot;\&quot;,\n  nsfw: true,\n  autoplayMedia: true,\n  adultContent: true,\n  isFollowed: false,\n  country: \&quot;\&quot;,\n  socialLinks: [],\n  isBlocked: true,\n};\nconst userServiceObj = new UserService({});\nconst output = await userServiceObj.about(me, other);\nassert.equal(output.profileBackground, \&quot;\&quot;);\nassert.equal(output.isBlocked, true);\nassert.equal(output.isFollowed, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3aff1173-e506-4bf7-bdb8-75861afaa94b&quot;,&quot;parentUUID&quot;:&quot;6016e241-9c06-45d0-af2a-85034c4223ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b37f4dc1-59a8-4ce2-a9e5-70ed9fed854f&quot;,&quot;a106b449-407d-46d1-8986-85d2f3fa103c&quot;,&quot;3aff1173-e506-4bf7-bdb8-75861afaa94b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;ebe9909e-901b-4ebe-8f79-137167efadaa&quot;,&quot;title&quot;:&quot;saveFirebaseToken services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test saveFirebaseToken services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  addTokenToUser: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.saveFirebaseToken(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87fbfa23-02b0-4447-b4dd-68afc06f817c&quot;,&quot;parentUUID&quot;:&quot;ebe9909e-901b-4ebe-8f79-137167efadaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test saveFirebaseToken services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  addTokenToUser: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.saveFirebaseToken(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e689d55f-ca5b-4c64-964b-f17536608179&quot;,&quot;parentUUID&quot;:&quot;ebe9909e-901b-4ebe-8f79-137167efadaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87fbfa23-02b0-4447-b4dd-68afc06f817c&quot;,&quot;e689d55f-ca5b-4c64-964b-f17536608179&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;27088175-bdbb-46c6-8c5c-a32ba87993a9&quot;,&quot;title&quot;:&quot;getFirebaseToken services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getFirebaseToken services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  getFirebaseToken: (userData) =&gt; {\n    const response = {\n      success: true,\n      doc: {\n        _id: \&quot;1\&quot;,\n        password: \&quot;Aa1234*\&quot;,\n        profileBackground: \&quot;\&quot;,\n        profilePicture: \&quot;\&quot;,\n        save: async (data1, data2) =&gt; {\n          return true;\n        },\n      },\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getFirebaseToken(\&quot;ahmed\&quot;);\nassert.equal(output.success, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e68356b-21db-40b8-887e-7a257355e6f8&quot;,&quot;parentUUID&quot;:&quot;27088175-bdbb-46c6-8c5c-a32ba87993a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;second test success&quot;,&quot;fullTitle&quot;:&quot;User Services Test getFirebaseToken services Test second test success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  getFirebaseToken: (userData) =&gt; {\n    const response = {\n      success: false,\n      error: mongoErrors.NOT_FOUND,\n    };\n    return response;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getFirebaseToken(\&quot;token\&quot;);\nassert.equal(output.success, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab3b3bfb-c16c-4aa1-ad74-bab931dc72e8&quot;,&quot;parentUUID&quot;:&quot;27088175-bdbb-46c6-8c5c-a32ba87993a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e68356b-21db-40b8-887e-7a257355e6f8&quot;,&quot;ab3b3bfb-c16c-4aa1-ad74-bab931dc72e8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;831fa35b-9d47-44ff-b664-f3dc2f0dfc16&quot;,&quot;title&quot;:&quot;getBlockedUsers services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getBlockedUsers services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const UserRepository = {\n  getBlocked: (userData) =&gt; {\n    const users = [\n      {\n        status: \&quot;blocked\&quot;,\n        userId: {\n          _id: \&quot;1\&quot;,\n          profileBackground: \&quot;\&quot;,\n          profilePicture: \&quot;\&quot;,\n          userName: \&quot;ahmed\&quot;,\n          postKarma: 0,\n          commentKarma: 0,\n        },\n      },\n      {\n        status: \&quot;followed\&quot;,\n        userId: {\n          _id: \&quot;2\&quot;,\n          profileBackground: \&quot;\&quot;,\n          profilePicture: \&quot;\&quot;,\n          userName: \&quot;mohamed\&quot;,\n          postKarma: 0,\n          commentKarma: 0,\n        },\n      },\n    ];\n    return users;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getBlockedUsers(\&quot;ahmed\&quot;);\nassert.equal(output.length, 1);\nassert.equal(output[0].userName, \&quot;ahmed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6df0bff-c3f8-49ee-a7d1-b90d4c70d5d1&quot;,&quot;parentUUID&quot;:&quot;831fa35b-9d47-44ff-b664-f3dc2f0dfc16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6df0bff-c3f8-49ee-a7d1-b90d4c70d5d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;54e75d6a-5bff-4858-8f53-aef141472a3b&quot;,&quot;title&quot;:&quot;getFollowers services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getFollowers services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let me = {\n  meUserRelationship: [\n    {\n      userId: \&quot;2\&quot;,\n      status: \&quot;followed\&quot;,\n    },\n  ],\n};\nconst UserRepository = {\n  getFollowers: (userData) =&gt; {\n    const users = [\n      {\n        status: \&quot;blocked\&quot;,\n        userId: {\n          _id: \&quot;1\&quot;,\n          profileBackground: \&quot;\&quot;,\n          profilePicture: \&quot;\&quot;,\n          userName: \&quot;ahmed\&quot;,\n          postKarma: 0,\n          commentKarma: 0,\n        },\n      },\n      {\n        status: \&quot;followed\&quot;,\n        userId: {\n          _id: \&quot;2\&quot;,\n          profileBackground: \&quot;\&quot;,\n          profilePicture: \&quot;\&quot;,\n          userName: \&quot;mohamed\&quot;,\n          postKarma: 0,\n          commentKarma: 0,\n        },\n      },\n    ];\n    return users;\n  },\n};\nconst userServiceObj = new UserService({\n  UserRepository,\n  Email,\n});\nconst output = await userServiceObj.getFollowers(me);\nassert.equal(output.length, 1);\nassert.equal(output[0].userName, \&quot;mohamed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12482221-35cb-4575-ab51-bcb812eb3a83&quot;,&quot;parentUUID&quot;:&quot;54e75d6a-5bff-4858-8f53-aef141472a3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12482221-35cb-4575-ab51-bcb812eb3a83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;29cefdef-6fd0-4137-9928-b554e2487d3a&quot;,&quot;title&quot;:&quot;getPeopleUserKnows services Test&quot;,&quot;fullFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\test\\services\\userServices.js&quot;,&quot;file&quot;:&quot;\\test\\services\\userServices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;first test (success operation of database)&quot;,&quot;fullTitle&quot;:&quot;User Services Test getPeopleUserKnows services Test first test (success operation of database)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let me = {\n  meUserRelationship: [\n    {\n      userId: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3881\&quot;),\n      status: \&quot;blocked\&quot;,\n    },\n    {\n      userId: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3882\&quot;),\n      status: \&quot;followed\&quot;,\n    },\n  ],\n  userMeRelationship: [\n    {\n      userId: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3880\&quot;),\n      status: \&quot;followed\&quot;,\n    },\n    {\n      userId: mongoose.Types.ObjectId(\&quot;636e901bbc485bd111dd3882\&quot;),\n      status: \&quot;blocked\&quot;,\n    },\n  ],\n};\nconst userServiceObj = new UserService({\n  Email,\n});\nconst output = await userServiceObj.getPeopleUserKnows(me);\n// assert.equal(output.length, 1);\n// assert.equal(output[0].userName, \&quot;mohamed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b23607af-d48b-4c64-988d-ba1a8055c0ad&quot;,&quot;parentUUID&quot;:&quot;29cefdef-6fd0-4137-9928-b554e2487d3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b23607af-d48b-4c64-988d-ba1a8055c0ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:1000000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.1.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;API&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\Engineering\\Third_Year\\CMP_2023\\First_Term\\Software Engineering\\Project\\Backend-Reddit\\API\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>